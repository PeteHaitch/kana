/*! For license information please see 377.676821c7.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkkana=self.webpackChunkkana||[]).push([[377],{8109:function(e,t,n){var r=n(4165),i=n(5671),a=n(3144);function s(e,t,n,r){return new(n||(n=Promise))((function(i,a){function s(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))}var o,l=function(){function e(){(0,i.Z)(this,e),this.mutex=Promise.resolve()}return(0,a.Z)(e,[{key:"lock",value:function(){var e=function(){};return this.mutex=this.mutex.then((function(){return new Promise(e)})),new Promise((function(t){e=t}))}},{key:"dispatch",value:function(e){return s(this,void 0,void 0,(0,r.Z)().mark((function t(){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.lock();case 2:return n=t.sent,t.prev=3,t.next=6,Promise.resolve(e());case 6:return t.abrupt("return",t.sent);case 7:return t.prev=7,n(),t.finish(7);case 10:case"end":return t.stop()}}),t,this,[[3,,7,10]])})))}}]),e}();var u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:n.g;o=u.Buffer,u.TextEncoder&&new u.TextEncoder;"a".charCodeAt(0),"0".charCodeAt(0);for(var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=new Uint8Array(256),f=0;f<h.length;f++)c[h.charCodeAt(f)]=f;new l,new Map;new l;new l;new DataView(new ArrayBuffer(4));new l;new l;new l;new l;new l;new l;new l;new l;new l;new l;new l;new l;new l;new l;new l,new ArrayBuffer(8);new l,new ArrayBuffer(8);new l,new ArrayBuffer(8);new l;new l;new l},2754:function(e,t,n){n.d(t,{ES:function(){return Ee.ES},sF:function(){return K},Y:function(){return ke},nN:function(){return te.nN},J6:function(){return m.J6},E4:function(){return i.E4},zD:function(){return te.zD},CM:function(){return te.CM},EQ:function(){return te.EQ},cO:function(){return te.cO},TN:function(){return tt},jJ:function(){return D.jJ},j2:function(){return st},Qr:function(){return te.Qr}});var r=n(6546),i=n(652),a=n(9873),s=n(9751),o=n(2269),l=n(7317),u=n(8366),h=n(2615),c=n(384),f=n(7188),d=n(6849),v=n(8580),_=n(1944),w=n(7625),p=n(4414),m=n(8334),Z=n(2346),g=n(8916),b=n(2793),y=n(3324),k=n(7762),x=n(5671),E=n(3144),A=n(101),S=n(3889),z=n(5831),R=n(7891),D=n(818),C=new WeakSet,N=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,x.Z)(this,e),(0,A.Z)(this,C),this._selections=null==t?{}:t,this._cache=null==n?{results:{}}:n}return(0,E.Z)(e,[{key:"free",value:function(){R.Yl(this._cache.buffer),delete this._cache.buffer;for(var e=0,t=Object.keys(this._cache.results);e<t.length;e++){var n=t[e];(0,S.Z)(this,C,W).call(this,n)}this._cache.results={},D.eo(this._cache.versus),delete this._cache.versus}},{key:"addSelection",value:function(e,t,n,r,i,a,s,o){var l=r(n[0]).numberOfColumns();R.N2(t,l);var u=R.rS(l,"Int32Array",this._cache);u.fill(0);var h=u.array();t.forEach((function(e){h[e]=1}));var c,f={},d=(0,k.Z)(n);try{for(d.s();!(c=d.n()).done;){var v=c.value,_=r(v);f[v]=z.y5(_,u,{block:i,lfcThreshold:s,computeAuc:o})}}catch(w){d.e(w)}finally{d.f()}e in this._cache.results&&(0,S.Z)(this,C,W).call(this,e),this._cache.results[e]={raw:f},a&&(t=t.slice()),this._selections[e]=t}},{key:"removeSelection",value:function(e){(0,S.Z)(this,C,W).call(this,e),delete this._cache.results[e],delete this._selections[e]}},{key:"fetchResults",value:function(e){return this._cache.results[e].raw}},{key:"fetchSelectionIndices",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).copy,n=void 0===t||t,r=this._selections[e];return n&&(r=r.slice()),r}},{key:"fetchSelections",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.copy,n=void 0===t||t,r=e.force,i=void 0===r?null:r,a={},s=0,o=Object.entries(this._selections);s<o.length;s++){var l=(0,y.Z)(o[s],2),u=l[0],h=l[1],c=h,f=n;null!==i&&("Array"==i?h instanceof Array||(c=Array.from(h),f=!1):"Int32Array"==i&&(h instanceof Int32Array||(c=new Int32Array(h),f=!1))),f&&(c=c.slice()),a[u]=c}return a}},{key:"computeVersus",value:function(e,t,n,r,i,a,s){"versus"in this._cache||(this._cache.versus={});var o=this._cache.versus,l=D.Bh(e,t,o),u=l.left_small?0:1,h=l.left_small?1:0;if(l.run){var c,f=new z.VU,d=(0,k.Z)(n);try{for(d.s();!(c=d.n()).done;){var v=c.value;f.add(v,r(v))}}catch(b){d.e(b)}finally{d.f()}var _=this._selections;if(!(e in _)||!(t in _))throw new Error("invalid selection ID requested in versus mode");var w=_[e],p=_[t];if(0==w.length||0==p.length)throw new Error("non-zero entries should be present for both requested selections in versus mode");var m=[];w.forEach((function(e){m.push({index:e,cluster:u})})),p.forEach((function(e){m.push({index:e,cluster:h})})),m.sort((function(e,t){return e.index-t.index}));var Z=m.map((function(e){return e.index})),g=m.map((function(e){return e.cluster}));D.c9(f,g,i,Z,l.cached,a,s)}return{results:l.cached,left:u,right:h}}}]),e}();function W(e){for(var t=0,n=Object.entries(this._cache.results[e].raw);t<n.length;t++){var r=(0,y.Z)(n[t],2);r[0];r[1].free()}}var M=new WeakMap,O=new WeakMap,I=new WeakMap,F=new WeakMap,T=new WeakSet,U=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,x.Z)(this,e),(0,A.Z)(this,T),(0,Z.Z)(this,M,{writable:!0,value:void 0}),(0,Z.Z)(this,O,{writable:!0,value:void 0}),(0,Z.Z)(this,I,{writable:!0,value:void 0}),(0,Z.Z)(this,F,{writable:!0,value:void 0}),!(t instanceof o.H0))throw new Error("'filter' should be a CellFilteringState object");if((0,b.Z)(this,M,t),!(n.RNA instanceof l.ue))throw new Error("'norm_states.RNA' should be an RnaNormalizationState object");if(!(n.ADT instanceof u.m5))throw new Error("'norm_states.ADT' should be an AdtNormalizationState object");if(!(n.CRISPR instanceof h.$M))throw new Error("'norm_states.CRISPR' should be an CrisprNormalizationState object");(0,b.Z)(this,O,n);var a=null;null!==r&&"selections"in r&&(a=r.selections),(0,b.Z)(this,I,new N(a,i)),(0,b.Z)(this,F,{}),this.changed=!1}return(0,E.Z)(e,[{key:"free",value:function(){(0,g.Z)(this,I).free()}},{key:"fetchParameters",value:function(){return{lfc_threshold:(0,g.Z)(this,F).lfc_threshold,compute_auc:(0,g.Z)(this,F).compute_auc}}},{key:"addSelection",value:function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).copy,r=void 0===n||n;(0,S.Z)(this,T,B).call(this,e,t,r,(0,g.Z)(this,F).lfc_threshold,(0,g.Z)(this,F).compute_auc)}},{key:"removeSelection",value:function(e){(0,g.Z)(this,I).removeSelection(e)}},{key:"fetchResults",value:function(e){return(0,g.Z)(this,I).fetchResults(e)}},{key:"fetchSelectionIndices",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).copy,n=void 0===t||t;return(0,g.Z)(this,I).fetchSelectionIndices(e,{copy:n})}},{key:"fetchSelections",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.copy,n=void 0===t||t,r=e.force,i=void 0===r?null:r;return(0,g.Z)(this,I).fetchSelections({copy:n,force:i})}},{key:"compute",value:function(e){var t=e.lfc_threshold,n=e.compute_auc;if(this.changed=!1,(0,g.Z)(this,M).changed&&((0,g.Z)(this,I).free(),(0,b.Z)(this,I,new N),this.changed=!0),t!==(0,g.Z)(this,F).lfc_threshold||n!=(0,g.Z)(this,F).compute_auc){for(var r=0,i=Object.entries((0,g.Z)(this,I)._selections);r<i.length;r++){var a=(0,y.Z)(i[r],2),s=a[0],o=a[1];(0,S.Z)(this,T,B).call(this,s,o,!1,t,n)}(0,g.Z)(this,F).lfc_threshold=t,(0,g.Z)(this,F).compute_auc=n,this.changed=!0}}},{key:"computeVersus",value:function(e,t){var n=this,r=R.Mc((0,g.Z)(this,O));return(0,g.Z)(this,I).computeVersus(e,t,r,(function(e){return(0,g.Z)(n,O)[e].fetchNormalizedMatrix()}),(0,g.Z)(this,M).fetchFilteredBlock(),(0,g.Z)(this,F).lfc_threshold,(0,g.Z)(this,F).compute_auc)}}],[{key:"defaults",value:function(){return{lfc_threshold:0,compute_auc:!0}}}]),e}();function B(e,t,n,r,i){var a=this,s=R.Mc((0,g.Z)(this,O));(0,g.Z)(this,I).addSelection(e,t,s,(function(e){return(0,g.Z)(a,O)[e].fetchNormalizedMatrix()}),(0,g.Z)(this,M).fetchFilteredBlock(),n,r,i)}var j=new WeakMap,L=new WeakMap,P=new WeakMap,H=new WeakMap,Y=new WeakMap,G=new WeakMap,V=new WeakSet,K=function(){function e(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).block,r=void 0===n?null:n;(0,x.Z)(this,e),(0,A.Z)(this,V),(0,Z.Z)(this,j,{writable:!0,value:void 0}),(0,Z.Z)(this,L,{writable:!0,value:void 0}),(0,Z.Z)(this,P,{writable:!0,value:void 0}),(0,Z.Z)(this,H,{writable:!0,value:void 0}),(0,Z.Z)(this,Y,{writable:!0,value:void 0}),(0,Z.Z)(this,G,{writable:!0,value:void 0});var i,a=null,s=(0,k.Z)(t.available());try{for(s.s();!(i=s.n()).done;){var o=i.value,l=t.get(o).numberOfColumns();if(null!=a){if(l!=a)throw new Error("all matrices in 'normalized' should have the same number of columns as the length of 'groups'")}else a=l}}catch(w){s.e(w)}finally{s.f()}if((0,b.Z)(this,L,null),(0,b.Z)(this,P,null),(0,b.Z)(this,G,null),null!==r){if(r.length!=a)throw new Error("'block' should have the same length as the number of columns in each entry of 'normalized'");var u=R.XZ([r]);if(null!==u.retain){var h=new Int32Array(a);h.fill(-1),u.retain.forEach((function(e,t){h[e]=t})),(0,b.Z)(this,G,{to:h,from:u.retain});var c=new z.VU,f=z.Wf(u.retain.length);try{f.set(u.retain);var d,v=(0,k.Z)(t.available());try{for(v.s();!(d=v.n()).done;){var _=d.value;c.add(_,z.ZW(t.get(_),f))}}catch(w){v.e(w)}finally{v.f()}}catch(p){throw z.gd(c),p}finally{z.gd(f)}(0,b.Z)(this,j,c)}else(0,b.Z)(this,j,t.clone());(0,b.Z)(this,L,u.arrays[0].ids),(0,b.Z)(this,P,u.arrays[0].levels)}else(0,b.Z)(this,j,t.clone());(0,b.Z)(this,H,new N),(0,b.Z)(this,Y,U.defaults()),this.changed=!1}return(0,E.Z)(e,[{key:"free",value:function(){(0,g.Z)(this,H).free()}},{key:"fetchParameters",value:function(){return{lfc_threshold:(0,g.Z)(this,Y).lfc_threshold,compute_auc:(0,g.Z)(this,Y).compute_auc}}},{key:"fetchBlockLevels",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).copy,t=void 0===e||e,n=(0,g.Z)(this,P);return t?n.slice():n}},{key:"_peekMatrices",value:function(){return(0,g.Z)(this,j)}},{key:"_peekBlock",value:function(){return(0,g.Z)(this,L)}},{key:"setParameters",value:function(e){(0,g.Z)(this,Y).lfc_threshold===e.lfc_threshold&&(0,g.Z)(this,Y).compute_auc===e.compute_auc||this.free(),(0,b.Z)(this,Y,e)}},{key:"addSelection",value:function(e,t){var n=this,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).copy,i=void 0===r||r,a=t;if(null!==(0,g.Z)(this,G)){var s,o=[],l=(0,g.Z)(this,G).to,u=(0,k.Z)(t);try{for(u.s();!(s=u.n()).done;){var h=l[s.value];h>=0&&o.push(h)}}catch(c){u.e(c)}finally{u.f()}a=o}(0,g.Z)(this,H).addSelection(e,a,(0,g.Z)(this,j).available(),(function(e){return(0,g.Z)(n,j).get(e)}),(0,g.Z)(this,L),i,(0,g.Z)(this,Y).lfc_threshold,(0,g.Z)(this,Y).compute_auc)}},{key:"removeSelection",value:function(e){(0,g.Z)(this,H).removeSelection(e)}},{key:"fetchResults",value:function(e){return(0,g.Z)(this,H).fetchResults(e)}},{key:"fetchSelectionIndices",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).copy,n=void 0===t||t,r=(0,g.Z)(this,H).fetchSelectionIndices(e,{copy:n});return(0,S.Z)(this,V,$).call(this,r),r}},{key:"fetchSelections",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.copy,n=void 0===t||t,r=e.force,i=void 0===r?null:r,a=(0,g.Z)(this,H).fetchSelections({copy:n,force:i}),s=0,o=Object.entries(a);s<o.length;s++){var l=(0,y.Z)(o[s],2),u=(l[0],l[1]);(0,S.Z)(this,V,$).call(this,u)}return a}},{key:"computeVersus",value:function(e,t){var n=this;return(0,g.Z)(this,H).computeVersus(e,t,(0,g.Z)(this,j).available(),(function(e){return(0,g.Z)(n,j).get(e)}),(0,g.Z)(this,L),(0,g.Z)(this,Y).lfc_threshold,(0,g.Z)(this,Y).compute_auc)}}]),e}();function $(e){var t=this;null!==(0,g.Z)(this,G)&&e.forEach((function(n,r){e[r]=(0,g.Z)(t,G).from[n]}))}var X=n(1413),q=n(4165),J=n(5861),Q=n(7462),ee=n(5061),te=n(7132),ne=new WeakMap,re=function(){function e(){(0,x.Z)(this,e),(0,Z.Z)(this,ne,{writable:!0,value:void 0}),(0,b.Z)(this,ne,{})}return(0,E.Z)(e,[{key:"free",value:function(){R.Yl((0,g.Z)(this,ne).set_buffer),(0,b.Z)(this,ne,{})}},{key:"prepare",value:function(){var e=(0,J.Z)((0,q.Z)().mark((function e(t,n,r,i){var a,s,o,l,u,h,c,f,d,v,_,w,p,m,Z,b,y,x,E,A,S,z,R,D,C,N,W,M,O,I,F,T,U,B,j,L,P,H;return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(null==r?null==(a=t.rowNames())&&(n=[]):a=t.column(r),s={types:[i.toLowerCase()]},o=0,l=[[]],u=[[]],h=[[]],c=0,f=[[]],d=[[]],v=[[]],_=[new Int32Array],w=[new Int32Array],p=new Set,m=new Array(t.numberOfRows()),Z=0;Z<m.length;Z++)m[Z]=[];b=(0,k.Z)(n),e.prev=16,b.s();case 18:if((y=b.n()).done){e.next=62;break}return x=y.value,e.next=22,ee.XW(x,a,s);case 22:for(E=e.sent,A=0;A<E.length;A++)E[A].length>0&&p.add(A);return e.next=26,ee.Uy(x);case 26:return S=e.sent,z=ee.$g(E,S),e.next=30,ee.bj(x);case 30:for(R=e.sent,D=R.length,C=new Array(D),N=new Array(D),W=new Int32Array(D),M=new Int32Array(D),A=0;A<D;A++)O=R[A],C[A]=O.name,N[A]=O.description,M[A]=O.collection+o,W[A]=z[A].length;return f.push(C),d.push(N),v.push(z),_.push(W),w.push(M),e.next=44,ee.RR(x);case 44:for(I=e.sent,F=ee.wy(E,I),A=0;A<E.length;A++){for(T=F[A],U=0;U<T.length;U++)T[U]+=c;m[A].push(T)}return e.next=49,ee.is(x);case 49:for(B=e.sent,j=B.length,L=new Array(j),P=new Array(j),H=new Array(j),A=0;A<j;A++)L[A]=B[A].title,P[A]=B[A].description,H[A]=x;l.push(L),u.push(P),h.push(H),c+=D,o+=j;case 60:e.next=18;break;case 62:e.next=67;break;case 64:e.prev=64,e.t0=e.catch(16),b.e(e.t0);case 67:return e.prev=67,b.f(),e.finish(67);case 70:if((0,g.Z)(this,ne).universe=new Int32Array(p).sort(),(0,g.Z)(this,ne).sets={names:Q.NR(f),descriptions:Q.NR(d),sets:Q.NR(v),sizes:Q.NR(_),collections:Q.NR(w)},(0,g.Z)(this,ne).collections={names:Q.NR(l),descriptions:Q.NR(u),species:Q.NR(h)},n.length>0)for(Z=0;Z<m.length;Z++)m[Z]=Q.NR(m[Z]);else for(Z=0;Z<m.length;Z++)m[Z]=new Uint32Array;return(0,g.Z)(this,ne).mapping_to_sets=m,e.abrupt("return");case 76:case"end":return e.stop()}}),e,this,[[16,64,67,70]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"fetchCollectionDetails",value:function(){return(0,g.Z)(this,ne).collections}},{key:"fetchSetDetails",value:function(){return{names:(0,g.Z)(this,ne).sets.names,descriptions:(0,g.Z)(this,ne).sets.descriptions,sizes:(0,g.Z)(this,ne).sets.sizes,collections:(0,g.Z)(this,ne).sets.collections}}},{key:"fetchUniverseSize",value:function(){return(0,g.Z)(this,ne).universe.length}},{key:"computeEnrichment",value:function(e,t,n,r,i){var a=this;"delta_detected"==t&&(t="deltaDetected");var s="auc"==t?.5:0,o="min_rank"!==t,l=D.iG[n],u=r[t](e,{summary:l,copy:!1}),h=Q.Nd(u,(0,g.Z)(this,ne).universe),c=z.Y8(h,i,{largest:o}),f=[],d=function(e){var t=(0,g.Z)(a,ne).universe[e];f.push((0,g.Z)(a,ne).mapping_to_sets[t])};o?(c<s&&(c=s),h.forEach((function(e,t){e>=c&&d(t)}))):h.forEach((function(e,t){e<=c&&d(t)}));for(var v=ee.or(f),_=new Int32Array(v.length),w=new Int32Array(v.length),p=new Int32Array(v.length),m=new Int32Array(v.length),Z=0;Z<v.length;Z++){m[Z]=Z;var b=v[Z];_[Z]=b.id,w[Z]=b.count,p[Z]=(0,g.Z)(this,ne).sets.sizes[b.id]}var y=f.length,k=z.xw(w,y,p,(0,g.Z)(this,ne).universe.length);return m.sort((function(e,t){return k[e]-k[t]})),{set_ids:Q.Nd(_,m),counts:Q.Nd(w,m),pvalues:Q.Nd(k,m),num_markers:y}}},{key:"fetchFeatureSetIndices",value:function(e){return(0,g.Z)(this,ne).sets.sets[e]}},{key:"computePerCellScores",value:function(e,t,n){var r=this.fetchFeatureSetIndices(e),i=R.rS(t.numberOfRows(),"Uint8Array",(0,g.Z)(this,ne),"set_buffer");i.fill(0);var a=i.array();return r.forEach((function(e){a[e]=1})),z.Bs(t,i,{block:n})}}],[{key:"flush",value:function(){}},{key:"setDownload",value:function(e){console.warn("'FeatureSetState.setDownload' is a no-op, uses 'gesel.setReferenceDownload' and 'gesel.setGeneDownload' instead")}}]),e}();function ie(e){var t=null,n={type:"symbol",species:"human",confidence:0};if("row_names"in e){var r=e.row_names;r.confidence>n.confidence&&(n=r)}for(var i=0,a=Object.entries(e.columns);i<a.length;i++){var s=(0,y.Z)(a[i],2),o=s[0],l=s[1];l.confidence>n.confidence&&(n=l,t=o)}return{gene_id_column:t,gene_id_type:n.type.toUpperCase(),species:[n.species]}}function ae(e,t,n,r,i,a,s,o){return se.apply(this,arguments)}function se(){return(se=(0,J.Z)((0,q.Z)().mark((function e(t,n,r,i,a,s,o,l){var u,h,c,f;return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r===t.automatic&&(r||t.gene_id_column===a&&t.gene_id_type===s&&!R.xi(t.species,i))){e.next=8;break}return u=a,h=s,c=i,r&&(f=ie(l()),u=f.gene_id_column,h=f.gene_id_type,c=f.species),e.next=7,n.prepare(o(),c,u,h);case 7:return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e,t,n,r,i,a){e.automatic=t,e.species=Q.bl(n),e.gene_id_column=r,e.gene_id_type=i,e.top_markers=a}function le(e){var t=(0,X.Z)({},e);return t.species=Q.bl(t.species),t}var ue=new WeakMap,he=new WeakMap,ce=new WeakMap,fe=new WeakMap,de=new WeakMap,ve=function(){function e(t,n,i,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if((0,x.Z)(this,e),(0,Z.Z)(this,ue,{writable:!0,value:void 0}),(0,Z.Z)(this,he,{writable:!0,value:void 0}),(0,Z.Z)(this,ce,{writable:!0,value:void 0}),(0,Z.Z)(this,fe,{writable:!0,value:void 0}),(0,Z.Z)(this,de,{writable:!0,value:void 0}),!(t instanceof r.tq))throw new Error("'inputs' should be a State object from './inputs.js'");if((0,b.Z)(this,ue,t),!(n instanceof o.H0))throw new Error("'filter' should be a CellFilteringState object");if((0,b.Z)(this,he,n),!(i instanceof l.ue))throw new Error("'normalized' should be a RnaNormalizationState object from './rna_normalization.js'");(0,b.Z)(this,ce,i),(0,b.Z)(this,fe,null===s?{}:s),(0,b.Z)(this,de,new re),this.changed=!1}return(0,E.Z)(e,[{key:"free",value:function(){(0,g.Z)(this,de).free()}},{key:"valid",value:function(){return(0,g.Z)(this,ue).fetchCountMatrix().has("RNA")}},{key:"fetchCollectionDetails",value:function(){return(0,g.Z)(this,de).fetchCollectionDetails()}},{key:"fetchSetDetails",value:function(){return(0,g.Z)(this,de).fetchSetDetails()}},{key:"fetchUniverseSize",value:function(){return(0,g.Z)(this,de).fetchUniverseSize()}},{key:"computeEnrichment",value:function(e,t,n,r){return(0,g.Z)(this,de).computeEnrichment(t,n,r,e,(0,g.Z)(this,fe).top_markers)}},{key:"fetchFeatureSetIndices",value:function(e){return(0,g.Z)(this,de).fetchFeatureSetIndices(e)}},{key:"computePerCellScores",value:function(e){return(0,g.Z)(this,de).computePerCellScores(e,(0,g.Z)(this,ce).fetchNormalizedMatrix(),(0,g.Z)(this,he).fetchFilteredBlock())}},{key:"fetchPerCellScores",value:function(e,t){return this.computePerCellScores(e,t)}},{key:"fetchParameters",value:function(){return le((0,g.Z)(this,fe))}},{key:"compute",value:function(){var e=(0,J.Z)((0,q.Z)().mark((function e(t){var n,r,i,a,s,o,l=this;return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.changed=!1,(0,g.Z)(this,ue).changed&&(this.changed=!0),n=t.skip,r=t.automatic,i=t.species,a=t.gene_id_column,s=t.gene_id_type,o=t.top_markers,n!==(0,g.Z)(this,fe).skip&&(this.changed=!0),!this.valid()||n){e.next=11;break}return this.changed&&(0,b.Z)(this,fe,{}),e.next=8,ae((0,g.Z)(this,fe),(0,g.Z)(this,de),r,i,a,s,(function(){return(0,g.Z)(l,ue).fetchFeatureAnnotations().RNA}),(function(){return(0,g.Z)(l,ue).guessRnaFeatureTypes()}));case 8:e.sent&&(this.changed=!0),o!==(0,g.Z)(this,fe).top_markers&&(this.changed=!0);case 11:return oe((0,g.Z)(this,fe),r,i,a,s,o),(0,g.Z)(this,fe).skip=n,e.abrupt("return");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"defaults",value:function(){return{skip:!1,automatic:!0,species:[],gene_id_column:null,gene_id_type:"ENSEMBL",top_markers:100}}},{key:"flush",value:function(){}},{key:"setDownload",value:function(e){return re.setDownload(e)}}]),e}(),_e=new WeakMap,we=new WeakMap,pe=new WeakMap,me=new WeakMap,Ze=new WeakMap,ge=new WeakMap,be=new WeakMap,ye=new WeakSet,ke=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.normalized,i=void 0===r?null:r,a=n.block,s=void 0===a?null:a;if((0,x.Z)(this,e),(0,A.Z)(this,ye),(0,Z.Z)(this,_e,{writable:!0,value:void 0}),(0,Z.Z)(this,we,{writable:!0,value:void 0}),(0,Z.Z)(this,pe,{writable:!0,value:void 0}),(0,Z.Z)(this,me,{writable:!0,value:void 0}),(0,Z.Z)(this,Ze,{writable:!0,value:void 0}),(0,Z.Z)(this,ge,{writable:!0,value:void 0}),(0,Z.Z)(this,be,{writable:!0,value:void 0}),(0,b.Z)(this,_e,t),(0,b.Z)(this,we,null),(0,b.Z)(this,pe,null),(0,b.Z)(this,me,null),(0,b.Z)(this,Ze,null),null!==i){if(i.numberOfRows()!==(0,g.Z)(this,_e).numberOfRows())throw new Error("number of rows of 'annotations' and 'normalized' should be identical");if(null!==s){if(i.numberOfColumns()!==s.length)throw new Error("number of columns of 'normalized' should equal the length of 'block'");var o=R.XZ([s]);null!==o.retain?((0,b.Z)(this,pe,z.ZW(i,o.retain)),(0,b.Z)(this,Ze,o.retain)):(0,b.Z)(this,pe,i.clone()),(0,b.Z)(this,me,o.arrays[0].ids)}else(0,b.Z)(this,pe,i.clone())}(0,b.Z)(this,ge,ve.defaults()),(0,b.Z)(this,be,null)}return(0,E.Z)(e,[{key:"_peekMatrices",value:function(){return(0,g.Z)(this,pe)}},{key:"_peekBlock",value:function(){return(0,g.Z)(this,me)}},{key:"free",value:function(){z.gd((0,g.Z)(this,me)),z.gd((0,g.Z)(this,pe)),(0,g.Z)(this,be).free()}},{key:"setParameters",value:function(e){var t=e.automatic,n=e.species,r=e.gene_id_column,i=e.gene_id_type,a=e.top_markers;oe((0,g.Z)(this,ge),t,n,r,i,a)}},{key:"ready",value:function(){var e=(0,J.Z)((0,q.Z)().mark((function e(){var t,n,r,i,a,s,o,l,u=this;return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,g.Z)(this,ge),n=t.automatic,r=t.species,i=t.gene_id_column,a=t.gene_id_type,s=t.top_markers,o=(0,g.Z)(this,ge),(l=null==(0,g.Z)(this,be))&&((0,b.Z)(this,be,new re),o={}),e.next=6,ae(o,(0,g.Z)(this,be),n,r,i,a,(function(){return(0,g.Z)(u,_e)}),(function(){return(0,S.Z)(u,ye,xe).call(u)}));case 6:l||oe((0,g.Z)(this,ge),n,r,i,a,s);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCollectionDetails",value:function(){return(0,g.Z)(this,be).fetchCollectionDetails()}},{key:"fetchSetDetails",value:function(){return(0,g.Z)(this,be).fetchSetDetails()}},{key:"fetchUniverseSize",value:function(){return(0,g.Z)(this,be).fetchUniverseSize()}},{key:"computeEnrichment",value:function(e,t,n,r){return(0,g.Z)(this,be).computeEnrichment(t,n,r,e,(0,g.Z)(this,ge).top_markers)}},{key:"fetchFeatureSetIndices",value:function(e){return(0,g.Z)(this,be).fetchFeatureSetIndices(e)}},{key:"fetchParameters",value:function(){return le((0,g.Z)(this,ge))}},{key:"computePerCellScores",value:function(e){if(null==(0,g.Z)(this,pe))throw new Error("no normalized matrix supplied in constructor");var t=(0,g.Z)(this,be).computePerCellScores(e,(0,g.Z)(this,pe),(0,g.Z)(this,me));if(null!==(0,g.Z)(this,Ze)){var n=new Float64Array(t.scores.length);n.fill(Number.NaN),(0,g.Z)(this,Ze).forEach((function(e,r){n[e]=t.scores[r]})),t.scores=n}return t}}]),e}();function xe(){return null==(0,g.Z)(this,we)&&(0,b.Z)(this,we,R.zS((0,g.Z)(this,_e))),(0,g.Z)(this,we)}var Ee=n(4);c.Cy,f.Cy,d.Cy;_.Cy,v.Cy,w.Cy;var Ae=n(8391),Se=n(7139),ze=n(8849),Re=n(3060),De=n(7270),Ce=(n(9792),r.Cy),Ne=i.Cy,We=a.Cy,Me=s.Cy,Oe=o.Cy,Ie=l.Cy,Fe=u.Cy,Te=h.Cy,Ue="feature_selection",Be=c.Cy,je=f.Cy,Le=d.Cy,Pe="combine_embeddings",He="batch_correction",Ye=w.Cy,Ge="tsne",Ve="umap",Ke="kmeans_cluster",$e=p.Cy,Xe="choose_clustering",qe=m.Cy,Je="cell_labelling",Qe="custom_selections",et="feature_set_enrichment";function tt(){return nt.apply(this,arguments)}function nt(){return(nt=(0,J.Z)((0,q.Z)().mark((function e(){return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rt(new r.tq));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e){var t={};t[Ce]=e,t[Ne]=new i.E4(t[Ce]),t[We]=new a.fA(t[Ce]),t[Me]=new s.IW(t[Ce]);var n={RNA:t[Ne],ADT:t[We],CRISPR:t[Me]};t[Oe]=new o.H0(t[Ce],n),t[Ie]=new l.ue(t[Ne],t[Oe]),t[Fe]=new u.m5(t[We],t[Oe]),t[Te]=new h.$M(t[Me],t[Oe]),t[Ue]=new Ae.$(t[Oe],t[Ie]),t[Be]=new c.rR(t[Oe],t[Ie],t[Ue]),t[je]=new f.Ru(t[Oe],t[Fe]),t[Le]=new d.zR(t[Oe],t[Te]);var r={RNA:t[Be],ADT:t[je],CRISPR:t[Le]};t[Pe]=new v.BE(r),t[He]=new _.N_(t[Oe],t[Pe]),t[Ye]=new w.Xr(t[He]),t[Ge]=new Re.T(t[Ye]),t[Ve]=new De.D(t[Ye]),t[Ke]=new ze.d(t[He]),t[$e]=new p.Xs(t[Ye]),t[Xe]=new Se.c(t[$e],t[Ke]);var Z={RNA:t[Ie],ADT:t[Fe],CRISPR:t[Te]};return t[qe]=new m.UL(t[Oe],Z,t[Xe]),t[Je]=new Ee.ES(t[Ce],t[qe]),t[et]=new ve(t[Ce],t[Oe],t[Ie]),t[Qe]=new U(t[Oe],Z),Promise.all([t[Ge].ready(),t[Ve].ready()]).then((function(e){return t}))}n(1408);var it=n(6737);it.yh.prototype._bioconductor_LENGTH=function(){return this.length},it.do.prototype._bioconductor_LENGTH=function(){return this.length},it.lt.prototype._bioconductor_LENGTH=function(){return this.length};n(714);n(8109);n(5587);var at=n(4071);function st(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.numberOfThreads,n=void 0===t?1:t,r=e.localFile,i=void 0!==r&&r,a=z.j2({numberOfThreads:n,localFile:i});return at.yc.localFile=i,a.then((function(e){return null}))}},7132:function(e,t,n){n.d(t,{nN:function(){return le},zD:function(){return g.z},CM:function(){return at},EQ:function(){return bt},cO:function(){return yt},bw:function(){return m.bw},Qr:function(){return m.Qr}});var r=n(2152),i=n(7762),a=n(4165),s=n(5861),o=n(1413),l=n(5671),u=n(3144),h=n(101),c=n(2346),f=n(3889),d=n(2793),v=n(8916),_=n(3324),w=n(5831),p=n(7462),m=n(7173),Z=n(3121),g=n(6016);function b(e,t){var n=[];if("X"in e.children&&n.push("X"),"layers"in e.children){var r=e.open("layers");if(!(r instanceof w.Fv))throw new Error("expected a 'layers' group in a H5AD file");for(var i=0,a=Object.keys(r.children);i<a.length;i++){var s=a[i];n.push("layers/"+s)}}if(0==n.length)throw new Error("failed to find any assay in the H5AD file");var o=w.N6(t,n[0]);return{names:n,rows:o.rows,columns:o.columns}}function y(e){for(var t={},n=0,r=Object.entries(e.children);n<r.length;n++){var i=(0,_.Z)(r[n],2),a=i[0],s=i[1];if("DataSet"==s){var o=e.open(a,{load:!0});t[a]=o.values}else if("Group"==s){var l=e.open(a);if("categories"in l.children&&"codes"in l.children){var u=m.vp(l,"categories"),h=l.open("codes",{load:!0}).values;t[a]=p.Nd(u,h)}}}if("__categories"in e.children&&"Group"==e.children.__categories)for(var c=e.open("__categories"),f=0,d=Object.entries(c.children);f<d.length;f++){var v=(0,_.Z)(d[f],2),w=v[0];v[1];if(w in t){var Z=m.vp(c,w);t[w]=p.Nd(Z,t[w])}}if(0==Object.keys(t).length)return null;var g=null;return"_index"in t&&(g=t._index,delete t._index),new p.NE(t,{rowNames:g})}function k(e){return"var"in e.children&&"Group"==e.children.var?y(e.open("var")):null}function x(e){return"obs"in e.children&&"Group"==e.children.obs?y(e.open("obs")):null}var E=new WeakMap,A=new WeakMap,S=new WeakMap,z=new WeakMap,R=new WeakMap,D=new WeakMap,C=new WeakMap,N=new WeakMap,W=new WeakSet,M=new WeakSet,O=new WeakSet,I=new WeakSet,F=new WeakSet,T=new WeakSet,U=new WeakSet,B=function(){function e(t){(0,l.Z)(this,e),(0,h.Z)(this,U),(0,h.Z)(this,T),(0,h.Z)(this,F),(0,h.Z)(this,I),(0,h.Z)(this,O),(0,h.Z)(this,M),(0,h.Z)(this,W),(0,c.Z)(this,E,{writable:!0,value:void 0}),(0,c.Z)(this,A,{writable:!0,value:void 0}),(0,c.Z)(this,S,{writable:!0,value:void 0}),(0,c.Z)(this,z,{writable:!0,value:void 0}),(0,c.Z)(this,R,{writable:!0,value:void 0}),(0,c.Z)(this,D,{writable:!0,value:void 0}),(0,c.Z)(this,C,{writable:!0,value:void 0}),(0,c.Z)(this,N,{writable:!0,value:void 0}),t instanceof g.z?(0,d.Z)(this,E,t):(0,d.Z)(this,E,new g.z(t)),(0,d.Z)(this,N,e.defaults()),this.clear()}return(0,u.Z)(e,[{key:"options",value:function(){return(0,o.Z)({},(0,v.Z)(this,N))}},{key:"setOptions",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=(0,_.Z)(n[t],2),i=r[0],a=r[1];(0,v.Z)(this,N)[i]=a}}},{key:"clear",value:function(){"function"==typeof(0,v.Z)(this,S)&&(0,v.Z)(this,S).call(this),(0,d.Z)(this,S,null),(0,d.Z)(this,A,null),(0,d.Z)(this,z,null),(0,d.Z)(this,R,null),(0,d.Z)(this,D,null),(0,d.Z)(this,C,null)}},{key:"abbreviate",value:function(){return(0,f.Z)(this,W,j).call(this,(function(e){return{name:e.name(),size:e.size()}}))}},{key:"summary",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,f.Z)(this,I,H).call(this),(0,f.Z)(this,F,Y).call(this),(0,f.Z)(this,O,P).call(this);var n={all_features:(0,v.Z)(this,R),cells:(0,v.Z)(this,D),all_assay_names:(0,v.Z)(this,C).names};return t||this.clear(),n}},{key:"previewPrimaryIds",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,f.Z)(this,I,H).call(this);var n=Z.h8((0,v.Z)(this,R),(0,v.Z)(this,N).featureTypeColumnName,(0,f.Z)(this,T,G).call(this),"RNA",(0,f.Z)(this,U,V).call(this));return t||this.clear(),n}},{key:"load",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,f.Z)(this,I,H).call(this),(0,f.Z)(this,F,Y).call(this),(0,f.Z)(this,O,P).call(this);var n=(0,v.Z)(this,N).countMatrixName;null==n&&(n=(0,v.Z)(this,C).names[0]);var r=w.EF((0,v.Z)(this,A),n),i=Z.Bs(r,(0,v.Z)(this,R),(0,v.Z)(this,N).featureTypeColumnName,(0,f.Z)(this,T,G).call(this),"RNA");return i.cells=(0,v.Z)(this,D),i.primary_ids=Z.P2(i.features,(0,f.Z)(this,U,V).call(this)),t||this.clear(),i}},{key:"serialize",value:function(){return(0,f.Z)(this,W,j).call(this,(function(e){return e}))}}],[{key:"defaults",value:function(){return{countMatrixName:null,featureTypeColumnName:null,featureTypeRnaName:"Gene Expression",featureTypeAdtName:"Antibody Capture",featureTypeCrisprName:"CRISPR Guide Capture",primaryRnaFeatureIdColumn:null,primaryAdtFeatureIdColumn:null,primaryCrisprFeatureIdColumn:null}}},{key:"format",value:function(){return"H5AD"}},{key:"unserialize",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(n,r){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1==n.length&&"h5"==n[0].type){t.next=2;break}throw new Error("expected exactly one file of type 'h5' for H5AD unserialization");case 2:return t.abrupt("return",new e(n[0].file,r));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function j(e){return{files:[{type:"h5",file:e((0,v.Z)(this,E))}],options:this.options()}}function L(){if(null==(0,v.Z)(this,A)){var e=w.$H((0,v.Z)(this,E).content());(0,d.Z)(this,A,e.path),(0,d.Z)(this,S,e.flush),(0,d.Z)(this,z,new w.pT((0,v.Z)(this,A)))}}function P(){null===(0,v.Z)(this,C)&&((0,f.Z)(this,M,L).call(this),(0,d.Z)(this,C,b((0,v.Z)(this,z),(0,v.Z)(this,A))))}function H(){if(null===(0,v.Z)(this,R)){(0,f.Z)(this,M,L).call(this);var e=k((0,v.Z)(this,z));null==e&&((0,f.Z)(this,O,P).call(this),e=new p.NE({},{numberOfRows:(0,v.Z)(this,C).rows})),(0,d.Z)(this,R,e)}}function Y(){if(null===(0,v.Z)(this,D)){(0,f.Z)(this,M,L).call(this);var e=x((0,v.Z)(this,z));null===e&&((0,f.Z)(this,O,P).call(this),e=new p.NE({},{numberOfRows:(0,v.Z)(this,C).columns})),(0,d.Z)(this,D,e)}}function G(){return{RNA:(0,v.Z)(this,N).featureTypeRnaName,ADT:(0,v.Z)(this,N).featureTypeAdtName,CRISPR:(0,v.Z)(this,N).featureTypeCrisprName}}function V(){return{RNA:(0,v.Z)(this,N).primaryRnaFeatureIdColumn,ADT:(0,v.Z)(this,N).primaryAdtFeatureIdColumn,CRISPR:(0,v.Z)(this,N).primaryCrisprFeatureIdColumn}}var K=new WeakMap,$=new WeakMap,X=new WeakMap,q=new WeakMap,J=new WeakMap,Q=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=new WeakSet,ie=new WeakSet,ae=new WeakSet,se=new WeakSet,oe=new WeakSet,le=function(){function e(t){(0,l.Z)(this,e),(0,h.Z)(this,oe),(0,h.Z)(this,se),(0,h.Z)(this,ae),(0,h.Z)(this,ie),(0,h.Z)(this,re),(0,c.Z)(this,K,{writable:!0,value:void 0}),(0,c.Z)(this,$,{writable:!0,value:void 0}),(0,c.Z)(this,X,{writable:!0,value:void 0}),(0,c.Z)(this,q,{writable:!0,value:void 0}),(0,c.Z)(this,J,{writable:!0,value:void 0}),(0,c.Z)(this,Q,{writable:!0,value:void 0}),(0,c.Z)(this,ee,{writable:!0,value:void 0}),(0,c.Z)(this,te,{writable:!0,value:void 0}),(0,c.Z)(this,ne,{writable:!0,value:void 0}),t instanceof g.z?(0,d.Z)(this,K,t):(0,d.Z)(this,K,new g.z(t)),(0,d.Z)(this,ne,e.defaults()),this.clear()}return(0,u.Z)(e,[{key:"options",value:function(){return(0,o.Z)({},(0,v.Z)(this,ne))}},{key:"setOptions",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=(0,_.Z)(n[t],2),i=r[0],a=r[1];(0,v.Z)(this,ne)[i]="reducedDimensionNames"==i?p.bl(a):a}}},{key:"clear",value:function(){"function"==typeof(0,v.Z)(this,X)&&(0,v.Z)(this,X).call(this),(0,d.Z)(this,X,null),(0,d.Z)(this,$,null),(0,d.Z)(this,q,null),(0,d.Z)(this,J,null),(0,d.Z)(this,Q,null),(0,d.Z)(this,ee,null),(0,d.Z)(this,te,null)}},{key:"summary",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,f.Z)(this,ae,ce).call(this),(0,f.Z)(this,se,fe).call(this),(0,f.Z)(this,ie,he).call(this),(0,f.Z)(this,oe,de).call(this);var n={all_features:(0,v.Z)(this,J),cells:(0,v.Z)(this,Q),all_assay_names:(0,v.Z)(this,ee).names,reduced_dimension_names:(0,v.Z)(this,te).names};return t||this.clear(),n}},{key:"load",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,f.Z)(this,ae,ce).call(this),(0,f.Z)(this,se,fe).call(this),(0,f.Z)(this,ie,he).call(this),(0,f.Z)(this,oe,de).call(this);var n=(0,v.Z)(this,ne).primaryMatrixName;null==n&&(n=(0,v.Z)(this,ee).names[0]);var r=w.EF((0,v.Z)(this,$),n,{forceInteger:!(0,v.Z)(this,ne).isPrimaryNormalized}),a=Z.Bs(r,(0,v.Z)(this,J),(0,v.Z)(this,ne).featureTypeColumnName,null,"");if(a.cells=(0,v.Z)(this,Q),delete a.row_ids,!(0,v.Z)(this,ne).isPrimaryNormalized){var s,o=(0,i.Z)(a.matrix.available());try{for(o.s();!(s=o.n()).done;){var l=s.value,u=a.matrix.get(l);a.matrix.add(l,w.gk(u,{allowZeros:!0}))}}catch(S){o.e(S)}finally{o.f()}}var h=(0,v.Z)(this,ne).reducedDimensionNames;null==h&&(h=(0,v.Z)(this,te).names);var c={};if(h.length){var d,_=(0,v.Z)(this,q).open("obsm"),p=(0,i.Z)(h);try{for(p.s();!(d=p.n()).done;){for(var m=d.value,g=_.open(m,{load:!0}),b=g.shape,y=b[1],k=b[0],x=[],E=0;E<y;E++)x.push(new Float64Array(k));for(var A=0;A<k;A++)for(E=0;E<y;E++)x[E][A]=g.values[A*y+E];c[m]=x}}catch(S){p.e(S)}finally{p.f()}}return a.reduced_dimensions=c,t||this.clear(),a}}],[{key:"defaults",value:function(){return{primaryMatrixName:null,isPrimaryNormalized:!0,featureTypeColumnName:null,reducedDimensionNames:null}}}]),e}();function ue(){if(null==(0,v.Z)(this,$)){var e=w.$H((0,v.Z)(this,K).content());(0,d.Z)(this,$,e.path),(0,d.Z)(this,X,e.flush),(0,d.Z)(this,q,new w.pT((0,v.Z)(this,$)))}}function he(){null===(0,v.Z)(this,ee)&&((0,f.Z)(this,re,ue).call(this),(0,d.Z)(this,ee,b((0,v.Z)(this,q),(0,v.Z)(this,$))))}function ce(){if(null===(0,v.Z)(this,J)){(0,f.Z)(this,re,ue).call(this);var e=k((0,v.Z)(this,q));null==e&&((0,f.Z)(this,ie,he).call(this),e=new p.NE({},{numberOfRows:(0,v.Z)(this,ee).rows})),(0,d.Z)(this,J,e)}}function fe(){if(null===(0,v.Z)(this,Q)){(0,f.Z)(this,re,ue).call(this);var e=x((0,v.Z)(this,q));null===e&&((0,f.Z)(this,ie,he).call(this),e=new p.NE({},{numberOfRows:(0,v.Z)(this,ee).columns})),(0,d.Z)(this,Q,e)}}function de(){if(null===(0,v.Z)(this,te)){(0,f.Z)(this,re,ue).call(this);var e=[];if("obsm"in(0,v.Z)(this,q).children&&"Group"==(0,v.Z)(this,q).children.obsm)for(var t=(0,v.Z)(this,q).open("obsm"),n=0,r=Object.entries(t.children);n<r.length;n++){var i=(0,_.Z)(r[n],2),a=i[0];"DataSet"==i[1]&&e.push(a)}(0,d.Z)(this,te,{names:e})}}var ve=n(7355);function _e(e){var t,n,r=e.findAttribute("names");if(r<0)return null;try{n=(t=e.attribute(r)).values()}catch(i){throw new Error("failed to load listData names; "+i.message)}finally{w.gd(t)}if(n.length!=e.length())throw new Error("expected names to have same length as listData");return n}var we={DFrame:"S4Vectors"};function pe(e){Ze(e,we,"DFrame");var t,n,r={},i=[];try{if(!((t=e.attribute("listData"))instanceof w.SV))throw new Error("listData slot should be a generic list");if(null==(i=_e(t)))throw new Error("expected the listData list to be named");for(var a=function(){var e;try{if((e=t.load(s))instanceof w.qu&&!(e instanceof w.SV)){var n,a,o=e.values();if(e.findAttribute("class")>=0)try{if((n=e.attribute("class")).values().indexOf("factor")>=0&&e.findAttribute("levels")>=0){a=e.attribute("levels");var l=o.slice();l.forEach((function(e,t){l[t]=e-1})),o=p.Nd(a.values(),l)}}finally{w.gd(n),w.gd(a)}r[i[s]]=o}else e instanceof w.BA&&me(e,we)&&(r[i[s]]=pe(e))}finally{w.gd(e)}},s=0;s<t.length();s++)a()}catch(c){throw new Error("failed to retrieve data from DataFrame's listData; "+c.message)}finally{w.gd(t)}var o=null;try{(n=e.attribute("rownames"))instanceof w.II&&(o=n.values())}catch(c){throw new Error("failed to retrieve row names from DataFrame; "+c.message)}finally{w.gd(n)}var l,u=null;if(0==i.length&&null==o)try{if(!((l=e.attribute("nrows"))instanceof w.D6))throw new Error("expected an integer vector as the 'nrows' slot");var h=l.values();if(1!=h.length)throw new Error("expected an integer vector of length 1 as the 'nrows' slot");u=h[0]}catch(c){throw new Error("failed to retrieve nrows from DataFrame; "+c.message)}finally{w.gd(l)}return new p.NE(r,{columnOrder:i,rowNames:o,numberOfRows:u})}function me(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var i=(0,_.Z)(r[n],2),a=i[0],s=i[1];if(e.className()==a&&e.packageName()==s)return!0}return!1}function Ze(e,t,n){if(!(e instanceof w.BA))throw new Error("expected an S4 object as the data frame");if(!me(e,t))throw new Error("object is not a "+n+" or one of its recognized subclasses")}function ge(e){var t,n=e.findAttribute("NAMES");if(n<0)return null;var r=null;try{(t=e.attribute(n))instanceof w.II&&(r=t.values())}catch(i){throw new Error("failed to extract NAMES; "+i.message)}finally{w.gd(t)}return r}function be(e){var t,n=null,r=e.findAttribute("rowRanges");if(r<0){var i;try{t=pe(i=e.attribute("elementMetadata"))}catch(h){throw new Error("failed to extract features from the rowData; "+h.message)}finally{w.gd(i)}n=ge(e)}else{var a;try{var s=(a=e.attribute(r)).attribute("elementMetadata");try{t=pe(s)}catch(h){throw new Error("failed to extract mcols from the rowRanges; "+h.message)}finally{w.gd(s)}var o,l,u=a.findAttribute("partitioning");if(u<0)try{n=ge(o=a.attribute("ranges"))}catch(h){throw new Error("failed to extract names from the rowRanges; "+h.message)}finally{w.gd(o)}else try{n=ge(l=a.attribute(u))}catch(h){throw new Error("failed to extract names from the rowRanges; "+h.message)}finally{w.gd(l)}}catch(h){throw new Error("failed to extract features from the rowRanges; "+h.message)}finally{w.gd(a)}}return null!==n&&t.$setRowNames(n),t}function ye(e){var t,n,r,i;try{null==(t=_e(i=(r=(n=e.attribute("assays")).attribute("data")).attribute("listData")))&&(t=new Array(i.length())).fill(null)}catch(a){throw new Error("failed to extract assay data; "+a.message)}finally{w.gd(n),w.gd(i),w.gd(r)}return t}function ke(e,t,n){var r,i,a,s;try{s=(a=(i=e.attribute("assays")).attribute("data")).attribute("listData");var o,l=null;if("string"==typeof t){var u=_e(s);if(null!==t&&null!=u)for(var h=0;h<u.length;h++)if(u[h]==t){l=h;break}if(null==l)throw new Error("no assay named '"+t+"'")}else{if(t>=s.length())throw new Error("assay index "+String(t)+" out of range");l=t}try{o=s.load(l),r=w.Bp(o,{forceInteger:n})}catch(c){throw new Error("failed to initialize sparse matrix from assay; "+c.message)}finally{w.gd(o)}}catch(c){throw new Error("failed to extract assay data; "+c.message)}finally{w.gd(i),w.gd(s),w.gd(a)}return r}function xe(e){var t,n,r,i,a,s,o={handles:{},order:[]},l=e.findAttribute("int_colData");if(l<0)return o;try{var u=(t=e.attribute(l)).findAttribute("listData");if(u<0)return o;var h=(n=t.attribute(u)).findAttribute("names");if(h<0)return o;var c=(r=n.attribute(h)).values().indexOf("altExps");if(c<0)return o;var f=(i=n.load(c)).findAttribute("listData");if(f<0)return o;var d=(a=i.attribute(f)).findAttribute("names");if(d<0)return o;for(var v=(s=a.attribute(d)).values(),_=0;_<v.length;_++){var p=void 0;try{var m=(p=a.load(_)).attribute("se");o.handles[v[_]]=m,o.order.push(v[_]),Ee(m)}catch(y){throw new Error("failed to load alternative Experiment '"+v[_]+"'; "+y.message)}finally{w.gd(p)}}}catch(y){for(var Z=0,g=Object.values(o.handles);Z<g.length;Z++){var b=g[Z];w.gd(b)}throw y}finally{w.gd(s),w.gd(a),w.gd(r),w.gd(n),w.gd(t)}return o}function Ee(e){Ze(e,{SummarizedExperiment:"SummarizedExperiment",RangedSummarizedExperiment:"SummarizedExperiment",SingleCellExperiment:"SingleCellExperiment",SpatialExperiment:"SpatialExperiment"},"SummarizedExperiment")}var Ae="",Se=new WeakMap,ze=new WeakMap,Re=new WeakMap,De=new WeakMap,Ce=new WeakMap,Ne=new WeakMap,We=new WeakMap,Me=new WeakMap,Oe=new WeakSet,Ie=new WeakSet,Fe=new WeakSet,Te=new WeakSet,Ue=new WeakSet,Be=function(){function e(t){(0,l.Z)(this,e),(0,h.Z)(this,Ue),(0,h.Z)(this,Te),(0,h.Z)(this,Fe),(0,h.Z)(this,Ie),(0,h.Z)(this,Oe),(0,c.Z)(this,Se,{writable:!0,value:void 0}),(0,c.Z)(this,ze,{writable:!0,value:void 0}),(0,c.Z)(this,Re,{writable:!0,value:void 0}),(0,c.Z)(this,De,{writable:!0,value:void 0}),(0,c.Z)(this,Ce,{writable:!0,value:void 0}),(0,c.Z)(this,Ne,{writable:!0,value:void 0}),(0,c.Z)(this,We,{writable:!0,value:void 0}),(0,c.Z)(this,Me,{writable:!0,value:void 0}),t instanceof g.z?(0,d.Z)(this,Se,t):(0,d.Z)(this,Se,new g.z(t)),(0,d.Z)(this,Me,e.defaults()),this.clear()}return(0,u.Z)(e,[{key:"options",value:function(){return(0,o.Z)({},(0,v.Z)(this,Me))}},{key:"setOptions",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=(0,_.Z)(n[t],2),i=r[0],a=r[1];(0,v.Z)(this,Me)[i]=a}}},{key:"clear",value:function(){if(w.gd((0,v.Z)(this,Re)),"undefined"!=typeof(0,v.Z)(this,De)&&null!==(0,v.Z)(this,De))for(var e=0,t=Object.values((0,v.Z)(this,De));e<t.length;e++){var n=t[e];w.gd(n)}w.gd((0,v.Z)(this,ze)),(0,d.Z)(this,Re,null),(0,d.Z)(this,De,null),(0,d.Z)(this,ze,null),(0,d.Z)(this,Ne,null),(0,d.Z)(this,We,null)}},{key:"abbreviate",value:function(){return(0,f.Z)(this,Oe,je).call(this,(function(e){return{name:e.name(),size:e.size()}}))}},{key:"summary",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,f.Z)(this,Ie,Le).call(this),(0,f.Z)(this,Fe,Pe).call(this),(0,f.Z)(this,Te,He).call(this);var n={};n[Ae]=ye((0,v.Z)(this,Re));for(var r=0,i=Object.entries((0,v.Z)(this,De));r<i.length;r++){var a=(0,_.Z)(i[r],2),s=a[0],o=a[1];try{n[s]=ye(o)}catch(u){console.warn("failed to extract features for alternative Experiment '"+s+"'; "+u.message)}}var l={modality_features:(0,v.Z)(this,Ne),cells:(0,v.Z)(this,We),modality_assay_names:n};return t||this.clear(),l}},{key:"previewPrimaryIds",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,f.Z)(this,Fe,Pe).call(this);var n={RNA:(0,v.Z)(this,Me).rnaExperiment,ADT:(0,v.Z)(this,Me).adtExperiment,CRISPR:(0,v.Z)(this,Me).crisprExperiment},r=Z.it((0,v.Z)(this,Ne),n,(0,f.Z)(this,Ue,Ye).call(this));return t||this.clear(),r}},{key:"load",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,f.Z)(this,Ie,Le).call(this),(0,f.Z)(this,Fe,Pe).call(this),(0,f.Z)(this,Te,He).call(this);var n={matrix:new w.VU,row_ids:{},features:{},cells:(0,v.Z)(this,We)},r={RNA:{exp:(0,v.Z)(this,Me).rnaExperiment,assay:(0,v.Z)(this,Me).rnaCountAssay},ADT:{exp:(0,v.Z)(this,Me).adtExperiment,assay:(0,v.Z)(this,Me).adtCountAssay},CRISPR:{exp:(0,v.Z)(this,Me).crisprExperiment,assay:(0,v.Z)(this,Me).crisprCountAssay}};try{for(var i=0,a=Object.entries(r);i<a.length;i++){var s=(0,_.Z)(a[i],2),o=s[0],l=s[1];if(null!==l.exp){var u=void 0,h=l.exp;if("string"==typeof l.exp)if(""===l.exp)u=(0,v.Z)(this,Re);else{if(!(l.exp in(0,v.Z)(this,De)))continue;u=(0,v.Z)(this,De)[l.exp]}else{if(l.exp>=(0,v.Z)(this,Ce).length)continue;h=(0,v.Z)(this,Ce)[l.exp],u=(0,v.Z)(this,De)[h]}var c=ke(u,l.assay,!0);n.matrix.add(o,c.matrix);var d=c.row_ids;n.row_ids[o]=d,n.features[o]=p.Nd((0,v.Z)(this,Ne)[h],d)}}n.primary_ids=Z.P2(n.features,(0,f.Z)(this,Ue,Ye).call(this))}catch(m){throw w.gd(n.matrix),m}return t||this.clear(),n}},{key:"serialize",value:function(){return(0,f.Z)(this,Oe,je).call(this,(function(e){return e}))}}],[{key:"defaults",value:function(){return{rnaCountAssay:0,adtCountAssay:0,crisprCountAssay:0,rnaExperiment:"",adtExperiment:"Antibody Capture",crisprExperiment:"CRISPR Guide Capture",primaryRnaFeatureIdColumn:null,primaryAdtFeatureIdColumn:null,primaryCrisprFeatureIdColumn:null}}},{key:"format",value:function(){return"SummarizedExperiment"}},{key:"unserialize",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(n,r){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1==n.length&&"rds"==n[0].type){t.next=2;break}throw new Error("expected exactly one file of type 'rds' for SummarizedExperiment unserialization");case 2:return t.abrupt("return",new e(n[0].file,r));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function je(e){return{files:[{type:"rds",file:e((0,v.Z)(this,Se))}],options:this.options()}}function Le(){if(null===(0,v.Z)(this,ze)){(0,d.Z)(this,ze,w.p$((0,v.Z)(this,Se).content())),(0,d.Z)(this,Re,(0,v.Z)(this,ze).value());try{Ee((0,v.Z)(this,Re));var e=xe((0,v.Z)(this,Re)),t=e.handles,n=e.order;(0,d.Z)(this,De,t),(0,d.Z)(this,Ce,n)}catch(r){throw(0,v.Z)(this,Re).free(),(0,v.Z)(this,ze).free(),r}}}function Pe(){if(null===(0,v.Z)(this,Ne)){(0,f.Z)(this,Ie,Le).call(this),(0,d.Z)(this,Ne,{}),(0,v.Z)(this,Ne)[Ae]=be((0,v.Z)(this,Re));for(var e=0,t=Object.entries((0,v.Z)(this,De));e<t.length;e++){var n=(0,_.Z)(t[e],2),r=n[0],i=n[1];try{(0,v.Z)(this,Ne)[r]=be(i)}catch(a){console.warn("failed to extract features for alternative Experiment '"+r+"'; "+a.message)}}}}function He(){if(null===(0,v.Z)(this,We)){(0,f.Z)(this,Ie,Le).call(this);var e=(0,v.Z)(this,Re).attribute("colData");try{(0,d.Z)(this,We,pe(e))}catch(t){throw new Error("failed to extract colData from a SummarizedExperiment; "+t.message)}finally{w.gd(e)}}}function Ye(){return{RNA:(0,v.Z)(this,Me).primaryRnaFeatureIdColumn,ADT:(0,v.Z)(this,Me).primaryAdtFeatureIdColumn,CRISPR:(0,v.Z)(this,Me).primaryCrisprFeatureIdColumn}}var Ge=new WeakMap,Ve=new WeakMap,Ke=new WeakMap,$e=new WeakMap,Xe=new WeakMap,qe=new WeakMap,Je=new WeakMap,Qe=new WeakMap,et=new WeakMap,tt=new WeakMap,nt=new WeakSet,rt=new WeakSet,it=new WeakSet,at=function(){function e(t){(0,l.Z)(this,e),(0,h.Z)(this,it),(0,h.Z)(this,rt),(0,h.Z)(this,nt),(0,c.Z)(this,Ge,{writable:!0,value:void 0}),(0,c.Z)(this,Ve,{writable:!0,value:void 0}),(0,c.Z)(this,Ke,{writable:!0,value:void 0}),(0,c.Z)(this,$e,{writable:!0,value:void 0}),(0,c.Z)(this,Xe,{writable:!0,value:void 0}),(0,c.Z)(this,qe,{writable:!0,value:void 0}),(0,c.Z)(this,Je,{writable:!0,value:void 0}),(0,c.Z)(this,Qe,{writable:!0,value:void 0}),(0,c.Z)(this,et,{writable:!0,value:void 0}),(0,c.Z)(this,tt,{writable:!0,value:void 0}),t instanceof g.z?(0,d.Z)(this,Ge,t):(0,d.Z)(this,Ge,new g.z(t)),(0,d.Z)(this,tt,e.defaults()),this.clear()}return(0,u.Z)(e,[{key:"options",value:function(){return(0,o.Z)({},(0,v.Z)(this,tt))}},{key:"setOptions",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=(0,_.Z)(n[t],2),i=r[0],a=r[1];(0,v.Z)(this,tt)[i]=p.bl(a)}}},{key:"clear",value:function(){if(w.gd((0,v.Z)(this,Ke)),"undefined"!=typeof(0,v.Z)(this,$e)&&null!==(0,v.Z)(this,$e))for(var e=0,t=Object.values((0,v.Z)(this,$e));e<t.length;e++){var n=t[e];w.gd(n)}if("undefined"!=typeof(0,v.Z)(this,Qe)&&null!==(0,v.Z)(this,Qe))for(var r=0,i=Object.values((0,v.Z)(this,Qe));r<i.length;r++){var a=i[r];w.gd(a.handle)}w.gd((0,v.Z)(this,Ve)),(0,d.Z)(this,Ke,null),(0,d.Z)(this,$e,null),(0,d.Z)(this,Ve,null),(0,d.Z)(this,qe,null),(0,d.Z)(this,Je,null)}},{key:"summary",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,f.Z)(this,nt,st).call(this),(0,f.Z)(this,rt,ot).call(this),(0,f.Z)(this,it,lt).call(this);var n={};n[Ae]=ye((0,v.Z)(this,Ke));for(var r=0,i=Object.entries((0,v.Z)(this,$e));r<i.length;r++){var a=(0,_.Z)(i[r],2),s=a[0],o=a[1];try{n[s]=ye(o)}catch(u){console.warn("failed to extract features for alternative Experiment '"+s+"'; "+u.message)}}var l={modality_features:(0,v.Z)(this,qe),cells:(0,v.Z)(this,Je),modality_assay_names:n,reduced_dimension_names:(0,v.Z)(this,et)};return t||this.clear(),l}},{key:"load",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,f.Z)(this,nt,st).call(this),(0,f.Z)(this,rt,ot).call(this),(0,f.Z)(this,it,lt).call(this);var n={matrix:new w.VU,features:{},cells:(0,v.Z)(this,Je),reduced_dimensions:{}},r=(0,v.Z)(this,tt).reducedDimensionNames;null==r&&(r=(0,v.Z)(this,et));var a,s=(0,i.Z)(r);try{for(s.s();!(a=s.n()).done;){for(var o=a.value,l=(0,v.Z)(this,Qe)[o],u=[],h=l.dimensions,c=l.handle.values(),d=0;d<h[1];d++)u.push(c.slice(d*h[0],(d+1)*h[0]));n.reduced_dimensions[o]=u}}catch(A){s.e(A)}finally{s.f()}try{for(var m=0,Z=Object.entries((0,v.Z)(this,qe));m<Z.length;m++){var g=(0,_.Z)(Z[m],2),b=g[0],y=(g[1],(0,v.Z)(this,tt).primaryAssay);if("object"==typeof y){if(!(b in y))continue;y=y[b]}var k=(0,v.Z)(this,tt).isPrimaryNormalized;"object"==typeof k&&(k=!(b in k)||k[b]);var x=ke(""===b?(0,v.Z)(this,Ke):(0,v.Z)(this,$e)[b],y,!k);if(n.matrix.add(b,x.matrix),k)n.features[b]=(0,v.Z)(this,qe)[b];else{var E=w.gk(x.matrix,{allowZeros:!0});n.matrix.add(b,E),n.features[b]=p.Nd((0,v.Z)(this,qe)[b],x.row_ids)}}}catch(S){throw w.gd(n.matrix),S}return t||this.clear(),n}}],[{key:"defaults",value:function(){return{primaryAssay:0,isPrimaryNormalized:!0,reducedDimensionNames:null}}}]),e}();function st(){if(null===(0,v.Z)(this,Ve)){(0,d.Z)(this,Ve,w.p$((0,v.Z)(this,Ge).content())),(0,d.Z)(this,Ke,(0,v.Z)(this,Ve).value());try{Ee((0,v.Z)(this,Ke));var e=xe((0,v.Z)(this,Ke)),t=e.handles,n=e.order;(0,d.Z)(this,$e,t),(0,d.Z)(this,Xe,n);var r=function(e){var t,n,r,i,a,s,o={handles:{},order:[]},l=e.findAttribute("int_colData");if(l<0)return o;try{var u=(t=e.attribute(l)).findAttribute("listData");if(u<0)return o;var h=(n=t.attribute(u)).findAttribute("names");if(h<0)return o;var c=(r=n.attribute(h)).values().indexOf("reducedDims");if(c<0)return o;var f=(i=n.load(c)).findAttribute("listData");if(f<0)return o;var d=(a=i.attribute(f)).findAttribute("names");if(d<0)return o;for(var v=(s=a.attribute(d)).values(),_=0;_<v.length;_++){var p=void 0;try{p=a.load(_);var m=!1;if("double"==p.type()&&p.findAttribute("dim")>=0){var Z=p.attribute("dim");2==Z.length()&&(o.handles[v[_]]={handle:p,dimensions:Z.values()},o.order.push(v[_]),m=!0)}m||w.gd(p)}catch(k){throw new Error("failed to load reduced dimension '"+v[_]+"'; "+k.message)}}}catch(k){for(var g=0,b=Object.values(o.handles);g<b.length;g++){var y=b[g];w.gd(y.handle)}throw k}finally{w.gd(s),w.gd(a),w.gd(r),w.gd(n),w.gd(t)}return o}((0,v.Z)(this,Ke)),i=r.handles,a=r.order;(0,d.Z)(this,Qe,i),(0,d.Z)(this,et,a)}catch(s){throw(0,v.Z)(this,Ke).free(),(0,v.Z)(this,Ve).free(),s}}}function ot(){if(null===(0,v.Z)(this,qe)){(0,f.Z)(this,nt,st).call(this),(0,d.Z)(this,qe,{}),(0,v.Z)(this,qe)[Ae]=be((0,v.Z)(this,Ke));for(var e=0,t=Object.entries((0,v.Z)(this,$e));e<t.length;e++){var n=(0,_.Z)(t[e],2),r=n[0],i=n[1];try{(0,v.Z)(this,qe)[r]=be(i)}catch(a){console.warn("failed to extract features for alternative Experiment '"+r+"'; "+a.message)}}}}function lt(){if(null===(0,v.Z)(this,Je)){(0,f.Z)(this,nt,st).call(this);var e=(0,v.Z)(this,Ke).attribute("colData");try{(0,d.Z)(this,Je,pe(e))}catch(t){throw new Error("failed to extract colData from a SummarizedExperiment; "+t.message)}finally{w.gd(e)}}}var ut=n(5173),ht=n(7326),ct=n(136),ft=n(9388),dt=n(5587),vt=new WeakMap,_t=new WeakMap,wt=function(){function e(t,n){(0,l.Z)(this,e),(0,c.Z)(this,vt,{writable:!0,value:void 0}),(0,c.Z)(this,_t,{writable:!0,value:void 0}),(0,d.Z)(this,vt,t),(0,d.Z)(this,_t,null)}return(0,u.Z)(e,[{key:"file",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(0,v.Z)(this,_t)){e.next=8;break}return e.t0=d.Z,e.t1=this,e.t2=_t,e.next=6,dt.loadAsync((0,v.Z)(this,vt).buffer());case 6:e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3);case 8:return e.next=10,(0,v.Z)(this,_t).file(t).async("uint8array");case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"metadata",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(0,v.Z)(this,_t)){e.next=8;break}return e.t0=d.Z,e.t1=this,e.t2=_t,e.next=6,dt.loadAsync((0,v.Z)(this,vt).buffer());case 6:e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3);case 8:return t.endsWith(".json")||(t+=".json"),e.next=12,(0,v.Z)(this,_t).file(t).async("string");case 12:if(n=e.sent,!(r=JSON.parse(n)).$schema.startsWith("redirection/")){e.next=18;break}t=r.redirection.targets[0].location,e.next=19;break;case 18:return e.abrupt("return",r);case 19:e.next=8;break;case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){(0,d.Z)(this,_t,null)}}]),e}(),pt=new WeakMap,mt=new WeakMap,Zt=new WeakSet;ut.GY;function gt(e){var t=[{type:"zip",file:e((0,v.Z)(this,pt))}],n=this.options();return n.datasetName=(0,v.Z)(this,mt),{files:t,options:n}}var bt=function(e){(0,ct.Z)(n,e);var t=(0,ft.Z)(n);function n(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,l.Z)(this,n);var a=null;"existingHandle"in i&&(a=i.existingHandle,delete i.existingHandle);var s=new wt(r,a);return t.call(this,e,s,i)}return(0,u.Z)(n)}(ut.Ne),yt={"10X":r.B,MatrixMarket:ve.e,H5AD:B,SummarizedExperiment:Be}},6546:function(e,t,n){n.d(t,{Cy:function(){return Z},tq:function(){return A}});var r=n(7762),i=n(4165),a=n(3324),s=n(5861),o=n(1413),l=n(5671),u=n(3144),h=n(101),c=n(2346),f=n(3889),d=n(2415),v=n(8916),_=n(2793),w=n(5831),p=n(7462),m=n(7891),Z=(n(7132),"inputs"),g="raw_subset_indices",b=new WeakMap,y=new WeakMap,k=new WeakMap,x=new WeakMap,E=new WeakSet,A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,l.Z)(this,e),(0,h.Z)(this,E),(0,c.Z)(this,b,{writable:!0,value:void 0}),(0,c.Z)(this,y,{writable:!0,value:void 0}),(0,c.Z)(this,k,{writable:!0,value:void 0}),(0,c.Z)(this,x,{writable:!0,value:void 0}),(0,_.Z)(this,b,null===t?{}:t),(0,_.Z)(this,y,null===n?{}:n),(0,_.Z)(this,k,null===r?{}:r),(0,_.Z)(this,x,!1),this.changed=!1}return(0,u.Z)(e,[{key:"free",value:function(){m.Yl((0,v.Z)(this,y).matrix),m.Yl((0,v.Z)(this,y).raw_matrix),m.Yl((0,v.Z)(this,y).block_ids),m.Yl((0,v.Z)(this,y).raw_block_ids),m.Yl((0,v.Z)(this,y).multi_block_ids)}},{key:"fetchCountMatrix",value:function(){return(0,v.Z)(this,y).matrix}},{key:"fetchFeatureAnnotations",value:function(){return(0,v.Z)(this,y).genes}},{key:"fetchRowIds",value:function(){return(0,v.Z)(this,y).row_ids}},{key:"fetchCellAnnotations",value:function(){return(0,v.Z)(this,y).annotations}},{key:"fetchBlock",value:function(){return(0,v.Z)(this,y).block_ids}},{key:"fetchBlockLevels",value:function(){return(0,v.Z)(this,y).block_levels}},{key:"fetchParameters",value:function(){var t,n=(0,o.Z)({},(0,v.Z)(this,b));return n.subset=(0,d.Z)(t=this.constructor,e,S).call(t,n.subset),n}},{key:"fetchDatasets",value:function(){return(0,v.Z)(this,y).datasets}},{key:"fetchDirectSubset",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).copy,t=void 0===e||e;if(g in(0,v.Z)(this,y)){var n=(0,v.Z)(this,y)[g];return t?n.slice():n}return null}},{key:"guessRnaFeatureTypes",value:function(){return"RNA"in(0,v.Z)(this,y).genes?("inferred_rna_types"in(0,v.Z)(this,y)||((0,v.Z)(this,y).inferred_rna_types=m.zS((0,v.Z)(this,y).genes.RNA)),(0,v.Z)(this,y).inferred_rna_types):null}},{key:"enableDatasetCache",value:function(e){(0,_.Z)(this,x,e)}},{key:"compute",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(n,r){var s,l,u,h,c,f,w,p,Z;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=r.block_factor,l=r.subset,this.changed=!1,null===n){t.next=12;break}for(u={},h=0,c=Object.entries(n);h<c.length;h++)f=(0,a.Z)(c[h],2),w=f[0],p=f[1],u[w]={format:p.constructor.format(),details:p.abbreviate()};if(!m.xi(u,(0,v.Z)(this,k))){t.next=12;break}return t.next=8,F(n,(0,v.Z)(this,y),(0,v.Z)(this,x));case 8:(0,_.Z)(this,k,u),(0,v.Z)(this,y).datasets=(0,o.Z)({},n),delete(0,v.Z)(this,y).inferred_rna_types,this.changed=!0;case 12:return(this.changed||(0,v.Z)(this,b).block_factor!==s)&&(U(s,(0,v.Z)(this,y)),(0,v.Z)(this,b).block_factor=s,this.changed=!0),(this.changed||!(g in(0,v.Z)(this,y))&&m.xi(l,(0,v.Z)(this,b).subset)||!("matrix"in(0,v.Z)(this,y)))&&(B(l,(0,v.Z)(this,y)),(0,v.Z)(this,b).subset=(0,d.Z)(Z=this.constructor,e,S).call(Z,l),this.changed=!0),t.abrupt("return",null);case 15:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"undoSubset",value:function(e){if("matrix"in(0,v.Z)(this,y)){var t,n=this.fetchCountMatrix().numberOfColumns(),i=(0,r.Z)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a<0||a>=n)throw new Error("entries of 'indices' should be less than the number of cells in the dataset")}}catch(l){i.e(l)}finally{i.f()}}var s=null;"subset"in(0,v.Z)(this,b)&&(s=(0,v.Z)(this,b).subset);var o=I(s,(0,v.Z)(this,y));null!==o&&e.forEach((function(t,n){e[n]=o[t]}))}},{key:"setDirectSubset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.copy,r=void 0===n||n,i=t.onOriginal,a=void 0!==i&&i;null!==e?(0,v.Z)(this,y)[g]=(0,f.Z)(this,E,z).call(this,e,r,a):delete(0,v.Z)(this,y)[g],w.gd((0,v.Z)(this,y).matrix),delete(0,v.Z)(this,y).matrix}},{key:"createDirectSubset",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.copy,i=void 0===r||r,a=n.onOriginal,s=void 0!==a&&a,o={};o[g]=(0,f.Z)(this,E,z).call(this,t,i,s),o.raw_matrix=(0,v.Z)(this,y).raw_matrix.clone();for(var l=0,u=["multi_block_ids","raw_block_ids"];l<u.length;l++){var h=u[l];h in(0,v.Z)(this,y)&&(null===(0,v.Z)(this,y)[h]?o[h]=null:o[h]=(0,v.Z)(this,y)[h].clone())}for(var c=0,d=["row_ids","raw_annotations","genes","multi_block_levels","raw_block_levels"];c<d.length;c++){var _=d[c];_ in(0,v.Z)(this,y)&&(o[_]=(0,v.Z)(this,y)[_])}B(null,o);var w=this.fetchParameters();return w.subset=null,new e(w,o,(0,v.Z)(this,k))}}],[{key:"defaults",value:function(){return{block_factor:null,subset:null}}}]),e}();function S(e){if(null==e)return e;var t=(0,o.Z)({},e);return"values"in t&&(t.values=t.values.slice()),"ranges"in t&&(t.ranges=t.ranges.map((function(e){return e.slice()}))),t}function z(e,t,n){return m.N2(e,null),t&&(e=e.slice()),n||this.undoSubset(e),e}var R=["RNA","ADT","CRISPR"];function D(e,t){var n={};try{for(var r=[],i=[],a=0;a<t.length;a++){i.push(t[a].matrix.get(e));var s=t[a].primary_ids[e];if(null==s)throw new Error("modality '"+e+"' lacks a primary identifier for dataset "+String(a));r.push(s)}var o=w.KV(i,r);n.matrix=o.matrix,n.features=p.Nd(t[0].features[e],o.indices),n.row_ids=p.Nd(t[0].row_ids[e],o.indices)}catch(l){throw m.Yl(n.matrix),l}return n}function C(e,t){var n,i,a=[],s=(0,r.Z)(R);try{for(s.s();!(n=s.n()).done;){var o,l=n.value,u=!0,h=(0,r.Z)(t);try{for(h.s();!(o=h.n()).done;){if(!o.value.matrix.has(l)){u=!1;break}}}catch(y){h.e(y)}finally{h.f()}u&&a.push(l)}}catch(y){s.e(y)}finally{s.f()}if(0==a.length)throw new Error("failed to find common modalities across all datasets");var c={matrix:new w.VU,features:{},row_ids:{}};try{for(var f=0,d=a;f<d.length;f++){var v=d[f],_=D(v,t);c.matrix.add(v,_.matrix),c.features[v]=_.features,c.row_ids[v]=_.row_ids}var Z=t.map((function(e){return e.cells}));c.cells=p.sj(Z);var g=new Array(t.length);t.forEach((function(e,t){g[t]=e.matrix.numberOfColumns()})),i=w.j4(g),c.block_ids=i,c.block_levels=e;var b=new Array(i.length);i.forEach((function(t,n){b[n]=e[t]})),c.cells.$setColumn("__batch__",b)}catch(k){throw m.Yl(i),m.Yl(c.matrix),k}return c}function N(e){if(0==e.matrix.available().length)throw new Error("");var t={matrix:new w.VU,features:{},row_ids:{}};try{var n,i=(0,r.Z)(R);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.matrix.has(a)&&(t.matrix.add(a,e.matrix.get(a)),t.features[a]=e.features[a],t.row_ids[a]=e.row_ids[a])}}catch(s){i.e(s)}finally{i.f()}}catch(o){throw w.gd(t.matrix),o}return t.cells=e.cells,t.block_ids=null,t.block_levels=null,t}function W(e,t){return M.apply(this,arguments)}function M(){return(M=(0,s.Z)((0,i.Z)().mark((function e(t,n){var a,s,o,l,u,h,c,f,d,v,_,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=Object.keys(t)).sort(),s=[],e.prev=3,o=0,l=a;case 5:if(!(o<l.length)){e.next=15;break}return u=l[o],e.t0=s,e.next=10,t[u].load({cache:n});case 10:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 12:o++,e.next=5;break;case 15:e.next=22;break;case 17:e.prev=17,e.t2=e.catch(3),h=(0,r.Z)(s);try{for(h.s();!(c=h.n()).done;)f=c.value,w.gd(f.matrix)}catch(i){h.e(i)}finally{h.f()}throw e.t2;case 22:if(1!=a.length){e.next=33;break}e.prev=23,d=N(s[0]),e.next=31;break;case 27:throw e.prev=27,e.t3=e.catch(23),w.gd(s[0].matrix),e.t3;case 31:e.next=34;break;case 33:try{d=C(a,s)}finally{v=(0,r.Z)(s);try{for(v.s();!(_=v.n()).done;)p=_.value,w.gd(p.matrix)}catch(i){v.e(i)}finally{v.f()}}case 34:return e.abrupt("return",d);case 35:case"end":return e.stop()}}),e,null,[[3,17],[23,27]])})))).apply(this,arguments)}var O=-1;function I(e,t){var n;if(g in t)n=t[g];else if(null==e)n=null;else{if(!t.raw_annotations.hasColumn(e.field))throw new Error("failed to find '"+e.field+"' in the column annotations");var i=t.raw_annotations.column(e.field);if(n=[],"values"in e){var a=new Set(e.values);i.forEach((function(e,t){a.has(e)&&n.push(t)}))}else i.forEach((function(t,i){var a,s=(0,r.Z)(e.ranges);try{for(s.s();!(a=s.n()).done;){var o=a.value;if(t>=o[0]&&t<=o[1])return void n.push(i)}}catch(l){s.e(l)}finally{s.f()}}))}if("raw_block_ids"in t&&null!==t.raw_block_ids){var s=t.raw_block_ids.array(),o=[];if(null!==n){var l,u=(0,r.Z)(n);try{for(u.s();!(l=u.n()).done;){var h=l.value;s[h]!==O&&o.push(h)}}catch(f){u.e(f)}finally{u.f()}}else for(var c=0;c<s.length;c++)s[c]!==O&&o.push(c);n=o}return n}function F(e,t,n){return T.apply(this,arguments)}function T(){return(T=(0,s.Z)((0,i.Z)().mark((function e(t,n,r){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.Yl(n.raw_matrix),m.Yl(n.matrix),m.Yl(n.multi_block_ids),e.next=5,W(t,r);case 5:a=e.sent,n.raw_matrix=a.matrix,n.row_ids=a.row_ids,n.raw_annotations=a.cells,n.multi_block_ids=a.block_ids,n.multi_block_levels=a.block_levels,n.genes=a.features;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t){m.Yl(t.raw_block_ids);var n=null,r=null;if(null!==e)try{var i=t.raw_annotations.column(e);if(i.length!=t.raw_matrix.numberOfColumns())throw new Error("length of blocking factor '"+e+"' should be equal to the number of cells");var a=w.Yh(i,{action:"none",placeholder:O});n=a.ids,r=a.levels}catch(s){throw m.Yl(n),s}else n=null!==t.multi_block_ids?t.multi_block_ids.view():null,r=t.multi_block_levels;t.raw_block_ids=n,t.raw_block_levels=r}function B(e,t){m.Yl(t.matrix),m.Yl(t.block_ids);var n,i,a,s,o=I(e,t);try{if(null===o)n=t.raw_annotations,i=t.raw_matrix.clone(),null!==t.raw_block_ids?(a=t.raw_block_ids.view(),s=t.raw_block_levels):(a=null,s=null);else{if(n=p.Nd(t.raw_annotations,o),null!==t.raw_block_ids)a=w.DS(t.raw_block_ids,o),s=w.D4(a).map((function(e){return t.raw_block_levels[e]}));else a=null,s=null;i=new w.VU;var l,u=(0,r.Z)(t.raw_matrix.available());try{for(u.s();!(l=u.n()).done;){var h=l.value,c=t.raw_matrix.get(h);i.add(h,w.ZW(c,o))}}catch(f){u.e(f)}finally{u.f()}}}catch(d){throw m.Yl(i),m.Yl(a),d}t.annotations=n,t.block_levels=s,t.block_ids=a,t.matrix=i}},4071:function(e,t,n){n.d(t,{AB:function(){return u},Ig:function(){return _},Vi:function(){return m},cE:function(){return v},qM:function(){return w},yc:function(){return l}});var r=n(4165),i=n(5861),a=n(5831),s=(n(7891),n(8794)),o=function(e,t,n){return null};var l={numberOfThreads:1};function u(e,t){var n=e.fetchIndex(),r={num_obs:n.numberOfCells()},i=null,s=null,o=null,l=null;try{i=a.wf(n,t),s=a.Wf(i.numberOfCells()),o=a.Wf(i.size()),l=a.RJ(i.size()),i.serialize({runs:s,indices:o,distances:l}),r.size=i.size(),r.runs=s.array().slice(),r.indices=o.array().slice(),r.distances=l.array().slice()}finally{null!==i&&i.free(),null!==s&&s.free(),null!==o&&o.free(),null!==l&&l.free()}return r}var h=[],c=[];function f(e){return e.type}function d(e,t){"error"==f(t)?e.reject(t.error):e.resolve(t.data)}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=h[e],i=c[e],a=i.counter,o=new Promise((function(e,t){var n={resolve:e,reject:t};a in i.promises?(d(n,i.promises[a]),delete i.promises[a]):i.promises[a]=n}));return i.counter++,t.id=a,s.bG(r,t,n),o}function _(e,t){var n=h.length;h.push(e);var r={counter:0,promises:{}};return c.push(r),s.jC(e,(function(e){var t=f(e.data);if(t.endsWith("_iter"))o(t.slice(0,-5),e.data.x,e.data.y,e.data.iteration);else{var n=e.data.id;n in r.promises?(d(r.promises[n],e.data),delete r.promises[n]):r.promises[n]=e.data}})),{worker_id:n,ready:v(n,{cmd:"INIT",scranOptions:t})}}function w(e){return p.apply(this,arguments)}function p(){return(p=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t,{cmd:"KILL"});case 2:return n=h[t],h[t]=null,e.abrupt("return",s.Ae(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t,n){var r={cmd:"RUN",params:t},i=[];return null!==n&&(i=[n.runs.buffer,n.indices.buffer,n.distances.buffer],r.neighbors=n),v(e,r,i)}},5061:function(e,t,n){n.d(t,{or:function(){return _},is:function(){return c.i},bj:function(){return h.b},Uy:function(){return f.U},RR:function(){return d.R},Kk:function(){return r.geneBaseUrl},d9:function(){return r.geneDownload},XZ:function(){return r.referenceBaseUrl},ao:function(){return r.referenceDownload},$g:function(){return w.$},wy:function(){return p.w},XW:function(){return l},b5:function(){return r.setGeneDownload}});var r=n(8137),i=(n(4147),n(7078)),a=n(4165),s=n(7762),o=n(5861);function l(e,t){return u.apply(this,arguments)}function u(){return u=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,o,l,u,h,c,f,d,v,_,w,p,m,Z,g,b,y,k,x,E=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=(r=E.length>2&&void 0!==E[2]?E[2]:{}).types,l=void 0===o?null:o,u=r.ignoreCase,h=void 0===u||u,null===l&&(l=["entrez","ensembl","symbol"]),c=[],f=(0,s.Z)(l);try{for(f.s();!(d=f.n()).done;)v=d.value,c.push((0,i.B)(t,v,{lowerCase:h}))}catch(a){f.e(a)}finally{f.f()}return e.next=7,Promise.all(c);case 7:_=e.sent,w=[],p=0;case 10:if(!(p<n.length)){e.next=22;break}if(0!=(m=n[p]).length){e.next=15;break}return w.push([]),e.abrupt("continue",19);case 15:for(h&&(m=m.toLowerCase()),Z=[],g=0;g<l.length;g++)if("undefined"!==typeof(b=_[g].get(m))){y=(0,s.Z)(b);try{for(y.s();!(k=y.n()).done;)x=k.value,Z.push(x)}catch(a){y.e(a)}finally{y.f()}}w.push(Z);case 19:p++,e.next=10;break;case 22:return e.abrupt("return",w);case 23:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}var h=n(7899),c=(n(4127),n(3192)),f=(n(6331),n(4479),n(7855)),d=(n(320),n(2666)),v=(n(5719),n(3324));function _(e){var t,n=new Map,r=(0,s.Z)(e);try{for(r.s();!(t=r.n()).done;){var i,a=t.value,o=(0,s.Z)(a);try{for(o.s();!(i=o.n()).done;){var l=i.value,u=n.get(l);"undefined"==typeof u?n.set(l,1):n.set(l,u+1)}}catch(m){o.e(m)}finally{o.f()}}}catch(m){r.e(m)}finally{r.f()}var h,c=[],f=(0,s.Z)(n);try{for(f.s();!(h=f.n()).done;){var d=(0,v.Z)(h.value,2),_=d[0],w=d[1],p={id:Number(_),count:w};c.push(p)}}catch(m){f.e(m)}finally{f.f()}return c}var w=n(7101),p=n(5479)},8137:function(e,t,n){n.r(t),n.d(t,{convertToUint32Array:function(){return z},decompressLines:function(){return m},default_download:function(){return o},fetchNumber:function(){return W},fetchSizes:function(){return N},geneBaseUrl:function(){return v},geneDownload:function(){return w},gene_download:function(){return _},intersect:function(){return R},referenceBaseUrl:function(){return u},referenceDownload:function(){return c},reference_download:function(){return h},retrieveBytes:function(){return A},retrieveBytesByIndex:function(){return E},retrieveNamedRanges:function(){return b},retrieveRanges:function(){return Z},retrieveRangesWithExtras:function(){return k},setGeneDownload:function(){return p},setReferenceDownload:function(){return f}});var r=n(4165),i=n(7762),a=n(5861),s=n(714),o=function(e,t,n,r){var i=e+"/"+t;return null==n||null==r?fetch(i):fetch(i,{headers:{Range:"bytes="+String(n)+"-"+String(r)}})},l="https://github.com/LTLA/gesel-feedstock/releases/download/indices-v0.2.1";function u(e){return l}var h=function(e){return o(l,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)};function c(e){var t=h;return"undefined"!==typeof e&&(h=e),t}function f(e){return c(e)}var d="https://github.com/LTLA/gesel-feedstock/releases/download/genes-v1.0.0";function v(e){return d}var _=function(e){return o(d,e,null,null)};function w(e){var t=_;return"undefined"!==typeof e&&(_=e),t}function p(e){return w(e)}function m(e){var t=s.rr(new Uint8Array(e)),n=(new TextDecoder).decode(t).split("\n");return""==n[n.length-1]?n.slice(0,n.length-1):n}function Z(e){return g.apply(this,arguments)}function g(){return(g=(0,a.Z)((0,r.Z)().mark((function e(t){var n,i,a,s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t+".ranges.gz");case 2:if((n=e.sent).ok){e.next=5;break}throw"failed to fetch ranges for '"+t+"'";case 5:return e.next=7,n.arrayBuffer();case 7:for(i=e.sent,a=m(i),s=[0],o=0;o<a.length;o++)s.push(s[o]+Number(a[o])+1);return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return y.apply(this,arguments)}function y(){return(y=(0,a.Z)((0,r.Z)().mark((function e(t){var n,i,a,s,o,l,u,c,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t+".ranges.gz");case 2:if((n=e.sent).ok){e.next=5;break}throw"failed to fetch ranges for '"+t+"'";case 5:return e.next=7,n.arrayBuffer();case 7:for(i=e.sent,a=m(i),s=0,o=new Map,l=[],u=0;u<a.length;u++)c=a[u].split("\t"),f=s+Number(c[1])+1,o.set(c[0],[s,f]),l.push(c[0]),s=f;return e.abrupt("return",{ranges:o,order:l});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)((0,r.Z)().mark((function e(t){var n,i,a,s,o,l,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t+".ranges.gz");case 2:if((n=e.sent).ok){e.next=5;break}throw"failed to fetch ranges for '"+t+"'";case 5:return e.next=7,n.arrayBuffer();case 7:for(i=e.sent,a=m(i),s=[0],o=[],l=0;l<a.length;l++)u=a[l].split("\t"),s.push(s[l]+Number(u[0])+1),o.push(Number(u[1]));return e.abrupt("return",{ranges:s,extra:o});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t,n){return A(e,t[n],t[n+1])}function A(e,t,n){return S.apply(this,arguments)}function S(){return(S=(0,a.Z)((0,r.Z)().mark((function e(t,n,i){var a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i--,e.next=3,h(t,n,i);case 3:if((a=e.sent).ok){e.next=6;break}throw"failed to fetch ranges for '"+t+"'";case 6:return e.next=8,a.text();case 8:return s=e.sent,e.abrupt("return",s.slice(0,i-n));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){var t=[];if(""!==e){var n=0;e.split("\t").forEach((function(e){var r=Number(e)+n;t.push(r),n=r}))}return new Uint32Array(t)}function R(e){if(0==e.length)return[];if(1==e.length)return e[0];for(var t=new Set(e[0]),n=1;n<e.length;n++){var r,a=new Set,s=(0,i.Z)(e[n]);try{for(s.s();!(r=s.n()).done;){var o=r.value;t.has(o)&&a.add(o)}}catch(l){s.e(l)}finally{s.f()}t=a}return Array.from(t)}function D(e,t,n,r,i,a){return C.apply(this,arguments)}function C(){return(C=(0,a.Z)((0,r.Z)().mark((function e(t,n,i,a,s,o){var l,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof(l=n.get(t))){e.next=10;break}return e.next=4,i(t,{download:!1});case 4:if(null===(u=e.sent)){e.next=7;break}return e.abrupt("return",o(u));case 7:return e.next=9,a(t);case 9:l=n.get(t);case 10:return e.abrupt("return",s(l));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t,n,r){return D(e,t,n,r,(function(e){return e}),(function(n){var r,a=[],s=(0,i.Z)(n);try{for(s.s();!(r=s.n()).done;){var o=r.value;a.push(o.size)}}catch(l){s.e(l)}finally{s.f()}return t.set(e,a),a}))}function W(e,t,n,r){return D(e,t,n,r,(function(e){return e.length}),(function(e){return e.length}))}},714:function(e,t,n){n.d(t,{T_:function(){return cn},ec:function(){return dn},rr:function(){return fn}});function r(e){for(var t=e.length;--t>=0;)e[t]=0}var i=256,a=286,s=30,o=15,l=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),c=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=new Array(576);r(f);var d=new Array(60);r(d);var v=new Array(512);r(v);var _=new Array(256);r(_);var w=new Array(29);r(w);var p,m,Z,g=new Array(s);function b(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function y(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}r(g);var k=function(e){return e<256?v[e]:v[256+(e>>>7)]},x=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},E=function(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,x(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},A=function(e,t,n){E(e,n[2*t],n[2*t+1])},S=function(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},z=function(e,t,n){var r,i,a=new Array(16),s=0;for(r=1;r<=o;r++)s=s+n[r-1]<<1,a[r]=s;for(i=0;i<=t;i++){var l=e[2*i+1];0!==l&&(e[2*i]=S(a[l]++,l))}},R=function(e){var t;for(t=0;t<a;t++)e.dyn_ltree[2*t]=0;for(t=0;t<s;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},D=function(e){e.bi_valid>8?x(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},C=function(e,t,n,r){var i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]},N=function(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&C(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!C(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},W=function(e,t,n){var r,a,s,o,h=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+h++],r+=(255&e.pending_buf[e.sym_buf+h++])<<8,a=e.pending_buf[e.sym_buf+h++],0===r?A(e,a,t):(s=_[a],A(e,s+i+1,t),0!==(o=l[s])&&(a-=w[s],E(e,a,o)),r--,s=k(r),A(e,s,n),0!==(o=u[s])&&(r-=g[s],E(e,r,o)))}while(h<e.sym_next);A(e,256,t)},M=function(e,t){var n,r,i,a=t.dyn_tree,s=t.stat_desc.static_tree,l=t.stat_desc.has_stree,u=t.stat_desc.elems,h=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<u;n++)0!==a[2*n]?(e.heap[++e.heap_len]=h=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=h<2?++h:0)]=1,e.depth[i]=0,e.opt_len--,l&&(e.static_len-=s[2*i+1]);for(t.max_code=h,n=e.heap_len>>1;n>=1;n--)N(e,a,n);i=u;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],N(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*i]=a[2*n]+a[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=i,e.heap[1]=i++,N(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,a,s,l,u=t.dyn_tree,h=t.max_code,c=t.stat_desc.static_tree,f=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,v=t.stat_desc.extra_base,_=t.stat_desc.max_length,w=0;for(a=0;a<=o;a++)e.bl_count[a]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(a=u[2*u[2*(r=e.heap[n])+1]+1]+1)>_&&(a=_,w++),u[2*r+1]=a,r>h||(e.bl_count[a]++,s=0,r>=v&&(s=d[r-v]),l=u[2*r],e.opt_len+=l*(a+s),f&&(e.static_len+=l*(c[2*r+1]+s)));if(0!==w){do{for(a=_-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[_]--,w-=2}while(w>0);for(a=_;0!==a;a--)for(r=e.bl_count[a];0!==r;)(i=e.heap[--n])>h||(u[2*i+1]!==a&&(e.opt_len+=(a-u[2*i+1])*u[2*i],u[2*i+1]=a),r--)}}(e,t),z(a,h,e.bl_count)},O=function(e,t,n){var r,i,a=-1,s=t[1],o=0,l=7,u=4;for(0===s&&(l=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=t[2*(r+1)+1],++o<l&&i===s||(o<u?e.bl_tree[2*i]+=o:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,a=i,0===s?(l=138,u=3):i===s?(l=6,u=3):(l=7,u=4))},I=function(e,t,n){var r,i,a=-1,s=t[1],o=0,l=7,u=4;for(0===s&&(l=138,u=3),r=0;r<=n;r++)if(i=s,s=t[2*(r+1)+1],!(++o<l&&i===s)){if(o<u)do{A(e,i,e.bl_tree)}while(0!==--o);else 0!==i?(i!==a&&(A(e,i,e.bl_tree),o--),A(e,16,e.bl_tree),E(e,o-3,2)):o<=10?(A(e,17,e.bl_tree),E(e,o-3,3)):(A(e,18,e.bl_tree),E(e,o-11,7));o=0,a=i,0===s?(l=138,u=3):i===s?(l=6,u=3):(l=7,u=4)}},F=!1,T=function(e,t,n,r){E(e,0+(r?1:0),3),D(e),x(e,n),x(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},U=function(e,t,n,r){var a,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<i;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),M(e,e.l_desc),M(e,e.d_desc),o=function(e){var t;for(O(e,e.dyn_ltree,e.l_desc.max_code),O(e,e.dyn_dtree,e.d_desc.max_code),M(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*c[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=a&&(a=s)):a=s=n+5,n+4<=a&&-1!==t?T(e,t,n,r):4===e.strategy||s===a?(E(e,2+(r?1:0),3),W(e,f,d)):(E(e,4+(r?1:0),3),function(e,t,n,r){var i;for(E(e,t-257,5),E(e,n-1,5),E(e,r-4,4),i=0;i<r;i++)E(e,e.bl_tree[2*c[i]+1],3);I(e,e.dyn_ltree,t-1),I(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),W(e,e.dyn_ltree,e.dyn_dtree)),R(e),r&&D(e)},B={_tr_init:function(e){F||(!function(){var e,t,n,r,i,c=new Array(16);for(n=0,r=0;r<28;r++)for(w[r]=n,e=0;e<1<<l[r];e++)_[n++]=r;for(_[n-1]=r,i=0,r=0;r<16;r++)for(g[r]=i,e=0;e<1<<u[r];e++)v[i++]=r;for(i>>=7;r<s;r++)for(g[r]=i<<7,e=0;e<1<<u[r]-7;e++)v[256+i++]=r;for(t=0;t<=o;t++)c[t]=0;for(e=0;e<=143;)f[2*e+1]=8,e++,c[8]++;for(;e<=255;)f[2*e+1]=9,e++,c[9]++;for(;e<=279;)f[2*e+1]=7,e++,c[7]++;for(;e<=287;)f[2*e+1]=8,e++,c[8]++;for(z(f,287,c),e=0;e<s;e++)d[2*e+1]=5,d[2*e]=S(e,5);p=new b(f,l,257,a,o),m=new b(d,u,0,s,o),Z=new b(new Array(0),h,0,19,7)}(),F=!0),e.l_desc=new y(e.dyn_ltree,p),e.d_desc=new y(e.dyn_dtree,m),e.bl_desc=new y(e.bl_tree,Z),e.bi_buf=0,e.bi_valid=0,R(e)},_tr_stored_block:T,_tr_flush_block:U,_tr_tally:function(e,t,n){return e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(_[n]+i+1)]++,e.dyn_dtree[2*k(t)]++),e.sym_next===e.sym_end},_tr_align:function(e){E(e,2,3),A(e,256,f),function(e){16===e.bi_valid?(x(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},j=function(e,t,n,r){for(var i=65535&e|0,a=e>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{a=a+(i=i+t[r++]|0)|0}while(--s);i%=65521,a%=65521}return i|a<<16|0},L=new Uint32Array(function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}()),P=function(e,t,n,r){var i=L,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^i[255&(e^t[s])];return-1^e},H={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Y={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},G=B._tr_init,V=B._tr_stored_block,K=B._tr_flush_block,$=B._tr_tally,X=B._tr_align,q=Y.Z_NO_FLUSH,J=Y.Z_PARTIAL_FLUSH,Q=Y.Z_FULL_FLUSH,ee=Y.Z_FINISH,te=Y.Z_BLOCK,ne=Y.Z_OK,re=Y.Z_STREAM_END,ie=Y.Z_STREAM_ERROR,ae=Y.Z_DATA_ERROR,se=Y.Z_BUF_ERROR,oe=Y.Z_DEFAULT_COMPRESSION,le=Y.Z_FILTERED,ue=Y.Z_HUFFMAN_ONLY,he=Y.Z_RLE,ce=Y.Z_FIXED,fe=Y.Z_DEFAULT_STRATEGY,de=Y.Z_UNKNOWN,ve=Y.Z_DEFLATED,_e=258,we=262,pe=42,me=113,Ze=666,ge=function(e,t){return e.msg=H[t],t},be=function(e){return 2*e-(e>4?9:0)},ye=function(e){for(var t=e.length;--t>=0;)e[t]=0},ke=function(e){var t,n,r,i=e.w_size;r=t=e.hash_size;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);r=t=i;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)},xe=function(e,t,n){return(t<<e.hash_shift^n)&e.hash_mask},Ee=function(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},Ae=function(e,t){K(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Ee(e.strm)},Se=function(e,t){e.pending_buf[e.pending++]=t},ze=function(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Re=function(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=j(e.adler,t,i,n):2===e.state.wrap&&(e.adler=P(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},De=function(e,t){var n,r,i=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-we?e.strstart-(e.w_size-we):0,u=e.window,h=e.w_mask,c=e.prev,f=e.strstart+_e,d=u[a+s-1],v=u[a+s];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(u[(n=t)+s]===v&&u[n+s-1]===d&&u[n]===u[a]&&u[++n]===u[a+1]){a+=2,n++;do{}while(u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&a<f);if(r=_e-(f-a),a=f-_e,r>s){if(e.match_start=t,s=r,r>=o)break;d=u[a+s-1],v=u[a+s]}}}while((t=c[t&h])>l&&0!==--i);return s<=e.lookahead?s:e.lookahead},Ce=function(e){var t,n,r,i=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=i+(i-we)&&(e.window.set(e.window.subarray(i,i+i-n),0),e.match_start-=i,e.strstart-=i,e.block_start-=i,e.insert>e.strstart&&(e.insert=e.strstart),ke(e),n+=i),0===e.strm.avail_in)break;if(t=Re(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=xe(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=xe(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<we&&0!==e.strm.avail_in)},Ne=function(e,t){var n,r,i,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,o=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,n>(r=e.strstart-e.block_start)+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<a&&(0===n&&t!==ee||t===q||n!==r+e.strm.avail_in))break;s=t===ee&&n===r+e.strm.avail_in?1:0,V(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Ee(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(Re(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===s);return(o-=e.strm.avail_in)&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==q&&t!==ee&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(Re(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,a=(i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i)>e.w_size?e.w_size:i,((r=e.strstart-e.block_start)>=a||(r||t===ee)&&t!==q&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,s=t===ee&&0===e.strm.avail_in&&n===r?1:0,V(e,e.block_start,n,s),e.block_start+=n,Ee(e.strm)),s?3:1)},We=function(e,t){for(var n,r;;){if(e.lookahead<we){if(Ce(e),e.lookahead<we&&t===q)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=xe(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-we&&(e.match_length=De(e,n)),e.match_length>=3)if(r=$(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=xe(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=xe(e,e.ins_h,e.window[e.strstart+1]);else r=$(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Ae(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===ee?(Ae(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ae(e,!1),0===e.strm.avail_out)?1:2},Me=function(e,t){for(var n,r,i;;){if(e.lookahead<we){if(Ce(e),e.lookahead<we&&t===q)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=xe(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-we&&(e.match_length=De(e,n),e.match_length<=5&&(e.strategy===le||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=$(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=xe(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(Ae(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=$(e,0,e.window[e.strstart-1]))&&Ae(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=$(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===ee?(Ae(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ae(e,!1),0===e.strm.avail_out)?1:2};function Oe(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}var Ie=[new Oe(0,0,0,0,Ne),new Oe(4,4,8,4,We),new Oe(4,5,16,8,We),new Oe(4,6,32,32,We),new Oe(4,4,16,16,Me),new Oe(8,16,32,32,Me),new Oe(8,16,128,128,Me),new Oe(8,32,128,256,Me),new Oe(32,128,258,1024,Me),new Oe(32,258,258,4096,Me)];function Fe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ve,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ye(this.dyn_ltree),ye(this.dyn_dtree),ye(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ye(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ye(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Te=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.status!==pe&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==me&&t.status!==Ze?1:0},Ue=function(e){if(Te(e))return ge(e,ie);e.total_in=e.total_out=0,e.data_type=de;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?pe:me,e.adler=2===t.wrap?0:1,t.last_flush=-2,G(t),ne},Be=function(e){var t,n=Ue(e);return n===ne&&((t=e.state).window_size=2*t.w_size,ye(t.head),t.max_lazy_match=Ie[t.level].max_lazy,t.good_match=Ie[t.level].good_length,t.nice_match=Ie[t.level].nice_length,t.max_chain_length=Ie[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n},je=function(e,t,n,r,i,a){if(!e)return ie;var s=1;if(t===oe&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>9||n!==ve||r<8||r>15||t<0||t>9||a<0||a>ce||8===r&&1!==s)return ge(e,ie);8===r&&(r=9);var o=new Fe;return e.state=o,o.strm=e,o.status=pe,o.wrap=s,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=t,o.strategy=a,o.method=n,Be(e)},Le={deflateInit:function(e,t){return je(e,t,ve,15,8,fe)},deflateInit2:je,deflateReset:Be,deflateResetKeep:Ue,deflateSetHeader:function(e,t){return Te(e)||2!==e.state.wrap?ie:(e.state.gzhead=t,ne)},deflate:function(e,t){if(Te(e)||t>te||t<0)return e?ge(e,ie):ie;var n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===Ze&&t!==ee)return ge(e,0===e.avail_out?se:ie);var r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(Ee(e),0===e.avail_out)return n.last_flush=-1,ne}else if(0===e.avail_in&&be(t)<=be(r)&&t!==ee)return ge(e,se);if(n.status===Ze&&0!==e.avail_in)return ge(e,se);if(n.status===pe&&0===n.wrap&&(n.status=me),n.status===pe){var i=ve+(n.w_bits-8<<4)<<8;if(i|=(n.strategy>=ue||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(i|=32),ze(n,i+=31-i%31),0!==n.strstart&&(ze(n,e.adler>>>16),ze(n,65535&e.adler)),e.adler=1,n.status=me,Ee(e),0!==n.pending)return n.last_flush=-1,ne}if(57===n.status)if(e.adler=0,Se(n,31),Se(n,139),Se(n,8),n.gzhead)Se(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Se(n,255&n.gzhead.time),Se(n,n.gzhead.time>>8&255),Se(n,n.gzhead.time>>16&255),Se(n,n.gzhead.time>>24&255),Se(n,9===n.level?2:n.strategy>=ue||n.level<2?4:0),Se(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Se(n,255&n.gzhead.extra.length),Se(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=P(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(Se(n,0),Se(n,0),Se(n,0),Se(n,0),Se(n,0),Se(n,9===n.level?2:n.strategy>=ue||n.level<2?4:0),Se(n,3),n.status=me,Ee(e),0!==n.pending)return n.last_flush=-1,ne;if(69===n.status){if(n.gzhead.extra){for(var a=n.pending,s=(65535&n.gzhead.extra.length)-n.gzindex;n.pending+s>n.pending_buf_size;){var o=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>a&&(e.adler=P(e.adler,n.pending_buf,n.pending-a,a)),n.gzindex+=o,Ee(e),0!==n.pending)return n.last_flush=-1,ne;a=0,s-=o}var l=new Uint8Array(n.gzhead.extra);n.pending_buf.set(l.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending+=s,n.gzhead.hcrc&&n.pending>a&&(e.adler=P(e.adler,n.pending_buf,n.pending-a,a)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){var u,h=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>h&&(e.adler=P(e.adler,n.pending_buf,n.pending-h,h)),Ee(e),0!==n.pending)return n.last_flush=-1,ne;h=0}u=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Se(n,u)}while(0!==u);n.gzhead.hcrc&&n.pending>h&&(e.adler=P(e.adler,n.pending_buf,n.pending-h,h)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){var c,f=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>f&&(e.adler=P(e.adler,n.pending_buf,n.pending-f,f)),Ee(e),0!==n.pending)return n.last_flush=-1,ne;f=0}c=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Se(n,c)}while(0!==c);n.gzhead.hcrc&&n.pending>f&&(e.adler=P(e.adler,n.pending_buf,n.pending-f,f))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Ee(e),0!==n.pending))return n.last_flush=-1,ne;Se(n,255&e.adler),Se(n,e.adler>>8&255),e.adler=0}if(n.status=me,Ee(e),0!==n.pending)return n.last_flush=-1,ne}if(0!==e.avail_in||0!==n.lookahead||t!==q&&n.status!==Ze){var d=0===n.level?Ne(n,t):n.strategy===ue?function(e,t){for(var n;;){if(0===e.lookahead&&(Ce(e),0===e.lookahead)){if(t===q)return 1;break}if(e.match_length=0,n=$(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Ae(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ee?(Ae(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ae(e,!1),0===e.strm.avail_out)?1:2}(n,t):n.strategy===he?function(e,t){for(var n,r,i,a,s=e.window;;){if(e.lookahead<=_e){if(Ce(e),e.lookahead<=_e&&t===q)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){a=e.strstart+_e;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);e.match_length=_e-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=$(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=$(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Ae(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ee?(Ae(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ae(e,!1),0===e.strm.avail_out)?1:2}(n,t):Ie[n.level].func(n,t);if(3!==d&&4!==d||(n.status=Ze),1===d||3===d)return 0===e.avail_out&&(n.last_flush=-1),ne;if(2===d&&(t===J?X(n):t!==te&&(V(n,0,0,!1),t===Q&&(ye(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Ee(e),0===e.avail_out))return n.last_flush=-1,ne}return t!==ee?ne:n.wrap<=0?re:(2===n.wrap?(Se(n,255&e.adler),Se(n,e.adler>>8&255),Se(n,e.adler>>16&255),Se(n,e.adler>>24&255),Se(n,255&e.total_in),Se(n,e.total_in>>8&255),Se(n,e.total_in>>16&255),Se(n,e.total_in>>24&255)):(ze(n,e.adler>>>16),ze(n,65535&e.adler)),Ee(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?ne:re)},deflateEnd:function(e){if(Te(e))return ie;var t=e.state.status;return e.state=null,t===me?ge(e,ae):ne},deflateSetDictionary:function(e,t){var n=t.length;if(Te(e))return ie;var r=e.state,i=r.wrap;if(2===i||1===i&&r.status!==pe||r.lookahead)return ie;if(1===i&&(e.adler=j(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(ye(r.head),r.strstart=0,r.block_start=0,r.insert=0);var a=new Uint8Array(r.w_size);a.set(t.subarray(n-r.w_size,n),0),t=a,n=r.w_size}var s=e.avail_in,o=e.next_in,l=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Ce(r);r.lookahead>=3;){var u=r.strstart,h=r.lookahead-2;do{r.ins_h=xe(r,r.ins_h,r.window[u+3-1]),r.prev[u&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=u,u++}while(--h);r.strstart=u,r.lookahead=2,Ce(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=o,e.input=l,e.avail_in=s,r.wrap=i,ne},deflateInfo:"pako deflate (from Nodeca project)"},Pe=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},He={assign:function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(var r in n)Pe(n,r)&&(e[r]=n[r])}}return e},flattenChunks:function(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n].length;for(var i=new Uint8Array(t),a=0,s=0,o=e.length;a<o;a++){var l=e[a];i.set(l,s),s+=l.length}return i}},Ye=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(vn){Ye=!1}for(var Ge=new Uint8Array(256),Ve=0;Ve<256;Ve++)Ge[Ve]=Ve>=252?6:Ve>=248?5:Ve>=240?4:Ve>=224?3:Ve>=192?2:1;Ge[254]=Ge[254]=1;var Ke={string2buf:function(e){if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,n,r,i,a,s=e.length,o=0;for(i=0;i<s;i++)55296===(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320===(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),a=0,i=0;a<o;i++)55296===(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320===(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},buf2string:function(e,t){var n,r,i=t||e.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var a=new Array(2*i);for(r=0,n=0;n<i;){var s=e[n++];if(s<128)a[r++]=s;else{var o=Ge[s];if(o>4)a[r++]=65533,n+=o-1;else{for(s&=2===o?31:3===o?15:7;o>1&&n<i;)s=s<<6|63&e[n++],o--;o>1?a[r++]=65533:s<65536?a[r++]=s:(s-=65536,a[r++]=55296|s>>10&1023,a[r++]=56320|1023&s)}}}return function(e,t){if(t<65534&&e.subarray&&Ye)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}(a,r)},utf8border:function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var n=t-1;n>=0&&128===(192&e[n]);)n--;return n<0||0===n?t:n+Ge[e[n]]>t?n:t}};var $e=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Xe=Object.prototype.toString,qe=Y.Z_NO_FLUSH,Je=Y.Z_SYNC_FLUSH,Qe=Y.Z_FULL_FLUSH,et=Y.Z_FINISH,tt=Y.Z_OK,nt=Y.Z_STREAM_END,rt=Y.Z_DEFAULT_COMPRESSION,it=Y.Z_DEFAULT_STRATEGY,at=Y.Z_DEFLATED;function st(e){this.options=He.assign({level:rt,method:at,chunkSize:16384,windowBits:15,memLevel:8,strategy:it},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $e,this.strm.avail_out=0;var n=Le.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==tt)throw new Error(H[n]);if(t.header&&Le.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"===typeof t.dictionary?Ke.string2buf(t.dictionary):"[object ArrayBuffer]"===Xe.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=Le.deflateSetDictionary(this.strm,r))!==tt)throw new Error(H[n]);this._dict_set=!0}}st.prototype.push=function(e,t){var n,r,i=this.strm,a=this.options.chunkSize;if(this.ended)return!1;for(r=t===~~t?t:!0===t?et:qe,"string"===typeof e?i.input=Ke.string2buf(e):"[object ArrayBuffer]"===Xe.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(a),i.next_out=0,i.avail_out=a),(r===Je||r===Qe)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if((n=Le.deflate(i,r))===nt)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),n=Le.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===tt;if(0!==i.avail_out){if(r>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},st.prototype.onData=function(e){this.chunks.push(e)},st.prototype.onEnd=function(e){e===tt&&(this.result=He.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ot=16209,lt=function(e,t){var n,r,i,a,s,o,l,u,h,c,f,d,v,_,w,p,m,Z,g,b,y,k,x,E,A=e.state;n=e.next_in,x=e.input,r=n+(e.avail_in-5),i=e.next_out,E=e.output,a=i-(t-e.avail_out),s=i+(e.avail_out-257),o=A.dmax,l=A.wsize,u=A.whave,h=A.wnext,c=A.window,f=A.hold,d=A.bits,v=A.lencode,_=A.distcode,w=(1<<A.lenbits)-1,p=(1<<A.distbits)-1;e:do{d<15&&(f+=x[n++]<<d,d+=8,f+=x[n++]<<d,d+=8),m=v[f&w];t:for(;;){if(f>>>=Z=m>>>24,d-=Z,0===(Z=m>>>16&255))E[i++]=65535&m;else{if(!(16&Z)){if(0===(64&Z)){m=v[(65535&m)+(f&(1<<Z)-1)];continue t}if(32&Z){A.mode=16191;break e}e.msg="invalid literal/length code",A.mode=ot;break e}g=65535&m,(Z&=15)&&(d<Z&&(f+=x[n++]<<d,d+=8),g+=f&(1<<Z)-1,f>>>=Z,d-=Z),d<15&&(f+=x[n++]<<d,d+=8,f+=x[n++]<<d,d+=8),m=_[f&p];n:for(;;){if(f>>>=Z=m>>>24,d-=Z,!(16&(Z=m>>>16&255))){if(0===(64&Z)){m=_[(65535&m)+(f&(1<<Z)-1)];continue n}e.msg="invalid distance code",A.mode=ot;break e}if(b=65535&m,d<(Z&=15)&&(f+=x[n++]<<d,(d+=8)<Z&&(f+=x[n++]<<d,d+=8)),(b+=f&(1<<Z)-1)>o){e.msg="invalid distance too far back",A.mode=ot;break e}if(f>>>=Z,d-=Z,b>(Z=i-a)){if((Z=b-Z)>u&&A.sane){e.msg="invalid distance too far back",A.mode=ot;break e}if(y=0,k=c,0===h){if(y+=l-Z,Z<g){g-=Z;do{E[i++]=c[y++]}while(--Z);y=i-b,k=E}}else if(h<Z){if(y+=l+h-Z,(Z-=h)<g){g-=Z;do{E[i++]=c[y++]}while(--Z);if(y=0,h<g){g-=Z=h;do{E[i++]=c[y++]}while(--Z);y=i-b,k=E}}}else if(y+=h-Z,Z<g){g-=Z;do{E[i++]=c[y++]}while(--Z);y=i-b,k=E}for(;g>2;)E[i++]=k[y++],E[i++]=k[y++],E[i++]=k[y++],g-=3;g&&(E[i++]=k[y++],g>1&&(E[i++]=k[y++]))}else{y=i-b;do{E[i++]=E[y++],E[i++]=E[y++],E[i++]=E[y++],g-=3}while(g>2);g&&(E[i++]=E[y++],g>1&&(E[i++]=E[y++]))}break}}break}}while(n<r&&i<s);n-=g=d>>3,f&=(1<<(d-=g<<3))-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<s?s-i+257:257-(i-s),A.hold=f,A.bits=d},ut=15,ht=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ct=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ft=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),vt=function(e,t,n,r,i,a,s,o){var l,u,h,c,f,d,v,_,w,p=o.bits,m=0,Z=0,g=0,b=0,y=0,k=0,x=0,E=0,A=0,S=0,z=null,R=new Uint16Array(16),D=new Uint16Array(16),C=null;for(m=0;m<=ut;m++)R[m]=0;for(Z=0;Z<r;Z++)R[t[n+Z]]++;for(y=p,b=ut;b>=1&&0===R[b];b--);if(y>b&&(y=b),0===b)return i[a++]=20971520,i[a++]=20971520,o.bits=1,0;for(g=1;g<b&&0===R[g];g++);for(y<g&&(y=g),E=1,m=1;m<=ut;m++)if(E<<=1,(E-=R[m])<0)return-1;if(E>0&&(0===e||1!==b))return-1;for(D[1]=0,m=1;m<ut;m++)D[m+1]=D[m]+R[m];for(Z=0;Z<r;Z++)0!==t[n+Z]&&(s[D[t[n+Z]]++]=Z);if(0===e?(z=C=s,d=20):1===e?(z=ht,C=ct,d=257):(z=ft,C=dt,d=0),S=0,Z=0,m=g,f=a,k=y,x=0,h=-1,c=(A=1<<y)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){v=m-x,s[Z]+1<d?(_=0,w=s[Z]):s[Z]>=d?(_=C[s[Z]-d],w=z[s[Z]-d]):(_=96,w=0),l=1<<m-x,g=u=1<<k;do{i[f+(S>>x)+(u-=l)]=v<<24|_<<16|w|0}while(0!==u);for(l=1<<m-1;S&l;)l>>=1;if(0!==l?(S&=l-1,S+=l):S=0,Z++,0===--R[m]){if(m===b)break;m=t[n+s[Z]]}if(m>y&&(S&c)!==h){for(0===x&&(x=y),f+=g,E=1<<(k=m-x);k+x<b&&!((E-=R[k+x])<=0);)k++,E<<=1;if(A+=1<<k,1===e&&A>852||2===e&&A>592)return 1;i[h=S&c]=y<<24|k<<16|f-a|0}}return 0!==S&&(i[f+S]=m-x<<24|64<<16|0),o.bits=y,0},_t=Y.Z_FINISH,wt=Y.Z_BLOCK,pt=Y.Z_TREES,mt=Y.Z_OK,Zt=Y.Z_STREAM_END,gt=Y.Z_NEED_DICT,bt=Y.Z_STREAM_ERROR,yt=Y.Z_DATA_ERROR,kt=Y.Z_MEM_ERROR,xt=Y.Z_BUF_ERROR,Et=Y.Z_DEFLATED,At=16180,St=16190,zt=16191,Rt=16192,Dt=16194,Ct=16199,Nt=16200,Wt=16206,Mt=16209,Ot=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function It(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Ft,Tt,Ut=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.mode<At||t.mode>16211?1:0},Bt=function(e){if(Ut(e))return bt;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=At,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,mt},jt=function(e){if(Ut(e))return bt;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Bt(e)},Lt=function(e,t){var n;if(Ut(e))return bt;var r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?bt:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,jt(e))},Pt=function(e,t){if(!e)return bt;var n=new It;e.state=n,n.strm=e,n.window=null,n.mode=At;var r=Lt(e,t);return r!==mt&&(e.state=null),r},Ht=!0,Yt=function(e){if(Ht){Ft=new Int32Array(512),Tt=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(vt(1,e.lens,0,288,Ft,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;vt(2,e.lens,0,32,Tt,0,e.work,{bits:5}),Ht=!1}e.lencode=Ft,e.lenbits=9,e.distcode=Tt,e.distbits=5},Gt=function(e,t,n,r){var i,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):((i=a.wsize-a.wnext)>r&&(i=r),a.window.set(t.subarray(n-r,n-r+i),a.wnext),(r-=i)?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},Vt={inflateReset:jt,inflateReset2:Lt,inflateResetKeep:Bt,inflateInit:function(e){return Pt(e,15)},inflateInit2:Pt,inflate:function(e,t){var n,r,i,a,s,o,l,u,h,c,f,d,v,_,w,p,m,Z,g,b,y,k,x,E,A=0,S=new Uint8Array(4),z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ut(e)||!e.output||!e.input&&0!==e.avail_in)return bt;(n=e.state).mode===zt&&(n.mode=Rt),s=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,o=e.avail_in,u=n.hold,h=n.bits,c=o,f=l,k=mt;e:for(;;)switch(n.mode){case At:if(0===n.wrap){n.mode=Rt;break}for(;h<16;){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}if(2&n.wrap&&35615===u){0===n.wbits&&(n.wbits=15),n.check=0,S[0]=255&u,S[1]=u>>>8&255,n.check=P(n.check,S,2,0),u=0,h=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=Mt;break}if((15&u)!==Et){e.msg="unknown compression method",n.mode=Mt;break}if(h-=4,y=8+(15&(u>>>=4)),0===n.wbits&&(n.wbits=y),y>15||y>n.wbits){e.msg="invalid window size",n.mode=Mt;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&u?16189:zt,u=0,h=0;break;case 16181:for(;h<16;){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}if(n.flags=u,(255&n.flags)!==Et){e.msg="unknown compression method",n.mode=Mt;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Mt;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&4&n.wrap&&(S[0]=255&u,S[1]=u>>>8&255,n.check=P(n.check,S,2,0)),u=0,h=0,n.mode=16182;case 16182:for(;h<32;){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}n.head&&(n.head.time=u),512&n.flags&&4&n.wrap&&(S[0]=255&u,S[1]=u>>>8&255,S[2]=u>>>16&255,S[3]=u>>>24&255,n.check=P(n.check,S,4,0)),u=0,h=0,n.mode=16183;case 16183:for(;h<16;){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&4&n.wrap&&(S[0]=255&u,S[1]=u>>>8&255,n.check=P(n.check,S,2,0)),u=0,h=0,n.mode=16184;case 16184:if(1024&n.flags){for(;h<16;){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&4&n.wrap&&(S[0]=255&u,S[1]=u>>>8&255,n.check=P(n.check,S,2,0)),u=0,h=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&((d=n.length)>o&&(d=o),d&&(n.head&&(y=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+d),y)),512&n.flags&&4&n.wrap&&(n.check=P(n.check,r,d,a)),o-=d,a+=d,n.length-=d),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===o)break e;d=0;do{y=r[a+d++],n.head&&y&&n.length<65536&&(n.head.name+=String.fromCharCode(y))}while(y&&d<o);if(512&n.flags&&4&n.wrap&&(n.check=P(n.check,r,d,a)),o-=d,a+=d,y)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===o)break e;d=0;do{y=r[a+d++],n.head&&y&&n.length<65536&&(n.head.comment+=String.fromCharCode(y))}while(y&&d<o);if(512&n.flags&&4&n.wrap&&(n.check=P(n.check,r,d,a)),o-=d,a+=d,y)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;h<16;){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}if(4&n.wrap&&u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Mt;break}u=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=zt;break;case 16189:for(;h<32;){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}e.adler=n.check=Ot(u),u=0,h=0,n.mode=St;case St:if(0===n.havedict)return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=u,n.bits=h,gt;e.adler=n.check=1,n.mode=zt;case zt:if(t===wt||t===pt)break e;case Rt:if(n.last){u>>>=7&h,h-=7&h,n.mode=Wt;break}for(;h<3;){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}switch(n.last=1&u,h-=1,3&(u>>>=1)){case 0:n.mode=16193;break;case 1:if(Yt(n),n.mode=Ct,t===pt){u>>>=2,h-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=Mt}u>>>=2,h-=2;break;case 16193:for(u>>>=7&h,h-=7&h;h<32;){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}if((65535&u)!==(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Mt;break}if(n.length=65535&u,u=0,h=0,n.mode=Dt,t===pt)break e;case Dt:n.mode=16195;case 16195:if(d=n.length){if(d>o&&(d=o),d>l&&(d=l),0===d)break e;i.set(r.subarray(a,a+d),s),o-=d,a+=d,l-=d,s+=d,n.length-=d;break}n.mode=zt;break;case 16196:for(;h<14;){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}if(n.nlen=257+(31&u),u>>>=5,h-=5,n.ndist=1+(31&u),u>>>=5,h-=5,n.ncode=4+(15&u),u>>>=4,h-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Mt;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;h<3;){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}n.lens[z[n.have++]]=7&u,u>>>=3,h-=3}for(;n.have<19;)n.lens[z[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,x={bits:n.lenbits},k=vt(0,n.lens,0,19,n.lencode,0,n.work,x),n.lenbits=x.bits,k){e.msg="invalid code lengths set",n.mode=Mt;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;p=(A=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,m=65535&A,!((w=A>>>24)<=h);){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}if(m<16)u>>>=w,h-=w,n.lens[n.have++]=m;else{if(16===m){for(E=w+2;h<E;){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}if(u>>>=w,h-=w,0===n.have){e.msg="invalid bit length repeat",n.mode=Mt;break}y=n.lens[n.have-1],d=3+(3&u),u>>>=2,h-=2}else if(17===m){for(E=w+3;h<E;){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}h-=w,y=0,d=3+(7&(u>>>=w)),u>>>=3,h-=3}else{for(E=w+7;h<E;){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}h-=w,y=0,d=11+(127&(u>>>=w)),u>>>=7,h-=7}if(n.have+d>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Mt;break}for(;d--;)n.lens[n.have++]=y}}if(n.mode===Mt)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Mt;break}if(n.lenbits=9,x={bits:n.lenbits},k=vt(1,n.lens,0,n.nlen,n.lencode,0,n.work,x),n.lenbits=x.bits,k){e.msg="invalid literal/lengths set",n.mode=Mt;break}if(n.distbits=6,n.distcode=n.distdyn,x={bits:n.distbits},k=vt(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,x),n.distbits=x.bits,k){e.msg="invalid distances set",n.mode=Mt;break}if(n.mode=Ct,t===pt)break e;case Ct:n.mode=Nt;case Nt:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=u,n.bits=h,lt(e,f),s=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,o=e.avail_in,u=n.hold,h=n.bits,n.mode===zt&&(n.back=-1);break}for(n.back=0;p=(A=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,m=65535&A,!((w=A>>>24)<=h);){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}if(p&&0===(240&p)){for(Z=w,g=p,b=m;p=(A=n.lencode[b+((u&(1<<Z+g)-1)>>Z)])>>>16&255,m=65535&A,!(Z+(w=A>>>24)<=h);){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}u>>>=Z,h-=Z,n.back+=Z}if(u>>>=w,h-=w,n.back+=w,n.length=m,0===p){n.mode=16205;break}if(32&p){n.back=-1,n.mode=zt;break}if(64&p){e.msg="invalid literal/length code",n.mode=Mt;break}n.extra=15&p,n.mode=16201;case 16201:if(n.extra){for(E=n.extra;h<E;){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;p=(A=n.distcode[u&(1<<n.distbits)-1])>>>16&255,m=65535&A,!((w=A>>>24)<=h);){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}if(0===(240&p)){for(Z=w,g=p,b=m;p=(A=n.distcode[b+((u&(1<<Z+g)-1)>>Z)])>>>16&255,m=65535&A,!(Z+(w=A>>>24)<=h);){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}u>>>=Z,h-=Z,n.back+=Z}if(u>>>=w,h-=w,n.back+=w,64&p){e.msg="invalid distance code",n.mode=Mt;break}n.offset=m,n.extra=15&p,n.mode=16203;case 16203:if(n.extra){for(E=n.extra;h<E;){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Mt;break}n.mode=16204;case 16204:if(0===l)break e;if(d=f-l,n.offset>d){if((d=n.offset-d)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Mt;break}d>n.wnext?(d-=n.wnext,v=n.wsize-d):v=n.wnext-d,d>n.length&&(d=n.length),_=n.window}else _=i,v=s-n.offset,d=n.length;d>l&&(d=l),l-=d,n.length-=d;do{i[s++]=_[v++]}while(--d);0===n.length&&(n.mode=Nt);break;case 16205:if(0===l)break e;i[s++]=n.length,l--,n.mode=Nt;break;case Wt:if(n.wrap){for(;h<32;){if(0===o)break e;o--,u|=r[a++]<<h,h+=8}if(f-=l,e.total_out+=f,n.total+=f,4&n.wrap&&f&&(e.adler=n.check=n.flags?P(n.check,i,f,s-f):j(n.check,i,f,s-f)),f=l,4&n.wrap&&(n.flags?u:Ot(u))!==n.check){e.msg="incorrect data check",n.mode=Mt;break}u=0,h=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;h<32;){if(0===o)break e;o--,u+=r[a++]<<h,h+=8}if(4&n.wrap&&u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Mt;break}u=0,h=0}n.mode=16208;case 16208:k=Zt;break e;case Mt:k=yt;break e;case 16210:return kt;default:return bt}return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=u,n.bits=h,(n.wsize||f!==e.avail_out&&n.mode<Mt&&(n.mode<Wt||t!==_t))&&Gt(e,e.output,e.next_out,f-e.avail_out),c-=e.avail_in,f-=e.avail_out,e.total_in+=c,e.total_out+=f,n.total+=f,4&n.wrap&&f&&(e.adler=n.check=n.flags?P(n.check,i,f,e.next_out-f):j(n.check,i,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===zt?128:0)+(n.mode===Ct||n.mode===Dt?256:0),(0===c&&0===f||t===_t)&&k===mt&&(k=xt),k},inflateEnd:function(e){if(Ut(e))return bt;var t=e.state;return t.window&&(t.window=null),e.state=null,mt},inflateGetHeader:function(e,t){if(Ut(e))return bt;var n=e.state;return 0===(2&n.wrap)?bt:(n.head=t,t.done=!1,mt)},inflateSetDictionary:function(e,t){var n,r=t.length;return Ut(e)||0!==(n=e.state).wrap&&n.mode!==St?bt:n.mode===St&&j(1,t,r,0)!==n.check?yt:Gt(e,t,r,r)?(n.mode=16210,kt):(n.havedict=1,mt)},inflateInfo:"pako inflate (from Nodeca project)"};var Kt=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},$t=Object.prototype.toString,Xt=Y.Z_NO_FLUSH,qt=Y.Z_FINISH,Jt=Y.Z_OK,Qt=Y.Z_STREAM_END,en=Y.Z_NEED_DICT,tn=Y.Z_STREAM_ERROR,nn=Y.Z_DATA_ERROR,rn=Y.Z_MEM_ERROR;function an(e){this.options=He.assign({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $e,this.strm.avail_out=0;var n=Vt.inflateInit2(this.strm,t.windowBits);if(n!==Jt)throw new Error(H[n]);if(this.header=new Kt,Vt.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=Ke.string2buf(t.dictionary):"[object ArrayBuffer]"===$t.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Vt.inflateSetDictionary(this.strm,t.dictionary))!==Jt))throw new Error(H[n])}function sn(e,t){var n=new an(t);if(n.push(e),n.err)throw n.msg||H[n.err];return n.result}an.prototype.push=function(e,t){var n,r,i,a=this.strm,s=this.options.chunkSize,o=this.options.dictionary;if(this.ended)return!1;for(r=t===~~t?t:!0===t?qt:Xt,"[object ArrayBuffer]"===$t.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(s),a.next_out=0,a.avail_out=s),(n=Vt.inflate(a,r))===en&&o&&((n=Vt.inflateSetDictionary(a,o))===Jt?n=Vt.inflate(a,r):n===nn&&(n=en));a.avail_in>0&&n===Qt&&a.state.wrap>0&&0!==e[a.next_in];)Vt.inflateReset(a),n=Vt.inflate(a,r);switch(n){case tn:case nn:case en:case rn:return this.onEnd(n),this.ended=!0,!1}if(i=a.avail_out,a.next_out&&(0===a.avail_out||n===Qt))if("string"===this.options.to){var l=Ke.utf8border(a.output,a.next_out),u=a.next_out-l,h=Ke.buf2string(a.output,l);a.next_out=u,a.avail_out=s-u,u&&a.output.set(a.output.subarray(l,l+u),0),this.onData(h)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(n!==Jt||0!==i){if(n===Qt)return n=Vt.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},an.prototype.onData=function(e){this.chunks.push(e)},an.prototype.onEnd=function(e){e===Jt&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=He.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var on={Inflate:an,inflate:sn,inflateRaw:function(e,t){return(t=t||{}).raw=!0,sn(e,t)},ungzip:sn,constants:Y},ln=on.Inflate,un=on.inflate,hn=on.ungzip,cn=ln,fn=un,dn=hn},5941:function(e,t,n){n.d(t,{NC:function(){return i},Yd:function(){return a},xW:function(){return s}});var r=n(8782);function i(e,t){r.RE((function(n){return n.FS.writeFile(e,t)}))}function a(e){r.RE((function(t){return t.FS.unlink(e)}))}function s(e){return r.RE((function(t){return t.FS.analyzePath(e).exists}))}},489:function(e,t,n){n.d(t,{NC:function(){return i},Yd:function(){return a},xW:function(){return s}});var r=n(5941);function i(e,t){r.NC(e,t)}function a(e){s(e)&&r.Yd(e)}function s(e){return r.xW(e)}},6126:function(e,t,n){n.d(t,{Fv:function(){return N},pT:function(){return M}});var r=n(2415),i=n(7326),a=n(136),s=n(9388),o=n(3324),l=n(5671),u=n(3144),h=n(101),c=n(2346),f=n(3889),d=n(8916),v=n(2793),_=n(7762),w=n(6635),p=n(8782),m=n(6774);function Z(e,t){if(t.length>0){var n=t.reduce((function(e,t){return e*t}));if(e.length!=n)throw new Error("length of 'x' must be equal to the product of 'shape'")}else if(e instanceof Array||ArrayBuffer.isView(e)){if(1!=e.length)throw new Error("length of 'x' should be 1 for a scalar dataset")}else e=[e];return e}function g(e,t){return null===t?"string"==typeof e||"number"==typeof e?(e=[e],t=[]):t=[e.length]:e=Z(e,t),{x:e,shape:t}}function b(e){if(Array.isArray(e)){var t,n=(0,_.Z)(e);try{for(n.s();!(t=n.n()).done;){if("string"===typeof t.value)throw new Error("'x' should not contain any strings for a non-string HDF5 dataset")}}catch(r){n.e(r)}finally{n.f()}}}function y(e){var t=0;return e.array().forEach((function(e){t<e&&(t=e)})),t}var k=new WeakMap,x=new WeakMap,E=new WeakMap,A=new WeakSet,S=function(){function e(t,n){(0,l.Z)(this,e),(0,h.Z)(this,A),(0,c.Z)(this,k,{writable:!0,value:void 0}),(0,c.Z)(this,x,{writable:!0,value:void 0}),(0,c.Z)(this,E,{writable:!0,value:void 0}),(0,v.Z)(this,k,t),(0,v.Z)(this,x,n)}return(0,u.Z)(e,[{key:"file",get:function(){return(0,d.Z)(this,k)}},{key:"name",get:function(){return(0,d.Z)(this,x)}},{key:"attributes",get:function(){return(0,d.Z)(this,E)}},{key:"set_attributes",value:function(e){(0,v.Z)(this,E,e)}},{key:"readAttribute",value:function(e){var t,n,r=this,i=p.RE((function(t){return new t.LoadedH5Attr(r.file,r.name,e)}));try{n=Array.from(i.shape());var a=i.type();if("other"==a)throw new Error("cannot load dataset for an unsupported type");t="String"==a?m.b(i.values(),i.lengths()):i.values().slice()}finally{i.delete()}return{values:t,shape:n}}},{key:"writeAttribute",value:function(e,t,n,r){var i=this,a=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).maxStringLength,s=void 0===a?null:a;if(null===r)throw new Error("cannot write 'null' to HDF5");var l=g(r,n);if(r=l.x,n=l.shape,"String"==t){var u=m.C(r),h=(0,o.Z)(u,2),c=h[0],d=h[1];try{null==s&&(s=y(c)),(0,f.Z)(this,A,z).call(this,e,t,n,{maxStringLength:s}),p.RE((function(t){return t.write_string_hdf5_attribute(i.file,i.name,e,c.length,c.offset,d.offset)}))}finally{w.gd(d),w.gd(c)}}else{b(r);var v=w.de(r,null);try{(0,f.Z)(this,A,z).call(this,e,t,n),p.RE((function(t){return t.write_numeric_hdf5_attribute(i.file,i.name,e,v.constructor.className,v.offset)}))}finally{v.free()}}}}]),e}();function z(e,t,n){var r=this,i=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).maxStringLength,a=void 0===i?10:i,s=w.de(n,"Int32WasmArray");try{p.RE((function(n){return n.create_hdf5_attribute(r.file,r.name,e,t,s.length,s.offset,a)})),(0,d.Z)(this,E).push(e)}finally{s.free()}}var R=new WeakMap,D=new WeakMap,C=new WeakSet,N=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,r){var a,s=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).newlyCreated,o=void 0!==s&&s;if((0,l.Z)(this,n),a=t.call(this,e,r),(0,h.Z)((0,i.Z)(a),C),(0,c.Z)((0,i.Z)(a),R,{writable:!0,value:void 0}),(0,c.Z)((0,i.Z)(a),D,{writable:!0,value:void 0}),o)(0,v.Z)((0,i.Z)(a),R,{}),a.set_attributes([]);else{var u=p.RE((function(t){return new t.H5GroupDetails(e,r)}));try{var f=m.b(u.child_buffer(),u.child_lengths()),_=u.child_types(),w=["Group","DataSet","Other"];(0,v.Z)((0,i.Z)(a),R,{});for(var Z=0;Z<f.length;Z++)(0,d.Z)((0,i.Z)(a),R)[f[Z]]=w[_[Z]];var g=m.b(u.attr_buffer(),u.attr_lengths());a.set_attributes(g)}finally{u.delete()}}return a}return(0,u.Z)(n,[{key:"children",get:function(){return(0,d.Z)(this,R)}},{key:"open",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,f.Z)(this,C,W).call(this,e);if(e in(0,d.Z)(this,R)){if("Group"==(0,d.Z)(this,R)[e])return new n(this.file,r,t);if("DataSet"==(0,d.Z)(this,R)[e])return new U(this.file,r,t);throw new Error("don't know how to open '"+e+"'")}throw new Error("no '"+e+"' child in this HDF5 Group")}},{key:"createGroup",value:function(e){var t=this,r=(0,f.Z)(this,C,W).call(this,e);if(e in this.children){if("Group"==this.children[e])return new n(this.file,r);throw new Error("existing child '"+r+"' is not a HDF5 group")}return p.RE((function(e){return e.create_hdf5_group(t.file,r)})),this.children[e]="Group",new n(this.file,r,{newlyCreated:!0})}},{key:"createDataSet",value:function(e,t,n){var r,i,a=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=s.maxStringLength,l=void 0===o?10:o,u=s.compression,h=void 0===u?6:u,c=s.chunks,d=void 0===c?null:c,v=(0,f.Z)(this,C,W).call(this,e);try{var _=(r=w.de(n,"Int32WasmArray")).offset;if(null!==d){if((i=w.de(d,"Int32WasmArray")).length!=r.length)throw new Error("'chunks' and 'shape' should have the same dimensions");_=i.offset}p.RE((function(e){return e.create_hdf5_dataset(a.file,v,t,r.length,r.offset,l,h,_)}))}finally{r.free()}return this.children[e]="DataSet",new U(this.file,v,{newlyCreated:!0,type:t,shape:n})}},{key:"writeDataSet",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=i.compression,s=void 0===a?6:a,l=i.chunks,u=void 0===l?null:l,h=i.cache,c=void 0!==h&&h;if(null===r)throw new Error("cannot write 'null' to HDF5");var f,d=g(r,n);if(r=d.x,n=d.shape,"String"==t){var v=m.C(r),_=(0,o.Z)(v,2),Z=_[0],b=_[1];try{var k=y(Z);f=this.createDataSet(e,"String",n,{maxStringLength:k,compression:s,chunks:u}),p.RE((function(e){return e.write_string_hdf5_dataset(f.file,f.name,Z.length,Z.offset,b.offset)}))}finally{w.gd(Z),w.gd(b)}f.cache_loaded(r,c)}else(f=this.createDataSet(e,t,n,{compression:s,chunks:u})).write(r,{cache:c});return f}}]),n}(S);function W(e){var t=this.name;return"/"!=t&&(t+="/"),t+=e}var M=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.Z)(this,n),t.call(this,e,"/",r)}return(0,u.Z)(n)}(N);var O=new WeakMap,I=new WeakMap,F=new WeakMap,T=new WeakMap,U=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,a){var s,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=o.load,h=void 0!==u&&u,f=o.newlyCreated,d=void 0!==f&&f,_=o.shape,w=void 0===_?null:_,Z=o.type,g=void 0===Z?null:Z,b=o.values,y=void 0===b?null:b;if((0,l.Z)(this,n),s=t.call(this,e,a),(0,c.Z)((0,i.Z)(s),O,{writable:!0,value:void 0}),(0,c.Z)((0,i.Z)(s),I,{writable:!0,value:void 0}),(0,c.Z)((0,i.Z)(s),F,{writable:!0,value:void 0}),(0,c.Z)((0,i.Z)(s),T,{writable:!0,value:void 0}),d){if(null===w||null===g)throw new Error("need to pass 'shape' and 'type' if 'newlyCreated = true'");(0,v.Z)((0,i.Z)(s),O,w),(0,v.Z)((0,i.Z)(s),I,g),(0,v.Z)((0,i.Z)(s),F,y),(0,v.Z)((0,i.Z)(s),T,null!==y),s.set_attributes([])}else{if(h){var k=(0,r.Z)(n,n,B).call(n,e,a);(0,v.Z)((0,i.Z)(s),I,k.type),(0,v.Z)((0,i.Z)(s),O,k.shape),(0,v.Z)((0,i.Z)(s),F,k.values),s.set_attributes(k.attributes)}else{var x=p.RE((function(t){return new t.H5DataSetDetails(e,a)}));try{(0,v.Z)((0,i.Z)(s),I,x.type()),(0,v.Z)((0,i.Z)(s),O,Array.from(x.shape())),(0,v.Z)((0,i.Z)(s),F,null),s.set_attributes(m.b(x.attr_buffer(),x.attr_lengths()))}finally{x.delete()}}(0,v.Z)((0,i.Z)(s),T,h)}return s}return(0,u.Z)(n,[{key:"type",get:function(){return(0,d.Z)(this,I)}},{key:"shape",get:function(){return(0,d.Z)(this,O)}},{key:"loaded",get:function(){return(0,d.Z)(this,T)}},{key:"values",get:function(){return(0,d.Z)(this,F)}},{key:"load",value:function(){if(!(0,d.Z)(this,T)){var e=(0,r.Z)(n,n,B).call(n,this.file,this.name);(0,v.Z)(this,F,e.values),(0,v.Z)(this,T,!0)}return(0,d.Z)(this,F)}},{key:"cache_loaded",value:function(e,t){t?((0,v.Z)(this,F,e.slice()),(0,v.Z)(this,T,!0)):((0,v.Z)(this,T,!1),(0,v.Z)(this,F,null))}},{key:"write",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cache,r=void 0!==n&&n;if(null===e)throw new Error("cannot write 'null' to HDF5");if(e=Z(e,this.shape),"String"==this.type){var i=m.C(e),a=(0,o.Z)(i,2),s=a[0],l=a[1];try{p.RE((function(e){return e.write_string_hdf5_dataset(t.file,t.name,s.length,s.offset,l.offset)}))}finally{w.gd(l),w.gd(s)}this.cache_loaded(e,r)}else{b(e);var u=w.de(e,null);try{p.RE((function(e){return e.write_numeric_hdf5_dataset(t.file,t.name,u.constructor.className,u.offset)})),this.cache_loaded(u,r)}finally{u.free()}}}}]),n}(S);function B(e,t){var n,r,i,a,s=p.RE((function(n){return new n.LoadedH5DataSet(e,t)}));try{if("other"==(r=s.type()))throw new Error("cannot load dataset for an unsupported type");n="String"==r?m.b(s.values(),s.lengths()):s.values().slice(),i=Array.from(s.shape()),a=m.b(s.attr_buffer(),s.attr_lengths())}finally{s.delete()}return{values:n,type:r,shape:i,attributes:a}}},5831:function(e,t,n){n.d(t,{$H:function(){return I.$},BA:function(){return s.BA},Bp:function(){return a.Bp},Bs:function(){return W.B},Cb:function(){return g.C},D4:function(){return u.D4},D6:function(){return s.D6},DS:function(){return u.DS},EF:function(){return a.EF},F5:function(){return R.F},Fu:function(){return E.Fu},Fv:function(){return o.Fv},II:function(){return s.II},J4:function(){return _.J4},KV:function(){return c.KV},Lw:function(){return w.Lw},N6:function(){return a.N6},Os:function(){return N.Os},Qj:function(){return N.Qj},RJ:function(){return i.RJ},SV:function(){return s.SV},St:function(){return N.St},TS:function(){return i.TS},Tk:function(){return S.Tk},VU:function(){return O.V},Wf:function(){return i.Wf},XU:function(){return m.XU},Y8:function(){return k.Y},Yh:function(){return h.Y},ZI:function(){return A.ZI},ZW:function(){return f.ZW},_3:function(){return a._3},aG:function(){return x.dO},bD:function(){return A.bD},b_:function(){return Z.b},eu:function(){return z.eu},fw:function(){return u.fw},gd:function(){return i.gd},gk:function(){return b.g},gn:function(){return l.g},j2:function(){return r.j2},j4:function(){return u.j4},jX:function(){return D.j},nO:function(){return p.nO},p$:function(){return s.p$},pG:function(){return N.pG},pT:function(){return o.pT},qu:function(){return s.qu},rY:function(){return y.rY},tY:function(){return N.tY},us:function(){return a.us},v_:function(){return b.v},vc:function(){return f.vc},vy:function(){return v.dH},wf:function(){return E.wf},wj:function(){return d.wj},xw:function(){return M.x},y5:function(){return C.y5}});var r=n(8782),i=n(6635),a=n(8311),s=n(6663),o=(n(489),n(6126)),l=(n(118),n(2284)),u=n(5644),h=n(4292),c=n(5470),f=n(1196),d=(n(5219),n(5448)),v=n(9206),_=n(2945),w=n(7339),p=n(6757),m=n(4609),Z=n(8420),g=(n(845),n(9283),n(6974)),b=n(1184),y=n(4812),k=n(6199),x=n(5159),E=n(7067),A=n(9273),S=n(4181),z=(n(5319),n(2494)),R=n(5696),D=n(2732),C=n(9249),N=n(3779),W=n(7039),M=n(5538),O=(n(7644),n(2306),n(4021)),I=n(4755)},4755:function(e,t,n){n.d(t,{$:function(){return a}});var r=n(489),i=n(3102);function a(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).extension,n=void 0===t?"":t;if("string"==typeof e)return i.z(e);var a=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).extension,t=void 0===e?"":e;return i.E("temp_",t)}({extension:n});return r.NC(a,e),{path:a,flush:function(){return r.Yd(a)}}}},118:function(e,t,n){n(6126),n(8782)}}]);
//# sourceMappingURL=377.676821c7.chunk.js.map