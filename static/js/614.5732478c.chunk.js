!function(){"use strict";var e={5614:function(e,t,n){var r,s,a=n(5861),o=n(7757),c=n.n(o),u=n(5788),i=n(7762),l=null;function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t&&(t=r.result.transaction(["analysis_meta"],"readonly").objectStore("analysis_meta"));var n=t.getAll();n.onsuccess=function(){var t=n.result;t.forEach((function(e){delete e.files})),e(t)},n.onerror=function(){e(null)}}function p(e,t){return d.apply(this,arguments)}function d(){return(d=(0,a.Z)(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=n.get(t);r.onsuccess=function(){void 0!==r.result?e(r.result):e(null)},r.onerror=function(){e(null)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return Promise.allSettled(e).then((function(e){var t,n=(0,i.Z)(e);try{for(n.s();!(t=n.n()).done;){if(!t.value)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}))}function h(){return y.apply(this,arguments)}function y(){return(y=(0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:return e.abrupt("return",new Promise((function(e){f(e)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)(c().mark((function e(t,n){var s,a,o,u,i,f,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:return s=r.result.transaction(["file","file_meta"],"readwrite"),a=s.objectStore("file"),o=s.objectStore("file_meta"),e.next=7,p(t,o);case 7:return u=e.sent,i=null===u?0:u.count,i++,f=new Promise((function(e){var r=a.put({id:t,payload:n});r.onsuccess=function(t){e(!0)},r.onerror=function(t){e(!1)}})),d=new Promise((function(e){u.count=i;var t=o.put(u);t.onsuccess=function(t){e(!0)},t.onerror=function(t){e(!1)}})),e.abrupt("return",m([f,d]));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t,n,r){return g.apply(this,arguments)}function g(){return(g=(0,a.Z)(c().mark((function e(t,n,s,a){var o,u,i,p,d,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:if(o=r.result.transaction(["analysis","analysis_meta"],"readwrite"),u=o.objectStore("analysis"),i=o.objectStore("analysis_meta"),null!=t){e.next=10;break}return e.next=8,new Promise((function(e){return f(e,i)}));case 8:p=e.sent,t=String(p.length);case 10:return d=new Promise((function(e){var r=u.put({id:t,payload:n});r.onsuccess=function(t){e(!0)},r.onerror=function(t){e(!1)}})),h=new Promise((function(e){var n=i.put({id:t,files:s,time:Number(new Date),title:a});n.onsuccess=function(t){e(!0)},n.onerror=function(t){e(!1)}})),e.next=14,m([d,h]);case 14:if(!e.sent){e.next=18;break}return e.abrupt("return",t);case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=(0,a.Z)(c().mark((function e(t){var n,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:return n=r.result.transaction(["file"],"readonly").objectStore("file"),e.next=5,p(t,n);case 5:return s=e.sent,e.abrupt("return",s.payload);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=(0,a.Z)(c().mark((function e(t){var n,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:return n=r.result.transaction(["analysis"],"readonly").objectStore("analysis"),e.next=5,p(t,n);case 5:return s=e.sent,e.abrupt("return",s.payload);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return S.apply(this,arguments)}function S(){return(S=(0,a.Z)(c().mark((function e(t){var n,s,a,o,u,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:return n=r.result.transaction(["file","file_meta"],"readwrite"),s=n.objectStore("file"),a=n.objectStore("file_meta"),e.next=7,p(t,a);case 7:return o=e.sent,u=o.count,u--,i=[],0==u?(i.push(new Promise((function(e){var n=s.remove(t);n.onerror=function(t){e(!1)},n.onsuccess=function(t){e(!0)}}))),i.push(new Promise((function(e){var n=a.delete(t);n.onerror=function(t){e(!1)},n.onsuccess=function(t){e(!0)}})))):i.push(new Promise((function(e){o.count=u;var t=a.put(o);t.onsuccess=function(t){e(!0)},t.onerror=function(t){e(!1)}}))),e.abrupt("return",m(i));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=(0,a.Z)(c().mark((function e(t){var n,s,a,o,u,f,d,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:return n=r.result.transaction(["analysis","analysis_meta"],"readwrite"),s=n.objectStore("analysis"),a=n.objectStore("analysis_meta"),(o=[]).push(new Promise((function(e){var n=s.delete(t);n.onsuccess=function(t){e(!0)},n.onerror=function(t){e(!1)}}))),e.next=9,p(t,a);case 9:u=e.sent,f=(0,i.Z)(u.files);try{for(f.s();!(d=f.n()).done;)h=d.value,o.push(k(h))}catch(c){f.e(c)}finally{f.f()}return o.push(new Promise((function(e){var n=a.delete(t);n.onsuccess=function(t){e(!0)},n.onerror=function(t){e(!1)}}))),e.abrupt("return",m(o));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=null;function M(e){return j.apply(this,arguments)}function j(){return j=(0,a.Z)(c().mark((function e(t){var n,r,a,o,u,i,l,f,p,d,m,h,y=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y.length>1&&void 0!==y[1]?y[1]:null,r=y.length>2&&void 0!==y[2]&&y[2],e.next=4,O;case 4:if(r){e.next=13;break}return a=s.result.transaction(["downloads"],"readonly"),o=a.objectStore("downloads"),u=new Promise((function(e){var n=o.get(t);n.onsuccess=function(t){void 0!==n.result?e(n.result.payload):e(null)},n.onerror=function(t){e(null)}})),e.next=10,u;case 10:if(null===(i=e.sent)){e.next=13;break}return e.abrupt("return",i);case 13:return l=null==n?fetch(t):fetch(t,n),e.next=16,l;case 16:if((f=e.sent).ok){e.next=19;break}throw"failed to download '"+t+"' ("+f.status+")";case 19:return e.next=21,f.arrayBuffer();case 21:return p=e.sent,d=s.result.transaction(["downloads"],"readwrite"),m=d.objectStore("downloads"),h=new Promise((function(e){var n=m.put({url:t,payload:p});n.onsuccess=function(t){e(!0)},n.onerror=function(t){e(!1)}})),e.next=27,h;case 27:if(e.sent){e.next=30;break}throw"failed to download resources for '"+t+"'";case 30:return e.abrupt("return",p);case 31:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}var R=n(8109),P=n(3324),D={quality_control:{use_mito_default:["qc","qc-usemitodefault"],mito_prefix:["qc","qc-mito"],nmads:["qc","qc-nmads"],skip:["qc","skip"]},adt_quality_control:{nmads:["adt_qualitycontrol","nmads"],min_detected_drop:["adt_qualitycontrol","min_detected_drop"],igg_prefix:["adt_qualitycontrol","igg_prefix"],skip:["adt_qualitycontrol","skip"]},adt_normalization:{num_pcs:["adt_normalization","num_pcs"],num_clusters:["adt_normalization","num_clusters"]},feature_selection:{span:["fSelection","fsel-span"]},pca:{num_hvgs:["pca","pca-hvg"],num_pcs:["pca","pca-npc"]},adt_pca:{num_pcs:["adt_pca","num_pcs"]},combine_embeddings:{weights:["combine_embeddings","weights"]},batch_correction:{num_neighbors:["batch_correction","num_neighbors"]},choose_clustering:{method:["cluster","clus-method"]},tsne:{perplexity:["tsne","tsne-perp"],iterations:["tsne","tsne-iter"],animate:["tsne","animate"]},umap:{num_neighbors:["umap","umap-nn"],num_epochs:["umap","umap-epochs"],min_dist:["umap","umap-min_dist"],animate:["umap","animate"]},kmeans_cluster:{k:["cluster","kmeans-k"]},snn_graph_cluster:{k:["cluster","clus-k"],scheme:["cluster","clus-scheme"],resolution:["cluster","clus-res"]},cell_labelling:{human_references:["annotateCells","annotateCells-human_references"],mouse_references:["annotateCells","annotateCells-mouse_references"]}};function T(e){for(var t=function(t,n){if(!(t in e))throw new Error("no available step '"+t+"' in the supplied parameters");var r=e[t];if(!(n in r))throw new Error("no available parameter '"+n+"' in step '"+t+"'");return r[n]},n={inputs:{batch:t("inputs","sample_factor"),subset:t("inputs","subset")}},r=0,s=Object.entries(D);r<s.length;r++)for(var a=(0,P.Z)(s[r],2),o=a[0],c=a[1],i=0,l=Object.entries(c);i<l.length;i++){var f=(0,P.Z)(l[i],2),p=f[0],d=f[1];d[0]in n||(n[d[0]]={});var m=n[d[0]];if(d[1]in m)throw new Error("duplicate entry for parameter '"+d[0]+"."+d[1]+"'");m[d[1]]=t(o,p)}return n.batch_correction.method=u.us(e),n.ann={approximate:u.Ol(e)},null===n.combine_embeddings.weights&&(n.combine_embeddings.weights={}),n}function C(e,t){if(e)if(Array.isArray(e)){var n,r=(0,i.Z)(e);try{for(r.s();!(n=r.n()).done;){C(n.value,t)}}catch(c){r.e(c)}finally{r.f()}}else if(e.constructor==Object)for(var s=0,a=Object.entries(e);s<a.length;s++){var o=(0,P.Z)(a[s],2);o[0];C(o[1],t)}else if(ArrayBuffer.isView(e)){if(!(e.buffer instanceof ArrayBuffer))throw"only ArrayBuffers should be in the message payload";t.push(e.buffer)}}function A(e){postMessage({type:"".concat(e,"_START")})}function B(e,t){if("undefined"==typeof t)postMessage({type:"".concat(e,"_CACHE")});else{var n=[];C(t,n),postMessage({type:"".concat(e,"_DATA"),resp:t},n)}}function Z(e,t,n){postMessage({type:"".concat(e,"_ERROR"),resp:{reason:t.toString(),fatal:n}})}var F,N=n(2287),K=n(6453),z=null;function I(e){return function(){var t=(0,a.Z)(c().mark((function t(n,r,s){var a,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.FB(new Uint8Array(s));case 2:return a=t.sent,o=n+"_"+r+"_"+s.byteLength+"_"+a,t.next=6,v(o,s);case 6:if(t.sent){t.next=9;break}throw"failed to save file '"+o+"' to KanaDB";case 9:return e.push(o),t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}function U(e){return G.apply(this,arguments)}function G(){return(G=(0,a.Z)(c().mark((function e(t){var n,r,s,a,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="serialized_in.h5",r=[],s=u.rF(I(r)),e.prev=3,e.next=6,u.cN(z,n,{embedded:t});case 6:o=e.sent,a=t?u.pY(n,o.collected):{state:u.pY(n,null),files:o};case 8:return e.prev=8,u.t(n),u.rF(s),e.finish(8);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,null,[[3,,8,12]])})))).apply(this,arguments)}function q(e){return V.apply(this,arguments)}function V(){return(V=(0,a.Z)(c().mark((function e(t){var n,r,s,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="serialized_out.h5",e.prev=1,e.next=4,u.ve(t,n);case 4:return s=e.sent,e.next=7,u.MM(n,s,{finishFun:B});case 7:if(a=e.sent,null===z){e.next=11;break}return e.next=11,u.Sl(z);case 11:z=a,r={parameters:T(u.G8(z)),other:{custom_selections:z.custom_selections.fetchSelections()}},console.log(r.other.custom_selections);case 14:return e.prev=14,u.t(n),e.finish(14);case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}}),e,null,[[1,,14,17]])})))).apply(this,arguments)}u.v9(M),N.n((function(e){return M("https://cors-proxy.aaron-lun.workers.dev/"+encodeURIComponent(e))})),u.cO.ExperimentHub=K,u.$p((function(e,t,n,r){postMessage({type:e+"_iter",x:t,y:n,iteration:r},[t.buffer,n.buffer])})),u.ED((function(e){return w.apply(this,arguments)})),onmessage=function(e){var t=e.data,n=t.type,o=t.payload,i=!1;if("INIT"==n){i=!0;var p=Math.round(2*navigator.hardwareConcurrency/3),d=u.j2({numberOfThreads:p}),m=d.then((function(){return u.TN()}));m.then((function(e){z=e,postMessage({type:n,msg:"Success: analysis state created"})}));var y=l=new Promise((function(e){(r=indexedDB.open("KanaDB",2)).onupgradeneeded=function(e){var t=e.target.result;try{t.deleteObjectStore("analysis")}catch(e){}try{t.deleteObjectStore("analysis_meta")}catch(e){}try{t.deleteObjectStore("file")}catch(e){}try{t.deleteObjectStore("file_meta")}catch(e){}t.createObjectStore("analysis",{keyPath:"id"}),t.createObjectStore("analysis_meta",{keyPath:"id"}),t.createObjectStore("file",{keyPath:"id"}),t.createObjectStore("file_meta",{keyPath:"id"})},r.onsuccess=function(){f(e)},r.onerror=function(){e(null)}}));y.then((function(e){null!==e?postMessage({type:"KanaDB_store",resp:e,msg:"Success: KanaDB initialized"}):(console.error(error),postMessage({type:"KanaDB_ERROR",msg:"Error: Cannot initialize KanaDB"}))}));var v=(null===O&&(O=new Promise((function(e,t){(s=indexedDB.open("DownloadsDB",3)).onupgradeneeded=function(e){var t=e.target.result;try{t.deleteObjectStore("downloads")}catch(e){}t.createObjectStore("downloads",{keyPath:"url"})},s.onsuccess=function(){e(null)},s.onerror=function(){t("failed to initialize DownloadsDB")}}))),O);v.then((function(e){postMessage({type:"DownloadsDB_store",resp:e,msg:"Success: DownloadsDB initialized"})})).catch((function(e){console.error(e),postMessage({type:"DownloadsDB_ERROR",msg:"Error: Cannot initialize DownloadsDB"})}));try{var b=K.availableDatasets();postMessage({type:"ExperimentHub_store",resp:b,msg:"Success: ExperimentHub initialized"})}catch(M){postMessage({type:"ExperimentHub_ERROR",msg:"Error: Cannot access datasets in ExperimentHub"})}(F=Promise.all([d,y,v,m])).then((function(){postMessage({type:n,msg:"Success: bakana initialized"})})).catch((function(e){console.error(e),Z(n,e,i)}))}else if("RUN"==n)i=!0,F.then((function(e){var t=o.inputs,r=function(e,t){var n=u.Q7(),r=function(e,t,r){if("undefined"==typeof r)throw new Error("cannot assign undefined parameter to '"+e+"."+t+"'");if(!(e in n))throw new Error("unknown analysis step '"+e+"'");var s=n[e];if(!(t in s))throw new Error("unknown analysis parameter '"+t+"' for step '"+e+"'");s[t]=r};r("inputs","sample_factor",e.batch),r("inputs","subset",e.subset);for(var s=0,a=Object.entries(D);s<a.length;s++)for(var o=(0,P.Z)(a[s],2),c=o[0],i=o[1],l=0,f=Object.entries(i);l<f.length;l++){var p=(0,P.Z)(f[l],2),d=p[0],m=p[1];r(c,d,t[m[0]][m[1]])}return u.TD(n,t.batch_correction.method),u.bN(n,t.ann.approximate),null!==n.combine_embeddings.weights&&new Set(Object.values(n.combine_embeddings.weights)).size<=1&&(n.combine_embeddings.weights=null),n}(t,o.params);u.x6(z,t.files,r,{startFun:A,finishFun:B}).catch((function(e){console.error(e),Z(n,e,i)}))})).catch((function(e){console.error(e),Z(n,e,i)}));else if("LOAD"==n){i=!0;var g=o.inputs.files;if("kana"==g[Object.keys(g)[0]].format){var w=g[Object.keys(g)[0]].file;F.then(function(){var e=(0,a.Z)(c().mark((function e(t){var n,r,s,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FileReaderSync,r=n.readAsArrayBuffer(w),e.next=4,q(r);case 4:s=e.sent,a=[],C(s.other,a),postMessage({type:"loadedParameters",resp:s},a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),Z(n,e,i)}))}else if("kanadb"==g[Object.keys(g)[0]].format){(function(e){return x.apply(this,arguments)})(S=g[Object.keys(g)[0]].file).then(function(){var e=(0,a.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=4;break}postMessage({type:"KanaDB_ERROR",msg:"Fail: cannot load analysis ID '".concat(S,"'")}),e.next=10;break;case 4:return e.next=6,q(t);case 6:n=e.sent,r=[],C(n.other,r),postMessage({type:"loadedParameters",resp:n},r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),Z(n,e,i)}))}}else if("EXPORT"==n)F.then(function(){var e=(0,a.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(!0);case 2:n=e.sent,postMessage({type:"exportState",resp:n,msg:"Success: application state exported"},[n]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),Z(n,e,i)}));else if("SAVEKDB"==n){var k=o.title;F.then(function(){var e=(0,a.Z)(c().mark((function e(t){var n,r,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(!1);case 2:return n=e.sent,e.next=5,_(null,n.state,n.files,k);case 5:if(null===(r=e.sent)){e.next=13;break}return e.next=9,h();case 9:s=e.sent,postMessage({type:"KanaDB_store",resp:s,msg:"Success: Saved analysis to cache (".concat(r,")")}),e.next=15;break;case 13:console.error(error),postMessage({type:"KanaDB_ERROR",msg:"Fail: Cannot save analysis to cache"});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),Z(n,e,i)}))}else if("REMOVEKDB"==n){var S;(function(e){return E.apply(this,arguments)})(S=o.id).then(function(){var e=(0,a.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,h();case 3:n=e.sent,postMessage({type:"KanaDB_store",resp:n,msg:"Success: Removed file from cache (".concat(S,")")}),e.next=9;break;case 7:console.error(error),postMessage({type:"KanaDB_ERROR",msg:"fail: cannot remove file from cache (".concat(S,")")});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),Z(n,e,i)}))}else"PREFLIGHT_INPUT"==n?F.then(function(){var e=(0,a.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,n.status="SUCCESS",e.next=5,u.gj(o.inputs.files);case 5:n.details=e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n.status="ERROR",n.reason=e.t0.toString();case 12:postMessage({type:"PREFLIGHT_INPUT_DATA",resp:n,msg:"Success: PREFLIGHT_INPUT done"});case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),Z(n,e,i)})):"computeVersusClusters"==n?F.then((function(e){var t=o.rank_type.replace(/-.*/,""),n=z.marker_detection.computeVersus(o.left,o.right,t,o.modality);postMessage({type:"computeVersusClusters",resp:n,msg:"Success: COMPUTE_VERSUS_CLUSTERS done"})})).catch((function(e){console.error(e),Z(n,e,i)})):"computeVersusSelections"==n?F.then((function(e){var t=o.rank_type.replace(/-.*/,""),n=z.custom_selections.computeVersus(o.left,o.right,t,o.modality);postMessage({type:"computeVersusSelections",resp:n,msg:"Success: COMPUTE_VERSUS_SELECTIONS done"})})).catch((function(e){console.error(e),Z(n,e,i)})):"getMarkersForCluster"==n?F.then((function(e){var t=o.cluster,n=o.rank_type,r=o.modality,s=z.marker_detection.fetchGroupResults(t,n,r),a=[];C(s,a),postMessage({type:"setMarkersForCluster",resp:s,msg:"Success: GET_MARKER_GENE done"},a)})).catch((function(e){console.error(e),Z(n,e,i)})):"getGeneExpression"==n?F.then((function(e){var t,n=o.gene,r=o.modality.toLowerCase();if("rna"===r)t=z.normalization.fetchExpression(n);else{if("adt"!==r)throw new Error("unknown feature type '"+r+"'");t=z.adt_normalization.fetchExpression(n)}postMessage({type:"setGeneExpression",resp:{gene:n,expr:t},msg:"Success: GET_GENE_EXPRESSION done"},[t.buffer])})).catch((function(e){console.error(e),Z(n,e,i)})):"computeCustomMarkers"==n?F.then((function(e){z.custom_selections.addSelection(o.id,o.selection),postMessage({type:"computeCustomMarkers",msg:"Success: COMPUTE_CUSTOM_MARKERS done"})})).catch((function(e){console.error(e),Z(n,e,i)})):"getMarkersForSelection"==n?F.then((function(e){var t=o.rank_type.replace(/-.*/,""),n=z.custom_selections.fetchResults(o.cluster,t,o.modality),r=[];C(n,r),postMessage({type:"setMarkersForCustomSelection",resp:n,msg:"Success: GET_MARKER_GENE done"},r)})).catch((function(e){console.error(e),Z(n,e,i)})):"removeCustomMarkers"==n?F.then((function(e){z.custom_selections.removeSelection(o.id)})).catch((function(e){console.error(e),Z(n,e,i)})):"animateTSNE"==n?F.then(function(){var e=(0,a.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.tsne.animate();case 2:return e.t0=B,e.next=5,z.tsne.summary();case 5:e.t1=e.sent,(0,e.t0)("tsne",e.t1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),Z(n,e,i)})):"animateUMAP"==n?F.then(function(){var e=(0,a.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.umap.animate();case 2:return e.t0=B,e.next=5,z.umap.summary();case 5:e.t1=e.sent,(0,e.t0)("umap",e.t1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),Z(n,e,i)})):"getAnnotation"==n?F.then((function(e){var t,n,r=o.annotation;if(t=!1!==o.unfiltered?z.cell_filtering.fetchFilteredAnnotations(r):z.inputs.fetchAnnotations(r),ArrayBuffer.isView(t))n={type:"array",values:t.slice()};else{var s=[],a={},c=new Int32Array(t.length);t.map((function(e,t){e in a||(a[e]=s.length,s.push(e)),c[t]=a[e]})),n={type:"factor",index:c,levels:s}}var u=[];C(n,u),postMessage({type:"setAnnotation",resp:{annotation:r,values:n},msg:"Success: GET_ANNOTATION done"},u)})).catch((function(e){console.error(e),Z(n,e,i)})):(console.error("MIM:::msg type incorrect"),Z(n,"Type not defined",i))}}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.x=function(){var e=n.O(void 0,[637,775],(function(){return n(5614)}));return e=n.O(e)},function(){var e=[];n.O=function(t,r,s,a){if(!r){var o=1/0;for(l=0;l<e.length;l++){r=e[l][0],s=e[l][1],a=e[l][2];for(var c=!0,u=0;u<r.length;u++)(!1&a||o>=a)&&Object.keys(n.O).every((function(e){return n.O[e](r[u])}))?r.splice(u--,1):(c=!1,a<o&&(o=a));if(c){e.splice(l--,1);var i=s();void 0!==i&&(t=i)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[r,s,a]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+"."+{484:"743bef92",637:"8a6cdf3b",775:"125cb29e",909:"e25ad7c3",933:"e463a450"}[e]+".chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/kana/",function(){n.b=self.location+"/../../../";var e={614:1};n.f.i=function(t,r){e[t]||importScripts(n.p+n.u(t))};var t=self.webpackChunkkana=self.webpackChunkkana||[],r=t.push.bind(t);t.push=function(t){var s=t[0],a=t[1],o=t[2];for(var c in a)n.o(a,c)&&(n.m[c]=a[c]);for(o&&o(n);s.length;)e[s.pop()]=1;r(t)}}(),function(){var e=n.x;n.x=function(){return Promise.all([n.e(637),n.e(775)]).then(e)}}();n.x()}();
//# sourceMappingURL=614.5732478c.chunk.js.map