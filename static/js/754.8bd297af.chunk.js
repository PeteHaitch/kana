/*! For license information please see 754.8bd297af.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkkana=self.webpackChunkkana||[]).push([[754,377],{8109:function(e,t,n){n.d(t,{FB:function(){return F}});var r=n(4165),a=n(5671),i=n(3144);function s(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{u(r.next(e))}catch(t){i(t)}}function o(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}u((r=r.apply(e,t||[])).next())}))}var o,u=function(){function e(){(0,a.Z)(this,e),this.mutex=Promise.resolve()}return(0,i.Z)(e,[{key:"lock",value:function(){var e=function(){};return this.mutex=this.mutex.then((function(){return new Promise(e)})),new Promise((function(t){e=t}))}},{key:"dispatch",value:function(e){return s(this,void 0,void 0,(0,r.Z)().mark((function t(){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.lock();case 2:return n=t.sent,t.prev=3,t.next=6,Promise.resolve(e());case 6:return t.abrupt("return",t.sent);case 7:return t.prev=7,n(),t.finish(7);case 10:case"end":return t.stop()}}),t,this,[[3,,7,10]])})))}}]),e}();var l="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:n.g,c=null!==(o=l.Buffer)&&void 0!==o?o:null,h=l.TextEncoder?new l.TextEncoder:null;function f(e,t){return(15&e)+(e>>6|e>>3&8)<<4|(15&t)+(t>>6|t>>3&8)}function d(e,t){for(var n=t.length>>1,r=0;r<n;r++){var a=r<<1;e[r]=f(t.charCodeAt(a),t.charCodeAt(a+1))}}function p(e,t){if(e.length!==2*t.length)return!1;for(var n=0;n<t.length;n++){var r=n<<1;if(t[n]!==f(e.charCodeAt(r),e.charCodeAt(r+1)))return!1}return!0}var v="a".charCodeAt(0)-10,_="0".charCodeAt(0);function m(e,t,n){for(var r=0,a=0;a<n;a++){var i=t[a]>>>4;e[r++]=i>9?i+v:i+_,i=15&t[a],e[r++]=i>9?i+v:i+_}return String.fromCharCode.apply(null,e)}for(var w=null!==c?function(e){if("string"===typeof e){var t=c.from(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.length)}if(c.isBuffer(e))return new Uint8Array(e.buffer,e.byteOffset,e.length);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Invalid data type!")}:function(e){if("string"===typeof e)return h.encode(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Invalid data type!")},g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=new Uint8Array(256),b=0;b<g.length;b++)y[g.charCodeAt(b)]=b;function A(e){var t=Math.floor(.75*e.length),n=e.length;return"="===e[n-1]&&(t-=1,"="===e[n-2]&&(t-=1)),t}function Z(e){for(var t=A(e),n=e.length,r=new Uint8Array(t),a=0,i=0;i<n;i+=4){var s=y[e.charCodeAt(i)],o=y[e.charCodeAt(i+1)],u=y[e.charCodeAt(i+2)],l=y[e.charCodeAt(i+3)];r[a]=s<<2|o>>4,r[a+=1]=(15&o)<<4|u>>2,r[a+=1]=(3&u)<<6|63&l,a+=1}return r}var k=16384,x=4,E=new u,I=new Map;function S(e,t){return s(this,void 0,void 0,(0,r.Z)().mark((function n(){var a,i,o,u,l,c,h,f,v,_,g,y,b,A,S,B,C,z,R,F,D=this;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=null,i=null,o=!1,"undefined"!==typeof WebAssembly){n.next=5;break}throw new Error("WebAssembly is not supported in this environment!");case 5:u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i.set(e,t)},l=function(){return i},c=function(){return a.exports},h=function(e){a.exports.Hash_SetMemorySize(e);var t=a.exports.Hash_GetBuffer(),n=a.exports.memory.buffer;i=new Uint8Array(n,t,e)},f=function(){return new DataView(a.exports.memory.buffer).getUint32(a.exports.STATE_SIZE,!0)},v=E.dispatch((function(){return s(D,void 0,void 0,(0,r.Z)().mark((function t(){var n,i,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I.has(e.name)||(n=Z(e.data),i=WebAssembly.compile(n),I.set(e.name,i)),t.next=3,I.get(e.name);case 3:return s=t.sent,t.next=6,WebAssembly.instantiate(s,{});case 6:a=t.sent;case 7:case"end":return t.stop()}}),t)})))})),_=function(){return s(D,void 0,void 0,(0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return e.next=3,v;case 3:t=a.exports.Hash_GetBuffer(),n=a.exports.memory.buffer,i=new Uint8Array(n,t,k);case 6:case"end":return e.stop()}}),e)})))},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o=!0,a.exports.Hash_Init(e)},y=function(e){for(var t=0;t<e.length;){var n=e.subarray(t,t+k);t+=n.length,i.set(n),a.exports.Hash_Update(n.length)}},b=function(e){if(!o)throw new Error("update() called before init()");var t=w(e);y(t)},A=new Uint8Array(2*t),S=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!o)throw new Error("digest() called before init()");return o=!1,a.exports.Hash_Final(n),"binary"===e?i.slice(0,t):m(A,i,t)},B=function(){if(!o)throw new Error("save() can only be called after init() and before digest()");var t=a.exports.Hash_GetState(),n=f(),r=a.exports.memory.buffer,i=new Uint8Array(r,t,n),s=new Uint8Array(x+n);return d(s,e.hash),s.set(i,x),s},C=function(t){if(!(t instanceof Uint8Array))throw new Error("load() expects an Uint8Array generated by save()");var n=a.exports.Hash_GetState(),r=f(),i=x+r,s=a.exports.memory.buffer;if(t.length!==i)throw new Error("Bad state length (expected ".concat(i," bytes, got ").concat(t.length,")"));if(!p(e.hash,t.subarray(0,x)))throw new Error("This state was written by an incompatible hash implementation");var u=t.subarray(x);new Uint8Array(s,n,r).set(u),o=!0},z=function(e){return"string"===typeof e?e.length<k/4:e.byteLength<k},R=z,n.t0=e.name,n.next="argon2"===n.t0||"scrypt"===n.t0?24:"blake2b"===n.t0||"blake2s"===n.t0?26:"blake3"===n.t0?28:"xxhash64"===n.t0||"xxhash3"===n.t0||"xxhash128"===n.t0?30:32;break;case 24:return R=function(){return!0},n.abrupt("break",32);case 26:return R=function(e,t){return t<=512&&z(e)},n.abrupt("break",32);case 28:return R=function(e,t){return 0===t&&z(e)},n.abrupt("break",32);case 30:return R=function(){return!1},n.abrupt("break",32);case 32:return F=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!R(e,n))return g(n),b(e),S("hex",r);var s=w(e);return i.set(s),a.exports.Hash_Calculate(s.length,n,r),m(A,i,t)},n.next=35,_();case 35:return n.abrupt("return",{getMemory:l,writeMemory:u,getExports:c,setMemorySize:h,init:g,update:b,digest:S,save:B,load:C,calculate:F,hashLength:t});case 36:case"end":return n.stop()}}),n)})))}function B(e,t,n){return s(this,void 0,void 0,(0,r.Z)().mark((function a(){var i,s;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.lock();case 2:return i=r.sent,r.next=5,S(t,n);case 5:return s=r.sent,i(),r.abrupt("return",s);case 8:case"end":return r.stop()}}),a)})))}new u;new u;new DataView(new ArrayBuffer(4));new u;new u;new u;new u;new u;var C={name:"md5",data:"AGFzbQEAAAABEgRgAAF/YAAAYAF/AGACf38BfwMIBwABAgMBAAIEBQFwAQEBBQQBAQICBg4CfwFBoIoFC38AQYAICwdwCAZtZW1vcnkCAA5IYXNoX0dldEJ1ZmZlcgAACUhhc2hfSW5pdAABC0hhc2hfVXBkYXRlAAIKSGFzaF9GaW5hbAAEDUhhc2hfR2V0U3RhdGUABQ5IYXNoX0NhbGN1bGF0ZQAGClNUQVRFX1NJWkUDAQqzFgcFAEGACQstAEEAQv6568XpjpWZEDcCkIkBQQBCgcaUupbx6uZvNwKIiQFBAEIANwKAiQEL6AIBA39BAEEAKAKAiQEiASAAakH/////AXEiAjYCgIkBQQAoAoSJASEDAkAgAiABTw0AQQAgA0EBaiIDNgKEiQELQQAgAyAAQR12ajYChIkBAkACQAJAAkACQAJAIAFBP3EiAw0AQYAJIQIMAQtBwAAgA2siAiAASw0BIANBGGohA0EAIQEDQCADIAFqQYCJAWogAUGACWotAAA6AAAgAyABQQFqIgFqQdgARw0AC0GYiQFBwAAQAxogACACayEAIAJBgAlqIQILIABBwABPDQEgACEDDAILIABFDQJBACEBIANBmIkBakEALQCACToAACAAQQFGDQIgA0GZiQFqIQMgAEF/aiECA0AgAyABaiABQYEJai0AADoAACACIAFBAWoiAUcNAAwDCwsgAEE/cSEDIAIgAEFAcRADIQILIANFDQBBACEBA0AgAUGYiQFqIAIgAWotAAA6AAAgAyABQQFqIgFHDQALCwu0EAEZf0EAKAKUiQEhAkEAKAKQiQEhA0EAKAKMiQEhBEEAKAKIiQEhBQNAIABBCGooAgAiBiAAQRhqKAIAIgcgAEEoaigCACIIIABBOGooAgAiCSAAQTxqKAIAIgogAEEMaigCACILIABBHGooAgAiDCAAQSxqKAIAIg0gDCALIAogDSAJIAggByADIAZqIAIgAEEEaigCACIOaiAFIAQgAiADc3EgAnNqIAAoAgAiD2pB+Miqu31qQQd3IARqIhAgBCADc3EgA3NqQdbunsZ+akEMdyAQaiIRIBAgBHNxIARzakHb4YGhAmpBEXcgEWoiEmogAEEUaigCACITIBFqIABBEGooAgAiFCAQaiAEIAtqIBIgESAQc3EgEHNqQe6d9418akEWdyASaiIQIBIgEXNxIBFzakGvn/Crf2pBB3cgEGoiESAQIBJzcSASc2pBqoyfvARqQQx3IBFqIhIgESAQc3EgEHNqQZOMwcF6akERdyASaiIVaiAAQSRqKAIAIhYgEmogAEEgaigCACIXIBFqIAwgEGogFSASIBFzcSARc2pBgaqaampBFncgFWoiECAVIBJzcSASc2pB2LGCzAZqQQd3IBBqIhEgECAVc3EgFXNqQa/vk9p4akEMdyARaiISIBEgEHNxIBBzakGxt31qQRF3IBJqIhVqIABBNGooAgAiGCASaiAAQTBqKAIAIhkgEWogDSAQaiAVIBIgEXNxIBFzakG+r/PKeGpBFncgFWoiECAVIBJzcSASc2pBoqLA3AZqQQd3IBBqIhEgECAVc3EgFXNqQZPj4WxqQQx3IBFqIhUgESAQc3EgEHNqQY6H5bN6akERdyAVaiISaiAHIBVqIA4gEWogCiAQaiASIBUgEXNxIBFzakGhkNDNBGpBFncgEmoiECAScyAVcSASc2pB4sr4sH9qQQV3IBBqIhEgEHMgEnEgEHNqQcDmgoJ8akEJdyARaiISIBFzIBBxIBFzakHRtPmyAmpBDncgEmoiFWogCCASaiATIBFqIA8gEGogFSAScyARcSASc2pBqo/bzX5qQRR3IBVqIhAgFXMgEnEgFXNqQd2gvLF9akEFdyAQaiIRIBBzIBVxIBBzakHTqJASakEJdyARaiISIBFzIBBxIBFzakGBzYfFfWpBDncgEmoiFWogCSASaiAWIBFqIBQgEGogFSAScyARcSASc2pByPfPvn5qQRR3IBVqIhAgFXMgEnEgFXNqQeabh48CakEFdyAQaiIRIBBzIBVxIBBzakHWj9yZfGpBCXcgEWoiEiARcyAQcSARc2pBh5vUpn9qQQ53IBJqIhVqIAYgEmogGCARaiAXIBBqIBUgEnMgEXEgEnNqQe2p6KoEakEUdyAVaiIQIBVzIBJxIBVzakGF0o/PempBBXcgEGoiESAQcyAVcSAQc2pB+Me+Z2pBCXcgEWoiEiARcyAQcSARc2pB2YW8uwZqQQ53IBJqIhVqIBcgEmogEyARaiAZIBBqIBUgEnMgEXEgEnNqQYqZqel4akEUdyAVaiIQIBVzIhUgEnNqQcLyaGpBBHcgEGoiESAVc2pBge3Hu3hqQQt3IBFqIhIgEXMiGiAQc2pBosL17AZqQRB3IBJqIhVqIBQgEmogDiARaiAJIBBqIBUgGnNqQYzwlG9qQRd3IBVqIhAgFXMiFSASc2pBxNT7pXpqQQR3IBBqIhEgFXNqQamf+94EakELdyARaiISIBFzIgkgEHNqQeCW7bV/akEQdyASaiIVaiAPIBJqIBggEWogCCAQaiAVIAlzakHw+P71e2pBF3cgFWoiECAVcyIVIBJzakHG/e3EAmpBBHcgEGoiESAVc2pB+s+E1X5qQQt3IBFqIhIgEXMiCCAQc2pBheG8p31qQRB3IBJqIhVqIBkgEmogFiARaiAHIBBqIBUgCHNqQYW6oCRqQRd3IBVqIhEgFXMiECASc2pBuaDTzn1qQQR3IBFqIhIgEHNqQeWz7rZ+akELdyASaiIVIBJzIgcgEXNqQfj5if0BakEQdyAVaiIQaiAMIBVqIA8gEmogBiARaiAQIAdzakHlrLGlfGpBF3cgEGoiESAVQX9zciAQc2pBxMSkoX9qQQZ3IBFqIhIgEEF/c3IgEXNqQZf/q5kEakEKdyASaiIQIBFBf3NyIBJzakGnx9DcempBD3cgEGoiFWogCyAQaiAZIBJqIBMgEWogFSASQX9zciAQc2pBucDOZGpBFXcgFWoiESAQQX9zciAVc2pBw7PtqgZqQQZ3IBFqIhAgFUF/c3IgEXNqQZKZs/h4akEKdyAQaiISIBFBf3NyIBBzakH96L9/akEPdyASaiIVaiAKIBJqIBcgEGogDiARaiAVIBBBf3NyIBJzakHRu5GseGpBFXcgFWoiECASQX9zciAVc2pBz/yh/QZqQQZ3IBBqIhEgFUF/c3IgEHNqQeDNs3FqQQp3IBFqIhIgEEF/c3IgEXNqQZSGhZh6akEPdyASaiIVaiANIBJqIBQgEWogGCAQaiAVIBFBf3NyIBJzakGho6DwBGpBFXcgFWoiECASQX9zciAVc2pBgv3Nun9qQQZ3IBBqIhEgFUF/c3IgEHNqQbXk6+l7akEKdyARaiISIBBBf3NyIBFzakG7pd/WAmpBD3cgEmoiFSAEaiAWIBBqIBUgEUF/c3IgEnNqQZGnm9x+akEVd2ohBCAVIANqIQMgEiACaiECIBEgBWohBSAAQcAAaiEAIAFBQGoiAQ0AC0EAIAI2ApSJAUEAIAM2ApCJAUEAIAQ2AoyJAUEAIAU2AoiJASAAC6ECAQN/QQAoAoCJASIAQT9xIgFBmIkBakGAAToAAAJAAkACQCABQT9zIgJBB0sNAAJAIAJFDQAgAUGZiQFqIQADQCAAQQA6AAAgAEEBaiEAIAJBf2oiAg0ACwtBwAAhAkGYiQFBwAAQAxpBACEADAELIAJBCEYNASABQQFqIQALIABBj4kBaiEBA0AgASACakEAOgAAIAJBd2ohACACQX9qIQIgAEEASg0AC0EAKAKAiQEhAAtBACAAQRV2OgDTiQFBACAAQQ12OgDSiQFBACAAQQV2OgDRiQFBACAAQQN0IgI6ANCJAUEAIAI2AoCJAUEAQQAoAoSJATYC1IkBQZiJAUHAABADGkEAQQApAoiJATcDgAlBAEEAKQKQiQE3A4gJCwYAQYCJAQszAEEAQv6568XpjpWZEDcCkIkBQQBCgcaUupbx6uZvNwKIiQFBAEIANwKAiQEgABACEAQLCwsBAEGACAsEmAAAAA==",hash:"9b0fac7d"},z=new u,R=null;function F(e){if(null===R)return B(z,C,16).then((function(t){return(R=t).calculate(e)}));try{var t=R.calculate(e);return Promise.resolve(t)}catch(n){return Promise.reject(n)}}new u;new u;new u;new u;new u;new u;new u;new u;new u,new ArrayBuffer(8);new u,new ArrayBuffer(8);new u,new ArrayBuffer(8);new u;new u;new u},2754:function(e,t,n){n.d(t,{ES:function(){return se.ES},Fl:function(){return H.Fl},J6:function(){return g.J6},E4:function(){return i.E4},H$:function(){return H.H$},By:function(){return H.By},en:function(){return H.en},cO:function(){return H.cO},bN:function(){return ce},TD:function(){return ue},TN:function(){return We},jJ:function(){return C.jJ},j2:function(){return xt},x6:function(){return Ge},lC:function(){return bt},JZ:function(){return $e},ED:function(){return a.ED},$p:function(){return kt.$p},Qr:function(){return H.Qr},j5:function(){return et},o2:function(){return Zt}});var r=n(7762),a=n(6546),i=n(652),s=n(9873),o=n(9751),u=n(2269),l=n(7317),c=n(8366),h=n(2615),f=n(384),d=n(7188),p=n(6849),v=n(8580),_=n(1944),m=n(7625),w=n(4414),g=n(8334),y=n(2346),b=n(8916),A=n(2793),Z=n(3324),k=n(5671),x=n(3144),E=n(101),I=n(3889),S=n(5831),B=n(7891),C=n(818),z=new WeakSet,R=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,k.Z)(this,e),(0,E.Z)(this,z),this._selections=null==t?{}:t,this._cache=null==n?{results:{}}:n}return(0,x.Z)(e,[{key:"free",value:function(){B.Yl(this._cache.buffer),delete this._cache.buffer;for(var e=0,t=Object.keys(this._cache.results);e<t.length;e++){var n=t[e];(0,I.Z)(this,z,F).call(this,n)}this._cache.results={},C.eo(this._cache.versus),delete this._cache.versus}},{key:"addSelection",value:function(e,t,n,a,i,s,o,u){var l=a(n[0]).numberOfColumns();B.N2(t,l);var c=B.rS(l,"Int32Array",this._cache);c.fill(0);var h=c.array();t.forEach((function(e){h[e]=1}));var f,d={},p=(0,r.Z)(n);try{for(p.s();!(f=p.n()).done;){var v=f.value,_=a(v);d[v]=S.y5(_,c,{block:i,lfcThreshold:o,computeAuc:u})}}catch(m){p.e(m)}finally{p.f()}e in this._cache.results&&(0,I.Z)(this,z,F).call(this,e),this._cache.results[e]={raw:d},s&&(t=t.slice()),this._selections[e]=t}},{key:"removeSelection",value:function(e){(0,I.Z)(this,z,F).call(this,e),delete this._cache.results[e],delete this._selections[e]}},{key:"fetchResults",value:function(e){return this._cache.results[e].raw}},{key:"fetchSelectionIndices",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).copy,n=void 0===t||t,r=this._selections[e];return n&&(r=r.slice()),r}},{key:"fetchSelections",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.copy,n=void 0===t||t,r=e.force,a=void 0===r?null:r,i={},s=0,o=Object.entries(this._selections);s<o.length;s++){var u=(0,Z.Z)(o[s],2),l=u[0],c=u[1],h=c,f=n;null!==a&&("Array"==a?c instanceof Array||(h=Array.from(c),f=!1):"Int32Array"==a&&(c instanceof Int32Array||(h=new Int32Array(c),f=!1))),f&&(h=h.slice()),i[l]=h}return i}},{key:"computeVersus",value:function(e,t,n,a,i,s,o){"versus"in this._cache||(this._cache.versus={});var u=this._cache.versus,l=C.Bh(e,t,u),c=l.left_small?0:1,h=l.left_small?1:0;if(l.run){var f,d=new S.VU,p=(0,r.Z)(n);try{for(p.s();!(f=p.n()).done;){var v=f.value;d.add(v,a(v))}}catch(A){p.e(A)}finally{p.f()}var _=this._selections;if(!(e in _)||!(t in _))throw new Error("invalid selection ID requested in versus mode");var m=_[e],w=_[t];if(0==m.length||0==w.length)throw new Error("non-zero entries should be present for both requested selections in versus mode");var g=[];m.forEach((function(e){g.push({index:e,cluster:c})})),w.forEach((function(e){g.push({index:e,cluster:h})})),g.sort((function(e,t){return e.index-t.index}));var y=g.map((function(e){return e.index})),b=g.map((function(e){return e.cluster}));C.c9(d,b,i,y,l.cached,s,o)}return{results:l.cached,left:c,right:h}}}]),e}();function F(e){for(var t=0,n=Object.entries(this._cache.results[e].raw);t<n.length;t++){var r=(0,Z.Z)(n[t],2);r[0];r[1].free()}}var D=new WeakMap,N=new WeakMap,Q=new WeakMap,O=new WeakMap,q=new WeakSet,U=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,k.Z)(this,e),(0,E.Z)(this,q),(0,y.Z)(this,D,{writable:!0,value:void 0}),(0,y.Z)(this,N,{writable:!0,value:void 0}),(0,y.Z)(this,Q,{writable:!0,value:void 0}),(0,y.Z)(this,O,{writable:!0,value:void 0}),!(t instanceof u.H0))throw new Error("'filter' should be a CellFilteringState object");if((0,A.Z)(this,D,t),!(n.RNA instanceof l.ue))throw new Error("'norm_states.RNA' should be an RnaNormalizationState object");if(!(n.ADT instanceof c.m5))throw new Error("'norm_states.ADT' should be an AdtNormalizationState object");if(!(n.CRISPR instanceof h.$M))throw new Error("'norm_states.CRISPR' should be an CrisprNormalizationState object");(0,A.Z)(this,N,n);var i=null;null!==r&&"selections"in r&&(i=r.selections),(0,A.Z)(this,Q,new R(i,a)),(0,A.Z)(this,O,{}),this.changed=!1}return(0,x.Z)(e,[{key:"free",value:function(){(0,b.Z)(this,Q).free()}},{key:"fetchParameters",value:function(){return{lfc_threshold:(0,b.Z)(this,O).lfc_threshold,compute_auc:(0,b.Z)(this,O).compute_auc}}},{key:"addSelection",value:function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).copy,r=void 0===n||n;(0,I.Z)(this,q,M).call(this,e,t,r,(0,b.Z)(this,O).lfc_threshold,(0,b.Z)(this,O).compute_auc)}},{key:"removeSelection",value:function(e){(0,b.Z)(this,Q).removeSelection(e)}},{key:"fetchResults",value:function(e){return(0,b.Z)(this,Q).fetchResults(e)}},{key:"fetchSelectionIndices",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).copy,n=void 0===t||t;return(0,b.Z)(this,Q).fetchSelectionIndices(e,{copy:n})}},{key:"fetchSelections",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.copy,n=void 0===t||t,r=e.force,a=void 0===r?null:r;return(0,b.Z)(this,Q).fetchSelections({copy:n,force:a})}},{key:"compute",value:function(e){var t=e.lfc_threshold,n=e.compute_auc;if(this.changed=!1,(0,b.Z)(this,D).changed&&((0,b.Z)(this,Q).free(),(0,A.Z)(this,Q,new R),this.changed=!0),t!==(0,b.Z)(this,O).lfc_threshold||n!=(0,b.Z)(this,O).compute_auc){for(var r=0,a=Object.entries((0,b.Z)(this,Q)._selections);r<a.length;r++){var i=(0,Z.Z)(a[r],2),s=i[0],o=i[1];(0,I.Z)(this,q,M).call(this,s,o,!1,t,n)}(0,b.Z)(this,O).lfc_threshold=t,(0,b.Z)(this,O).compute_auc=n,this.changed=!0}}},{key:"computeVersus",value:function(e,t){var n=this,r=B.Mc((0,b.Z)(this,N));return(0,b.Z)(this,Q).computeVersus(e,t,r,(function(e){return(0,b.Z)(n,N)[e].fetchNormalizedMatrix()}),(0,b.Z)(this,D).fetchFilteredBlock(),(0,b.Z)(this,O).lfc_threshold,(0,b.Z)(this,O).compute_auc)}}],[{key:"defaults",value:function(){return{lfc_threshold:0,compute_auc:!0}}}]),e}();function M(e,t,n,r,a){var i=this,s=B.Mc((0,b.Z)(this,N));(0,b.Z)(this,Q).addSelection(e,t,s,(function(e){return(0,b.Z)(i,N)[e].fetchNormalizedMatrix()}),(0,b.Z)(this,D).fetchFilteredBlock(),n,r,a)}var W=n(1413),T=n(4165),j=n(5861),G=n(7462),L=n(5061),H=n(7132),Y=new WeakMap,J=function(){function e(){(0,k.Z)(this,e),(0,y.Z)(this,Y,{writable:!0,value:void 0}),(0,A.Z)(this,Y,{})}return(0,x.Z)(e,[{key:"free",value:function(){B.Yl((0,b.Z)(this,Y).set_buffer),(0,A.Z)(this,Y,{})}},{key:"prepare",value:function(){var e=(0,j.Z)((0,T.Z)().mark((function e(t,n,a,i){var s,o,u,l,c,h,f,d,p,v,_,m,w,g,y,A,Z,k,x,E,I,S,B,C,z,R,F,D,N,Q,O,q,U,M,W,j,H,J;return(0,T.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(null==a?null==(s=t.rowNames())&&(n=[]):s=t.column(a),o={types:[i.toLowerCase()]},u=0,l=[[]],c=[[]],h=[[]],f=0,d=[[]],p=[[]],v=[[]],_=[new Int32Array],m=[new Int32Array],w=new Set,g=new Array(t.numberOfRows()),y=0;y<g.length;y++)g[y]=[];A=(0,r.Z)(n),e.prev=16,A.s();case 18:if((Z=A.n()).done){e.next=62;break}return k=Z.value,e.next=22,L.XW(k,s,o);case 22:for(x=e.sent,E=0;E<x.length;E++)x[E].length>0&&w.add(E);return e.next=26,L.Uy(k);case 26:return I=e.sent,S=L.$g(x,I),e.next=30,L.bj(k);case 30:for(B=e.sent,C=B.length,z=new Array(C),R=new Array(C),F=new Int32Array(C),D=new Int32Array(C),E=0;E<C;E++)N=B[E],z[E]=N.name,R[E]=N.description,D[E]=N.collection+u,F[E]=S[E].length;return d.push(z),p.push(R),v.push(S),_.push(F),m.push(D),e.next=44,L.RR(k);case 44:for(Q=e.sent,O=L.wy(x,Q),E=0;E<x.length;E++){for(q=O[E],U=0;U<q.length;U++)q[U]+=f;g[E].push(q)}return e.next=49,L.is(k);case 49:for(M=e.sent,W=M.length,j=new Array(W),H=new Array(W),J=new Array(W),E=0;E<W;E++)j[E]=M[E].title,H[E]=M[E].description,J[E]=k;l.push(j),c.push(H),h.push(J),f+=C,u+=W;case 60:e.next=18;break;case 62:e.next=67;break;case 64:e.prev=64,e.t0=e.catch(16),A.e(e.t0);case 67:return e.prev=67,A.f(),e.finish(67);case 70:if((0,b.Z)(this,Y).universe=new Int32Array(w).sort(),(0,b.Z)(this,Y).sets={names:G.NR(d),descriptions:G.NR(p),sets:G.NR(v),sizes:G.NR(_),collections:G.NR(m)},(0,b.Z)(this,Y).collections={names:G.NR(l),descriptions:G.NR(c),species:G.NR(h)},n.length>0)for(y=0;y<g.length;y++)g[y]=G.NR(g[y]);else for(y=0;y<g.length;y++)g[y]=new Uint32Array;return(0,b.Z)(this,Y).mapping_to_sets=g,e.abrupt("return");case 76:case"end":return e.stop()}}),e,this,[[16,64,67,70]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"fetchCollectionDetails",value:function(){return(0,b.Z)(this,Y).collections}},{key:"fetchSetDetails",value:function(){return{names:(0,b.Z)(this,Y).sets.names,descriptions:(0,b.Z)(this,Y).sets.descriptions,sizes:(0,b.Z)(this,Y).sets.sizes,collections:(0,b.Z)(this,Y).sets.collections}}},{key:"fetchUniverseSize",value:function(){return(0,b.Z)(this,Y).universe.length}},{key:"computeEnrichment",value:function(e,t,n,r,a){var i=this;"delta_detected"==t&&(t="deltaDetected");var s="auc"==t?.5:0,o="min_rank"!==t,u=C.iG[n],l=r[t](e,{summary:u,copy:!1}),c=G.Nd(l,(0,b.Z)(this,Y).universe),h=S.Y8(c,a,{largest:o}),f=[],d=function(e){var t=(0,b.Z)(i,Y).universe[e];f.push((0,b.Z)(i,Y).mapping_to_sets[t])};o?(h<s&&(h=s),c.forEach((function(e,t){e>=h&&d(t)}))):c.forEach((function(e,t){e<=h&&d(t)}));for(var p=L.or(f),v=new Int32Array(p.length),_=new Int32Array(p.length),m=new Int32Array(p.length),w=new Int32Array(p.length),g=0;g<p.length;g++){w[g]=g;var y=p[g];v[g]=y.id,_[g]=y.count,m[g]=(0,b.Z)(this,Y).sets.sizes[y.id]}var A=f.length,Z=S.xw(_,A,m,(0,b.Z)(this,Y).universe.length);return w.sort((function(e,t){return Z[e]-Z[t]})),{set_ids:G.Nd(v,w),counts:G.Nd(_,w),pvalues:G.Nd(Z,w),num_markers:A}}},{key:"fetchFeatureSetIndices",value:function(e){return(0,b.Z)(this,Y).sets.sets[e]}},{key:"computePerCellScores",value:function(e,t,n){var r=this.fetchFeatureSetIndices(e),a=B.rS(t.numberOfRows(),"Uint8Array",(0,b.Z)(this,Y),"set_buffer");a.fill(0);var i=a.array();return r.forEach((function(e){i[e]=1})),S.Bs(t,a,{block:n})}}],[{key:"flush",value:function(){}},{key:"setDownload",value:function(e){console.warn("'FeatureSetState.setDownload' is a no-op, uses 'gesel.setReferenceDownload' and 'gesel.setGeneDownload' instead")}}]),e}();function V(e){var t=null,n={type:"symbol",species:"human",confidence:0};if("row_names"in e){var r=e.row_names;r.confidence>n.confidence&&(n=r)}for(var a=0,i=Object.entries(e.columns);a<i.length;a++){var s=(0,Z.Z)(i[a],2),o=s[0],u=s[1];u.confidence>n.confidence&&(n=u,t=o)}return{gene_id_column:t,gene_id_type:n.type.toUpperCase(),species:[n.species]}}function P(e,t,n,r,a,i,s,o){return X.apply(this,arguments)}function X(){return(X=(0,j.Z)((0,T.Z)().mark((function e(t,n,r,a,i,s,o,u){var l,c,h,f;return(0,T.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r===t.automatic&&(r||t.gene_id_column===i&&t.gene_id_type===s&&!B.xi(t.species,a))){e.next=8;break}return l=i,c=s,h=a,r&&(f=V(u()),l=f.gene_id_column,c=f.gene_id_type,h=f.species),e.next=7,n.prepare(o(),h,l,c);case 7:return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t,n,r,a,i){e.automatic=t,e.species=G.bl(n),e.gene_id_column=r,e.gene_id_type=a,e.top_markers=i}function K(e){var t=(0,W.Z)({},e);return t.species=G.bl(t.species),t}var ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=new WeakMap,ae=new WeakMap,ie=function(){function e(t,n,r,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if((0,k.Z)(this,e),(0,y.Z)(this,ee,{writable:!0,value:void 0}),(0,y.Z)(this,te,{writable:!0,value:void 0}),(0,y.Z)(this,ne,{writable:!0,value:void 0}),(0,y.Z)(this,re,{writable:!0,value:void 0}),(0,y.Z)(this,ae,{writable:!0,value:void 0}),!(t instanceof a.tq))throw new Error("'inputs' should be a State object from './inputs.js'");if((0,A.Z)(this,ee,t),!(n instanceof u.H0))throw new Error("'filter' should be a CellFilteringState object");if((0,A.Z)(this,te,n),!(r instanceof l.ue))throw new Error("'normalized' should be a RnaNormalizationState object from './rna_normalization.js'");(0,A.Z)(this,ne,r),(0,A.Z)(this,re,null===s?{}:s),(0,A.Z)(this,ae,new J),this.changed=!1}return(0,x.Z)(e,[{key:"free",value:function(){(0,b.Z)(this,ae).free()}},{key:"valid",value:function(){return(0,b.Z)(this,ee).fetchCountMatrix().has("RNA")}},{key:"fetchCollectionDetails",value:function(){return(0,b.Z)(this,ae).fetchCollectionDetails()}},{key:"fetchSetDetails",value:function(){return(0,b.Z)(this,ae).fetchSetDetails()}},{key:"fetchUniverseSize",value:function(){return(0,b.Z)(this,ae).fetchUniverseSize()}},{key:"computeEnrichment",value:function(e,t,n,r){return(0,b.Z)(this,ae).computeEnrichment(t,n,r,e,(0,b.Z)(this,re).top_markers)}},{key:"fetchFeatureSetIndices",value:function(e){return(0,b.Z)(this,ae).fetchFeatureSetIndices(e)}},{key:"computePerCellScores",value:function(e){return(0,b.Z)(this,ae).computePerCellScores(e,(0,b.Z)(this,ne).fetchNormalizedMatrix(),(0,b.Z)(this,te).fetchFilteredBlock())}},{key:"fetchPerCellScores",value:function(e,t){return this.computePerCellScores(e,t)}},{key:"fetchParameters",value:function(){return K((0,b.Z)(this,re))}},{key:"compute",value:function(){var e=(0,j.Z)((0,T.Z)().mark((function e(t){var n,r,a,i,s,o,u=this;return(0,T.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.changed=!1,(0,b.Z)(this,ee).changed&&(this.changed=!0),n=t.skip,r=t.automatic,a=t.species,i=t.gene_id_column,s=t.gene_id_type,o=t.top_markers,n!==(0,b.Z)(this,re).skip&&(this.changed=!0),!this.valid()||n){e.next=11;break}return this.changed&&(0,A.Z)(this,re,{}),e.next=8,P((0,b.Z)(this,re),(0,b.Z)(this,ae),r,a,i,s,(function(){return(0,b.Z)(u,ee).fetchFeatureAnnotations().RNA}),(function(){return(0,b.Z)(u,ee).guessRnaFeatureTypes()}));case 8:e.sent&&(this.changed=!0),o!==(0,b.Z)(this,re).top_markers&&(this.changed=!0);case 11:return $((0,b.Z)(this,re),r,a,i,s,o),(0,b.Z)(this,re).skip=n,e.abrupt("return");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"defaults",value:function(){return{skip:!1,automatic:!0,species:[],gene_id_column:null,gene_id_type:"ENSEMBL",top_markers:100}}},{key:"flush",value:function(){}},{key:"setDownload",value:function(e){return J.setDownload(e)}}]),e}();var se=n(4);var oe=[f.Cy,d.Cy,p.Cy];function ue(e,t){var n,a;if("mnn"==t)n=t,a="weight";else if("regress"==t)n="none",a=t;else{if("none"!=t)throw new Error("unknown correction method '"+t+"'");n=t,a=t}e[_.Cy].method=n;var i,s=(0,r.Z)(oe);try{for(s.s();!(i=s.n()).done;){e[i.value].block_method=a}}catch(o){s.e(o)}finally{s.f()}return e}var le=[_.Cy,v.Cy,m.Cy];function ce(e,t){var n,a=(0,r.Z)(le);try{for(a.s();!(n=a.n()).done;){e[n.value].approximate=t}}catch(i){a.e(i)}finally{a.f()}return e}var he=n(8391),fe=n(7139),de=n(8849),pe=n(3060),ve=n(7270),_e=(n(9792),a.Cy),me=i.Cy,we=s.Cy,ge=o.Cy,ye=u.Cy,be=l.Cy,Ae=c.Cy,Ze=h.Cy,ke="feature_selection",xe=f.Cy,Ee=d.Cy,Ie=p.Cy,Se="combine_embeddings",Be="batch_correction",Ce=m.Cy,ze="tsne",Re="umap",Fe="kmeans_cluster",De=w.Cy,Ne="choose_clustering",Qe=g.Cy,Oe="cell_labelling",qe="custom_selections",Ue="feature_set_enrichment",Me="_loaded";function We(){return Te.apply(this,arguments)}function Te(){return(Te=(0,j.Z)((0,T.Z)().mark((function e(){return(0,T.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",je(new a.tq));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e){var t={};t[_e]=e,t[me]=new i.E4(t[_e]),t[we]=new s.fA(t[_e]),t[ge]=new o.IW(t[_e]);var n={RNA:t[me],ADT:t[we],CRISPR:t[ge]};t[ye]=new u.H0(t[_e],n),t[be]=new l.ue(t[me],t[ye]),t[Ae]=new c.m5(t[we],t[ye]),t[Ze]=new h.$M(t[ge],t[ye]),t[ke]=new he.$(t[ye],t[be]),t[xe]=new f.rR(t[ye],t[be],t[ke]),t[Ee]=new d.Ru(t[ye],t[Ae]),t[Ie]=new p.zR(t[ye],t[Ze]);var r={RNA:t[xe],ADT:t[Ee],CRISPR:t[Ie]};t[Se]=new v.BE(r),t[Be]=new _.N_(t[ye],t[Se]),t[Ce]=new m.Xr(t[Be]),t[ze]=new pe.T(t[Ce]),t[Re]=new ve.D(t[Ce]),t[Fe]=new de.d(t[Be]),t[De]=new w.Xs(t[Ce]),t[Ne]=new fe.c(t[De],t[Fe]);var a={RNA:t[be],ADT:t[Ae],CRISPR:t[Ze]};return t[Qe]=new g.UL(t[ye],a,t[Ne]),t[Oe]=new se.ES(t[_e],t[Qe]),t[Ue]=new ie(t[_e],t[ye],t[be]),t[qe]=new U(t[ye],a),Promise.all([t[ze].ready(),t[Re].ready()]).then((function(e){return t}))}function Ge(e,t,n){return Le.apply(this,arguments)}function Le(){return Le=(0,j.Z)((0,T.Z)().mark((function e(t,n,r){var a,i,s,o,u,l,c,h,f,d,p,v,_,m,w,g,y,b,A,Z,k=arguments;return(0,T.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(a=k.length>3&&void 0!==k[3]?k[3]:{}).startFun,s=void 0===i?null:i,o=a.finishFun,u=void 0===o?null:o,l=function(){var e=(0,j.Z)((0,T.Z)().mark((function e(t){return(0,T.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===s){e.next=3;break}return e.next=3,s(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=(0,j.Z)((0,T.Z)().mark((function e(t){return(0,T.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===u){e.next=3;break}return e.next=3,u(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=[],f=function(e,n){null!==u&&(n=t[e].changed?n.then((function(n){return u(e,t[e])})):n.then((function(t){return u(e)}))),h.push(n)},e.next=7,l(_e);case 7:return e.next=9,t[_e].compute(n,r[_e]);case 9:return e.next=11,c(_e);case 11:Me in t&&(t[_e].changed=!0,delete t[Me]),d=0,p=[me,we,ge,ye,be,Ae,Ze,ke,xe,Ee,Ie,Se,Be,Ce];case 14:if(!(d<p.length)){e.next=25;break}return v=p[d],e.next=18,l(v);case 18:return e.next=20,t[v].compute(r[v]);case 20:return e.next=22,c(v);case 22:d++,e.next=14;break;case 25:_=0,m=[ze,Re];case 26:if(!(_<m.length)){e.next=35;break}return w=m[_],e.next=30,l(w);case 30:g=t[w].compute(r[w]),f(w,g);case 32:_++,e.next=26;break;case 35:return y=r[Ne].method,e.next=38,l(Fe);case 38:return t[Fe].compute("kmeans"==y,r[Fe]),e.next=41,c(Fe);case 41:return e.next=43,l(De);case 43:return t[De].compute("snn_graph"==y,r[De]),e.next=46,c(De);case 46:return e.next=48,l(Ne);case 48:return t[Ne].compute(r[Ne]),e.next=51,c(Ne);case 51:b=0,A=[Qe,Oe,qe,Ue];case 53:if(!(b<A.length)){e.next=64;break}return Z=A[b],e.next=57,l(Z);case 57:return e.next=59,t[Z].compute(r[Z]);case 59:return e.next=61,c(Z);case 61:b++,e.next=53;break;case 64:return e.next=66,Promise.all(h);case 66:return e.abrupt("return",null);case 67:case"end":return e.stop()}}),e)}))),Le.apply(this,arguments)}function He(e){for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var a=(0,Z.Z)(r[n],2),i=a[0],s=a[1];i!=Me&&(t[i]=s.fetchParameters())}return t}n(1408);var Ye=n(8795);function Je(e,t){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,j.Z)((0,T.Z)().mark((function e(t,n){var a,i,s,o,u,l,c,h,f,d,p,v,_,m;return(0,T.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={},i=0,s=Object.entries(t);case 2:if(!(i<s.length)){e.next=38;break}return o=(0,Z.Z)(s[i],2),u=o[0],l=o[1],c=l.constructor.format(),e.next=7,l.serialize();case 7:h=e.sent,f=h.files,d=h.options,p={format:c,options:d,files:[]},v=(0,r.Z)(f),e.prev=12,v.s();case 14:if((_=v.n()).done){e.next=26;break}return m=_.value,e.t0=p.files,e.t1=m.type,e.t2=m.file.name(),e.next=21,n(u,c,m.file);case 21:e.t3=e.sent,e.t4={type:e.t1,name:e.t2,id:e.t3},e.t0.push.call(e.t0,e.t4);case 24:e.next=14;break;case 26:e.next=31;break;case 28:e.prev=28,e.t5=e.catch(12),v.e(e.t5);case 31:return e.prev=31,v.f(),e.finish(31);case 34:a[u]=p;case 35:i++,e.next=2;break;case 38:return e.abrupt("return",a);case 39:case"end":return e.stop()}}),e,null,[[12,28,31,34]])})))).apply(this,arguments)}function Pe(e,t){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,j.Z)((0,T.Z)().mark((function e(t,n){var a,i,s,o,u,l,c,h,f,d,p,v,_,m;return(0,T.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={},i=H.cO,s=0,o=Object.entries(t);case 3:if(!(s<o.length)){e.next=35;break}if(u=(0,Z.Z)(o[s],2),l=u[0],(c=u[1]).format in i){e.next=7;break}throw new Error("unknown dataset format '"+c.format+"'");case 7:h=H.cO[c.format],f=[],d=(0,r.Z)(c.files),e.prev=10,d.s();case 12:if((p=d.n()).done){e.next=21;break}return v=p.value,e.next=16,n(v.id);case 16:_=e.sent,m=new H.zD(_,{name:v.name}),f.push({type:v.type,file:m});case 19:e.next=12;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(10),d.e(e.t0);case 26:return e.prev=26,d.f(),e.finish(26);case 29:return e.next=31,h.unserialize(f,c.options);case 31:a[l]=e.sent;case 32:s++,e.next=3;break;case 35:return e.abrupt("return",a);case 36:case"end":return e.stop()}}),e,null,[[10,23,26,29]])})))).apply(this,arguments)}function $e(e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,j.Z)((0,T.Z)().mark((function e(t,n){var r,a,i;return(0,T.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=He(t),e.next=3,Je(t.inputs.fetchDatasets(),n);case 3:return a=e.sent,null!==(i=t.inputs.fetchDirectSubset({copy:!1}))&&(i=Array.from(i)),e.abrupt("return",{version:Ye.i,parameters:r,datasets:a,other:{inputs:{direct_subset:i},custom_selections:{selections:t.custom_selections.fetchSelections({force:"Array"})}}});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e,t){return tt.apply(this,arguments)}function tt(){return tt=(0,j.Z)((0,T.Z)().mark((function e(t,n){var r,a,i,s,o,u,l,c,h,f,d,p,v,_=arguments;return(0,T.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(r=_.length>2&&void 0!==_[2]?_[2]:{}).state,i=void 0===a?null:a,s=r.startFun,o=void 0===s?null:s,u=r.finishFun,l=void 0===u?null:u,null!==i){e.next=5;break}return e.next=4,We();case 4:i=e.sent;case 5:return"other"in t&&"inputs"in t.other&&"direct_subset"in t.other.inputs&&null!==t.other.inputs.direct_subset&&i.inputs.setDirectSubset(new Int32Array(t.other.inputs.direct_subset)),e.next=8,Pe(t.datasets,n);case 8:return c=e.sent,e.next=11,Ge(i,c,t.parameters,{startFun:o,finishFun:l});case 11:if("other"in t&&"custom_selections"in t.other&&"selections"in t.other.custom_selections)for(h=0,f=Object.entries(t.other.custom_selections.selections);h<f.length;h++)d=(0,Z.Z)(f[h],2),p=d[0],v=d[1],i.custom_selections.addSelection(p,new Int32Array(v),{copy:!1});return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)}))),tt.apply(this,arguments)}var nt=n(6737);function rt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.group,i=void 0===a?"data":a,s=n.forceBuffer,o=void 0!==s&&s,u={path:t+"/simple.h5",$schema:"hdf5_data_frame/v1.json",data_frame:{dimensions:[e.numberOfRows(),e.numberOfColumns()],columns:[],row_names:!1},hdf5_data_frame:{group:i}},l=S._u({extension:".csv.gz"}),c=l,h=[],f=S.ll(l);try{var d=f.createGroup(i);d.writeDataSet("column_names","String",null,e.columnNames());var p=e.rowNames();null!==p&&(u.data_frame.row_names=!0,d.writeDataSet("row_names","String",null,p));for(var v=d.createGroup("data"),_=u.data_frame.columns,m=0;m<e.numberOfColumns();m++){var w=e.column(m),g=e.columnNames()[m];if(w instanceof Array){var y,b=new Set,A=!1,Z=(0,r.Z)(w);try{for(Z.s();!(y=Z.n()).done;){var k=y.value;null===k?A=!0:b.add(typeof k)}}catch(O){Z.e(O)}finally{Z.f()}if(b.size>1)throw new Error("column '"+g+"' has multiple types");if(b.has("string"))if(_.push({name:g,type:"string"}),A){for(var x=new Set(w),E="NA";x.has(E);)E+="_";var I=w.slice();for(m=0;m<I.length;m++)null===I[m]&&(I[m]=E);v.writeDataSet(String(m),"String",null,I).writeAttribute("missing-value-placeholder","String",null,E)}else v.writeDataSet(String(m),"String",null,w);else if(b.has("number")){_.push({name:g,type:"number"});var B=S.RJ(w.length);try{if(A){var C=B.array();for(m=0;m<w.length;m++)null===w[m]?C[m]=Number.NaN:C[m]=w[m]}else B.set(w);v.writeDataSet(String(m),"Float64",null,B)}finally{B.free()}}else{if(0!=b.size&&!b.has("boolean"))throw new Error("unknown type '"+Array.from(b)[0]+"' for column '"+g+"'");if(_.push({name:g,type:"boolean"}),A){var z=S.Wf(w.length);try{for(m=0;m<w.length;m++)null===w[m]?temparr[m]=-2147483648:temparr[m]=w[m];v.writeDataSet(String(m),"Int32",null,z)}finally{z.free()}}else{var R=S.TS(w.length);try{R.fill(w),v.writeDataSet(String(m),"Uint8",null,R)}finally{R.free()}}}}else if(w instanceof Uint8Array||w instanceof nt.yh)_.push({name:g,type:"boolean"}),v.writeDataSet(String(m),"Uint8",null,w);else if(w instanceof Int32Array||w instanceof nt.do)_.push({name:g,type:"integer"}),v.writeDataSet(String(m),"Int32",null,w);else if(w instanceof Float64Array||w instanceof nt.lt)_.push({name:g,type:"number"}),v.writeDataSet(String(m),"Float64",null,w);else{if(!(w instanceof G.NE))throw new Error("unknown type for column '"+g+"'");var F=rt(w,t+"/column"+String(m),{group:i,forceBuffer:o});_.push({name:g,type:"other",resource:{type:"local",path:F.self.metadata.path}}),F.self.metadata.is_child=!0,h.push(F.self);var D,N=(0,r.Z)(F.children);try{for(N.s();!(D=N.n()).done;){var Q=D.value;h.push(Q)}}catch(O){N.e(O)}finally{N.f()}}}o&&(c=S.pJ(l),S.Yd(l))}catch(q){throw S.Yd(l),q}return{self:{metadata:u,contents:c},children:h}}function at(e,t,n){var r=S._u({extension:".h5"}),a=r;try{S.f(e,r,"matrix",{format:"tenx_matrix"}),n&&(a=S.pJ(r),S.Yd(r))}catch(i){throw S.Yd(r),i}return{metadata:{$schema:"hdf5_sparse_matrix/v1.json",path:t+"/matrix.h5",array:{dimensions:[e.numberOfRows(),e.numberOfColumns()],type:"integer"},hdf5_sparse_matrix:{group:"matrix",format:"tenx_matrix"}},contents:a}}function it(e,t,n,r,a){var i=S._u({extension:".h5"}),s=i;try{var o=S.ll(i).createGroup("logcounts");o.writeAttribute("delayed_type","String",null,"operation"),o.writeAttribute("delayed_operation","String",null,"unary arithmetic"),o.writeDataSet("value","Float64",null,Math.log(2)),o.writeDataSet("method","String",null,"/"),o.writeDataSet("side","String",null,"right");var u=o.createGroup("seed");u.writeAttribute("delayed_type","String",null,"operation"),u.writeAttribute("delayed_operation","String",null,"unary math"),u.writeDataSet("method","String",null,"log1p");var l=u.createGroup("seed");l.writeAttribute("delayed_type","String",null,"operation"),l.writeAttribute("delayed_operation","String",null,"unary arithmetic"),l.writeDataSet("value","Float64",null,t),l.writeDataSet("method","String",null,"/"),l.writeDataSet("side","String",null,"right"),l.writeDataSet("along","Int32",null,1);var c=l.createGroup("seed");c.writeAttribute("delayed_type","String",null,"array"),c.writeAttribute("delayed_array","String",null,"custom alabaster local array"),c.writeDataSet("dimensions","Int32",null,[e.numberOfRows(),e.numberOfColumns()]),c.writeDataSet("type","String",null,"FLOAT"),c.writeDataSet("path","String",null,r),a&&(s=S.pJ(i),S.Yd(i))}catch(h){throw S.Yd(i),h}return{metadata:{$schema:"hdf5_delayed_array/v1.json",path:n+"/array.h5",array:{dimensions:[e.numberOfRows(),e.numberOfColumns()],type:"number"},hdf5_delayed_array:{group:"logcounts"}},contents:s}}nt.yh.prototype._bioconductor_LENGTH=function(){return this.length},nt.do.prototype._bioconductor_LENGTH=function(){return this.length},nt.lt.prototype._bioconductor_LENGTH=function(){return this.length};var st={lfc:"lfc",delta_detected:"deltaDetected",auc:"auc",cohen:"cohen"};function ot(e,t,n){var r,a=e.numberOfCells(),i=e.numberOfPCs(),s=S._u({extension:".h5"}),o=s,u=S.ll(s);try{r=S.RJ(a*i);for(var l=e.principalComponents({copy:!1}),c=r.array(),h=0;h<a;h++)for(var f=0;f<i;f++)c[h+f*a]=l[f+h*i];u.writeDataSet("data","Float64",[i,a],r),n&&(o=S.pJ(s),S.Yd(s))}catch(d){throw S.Yd(s),d}finally{S.gd(r)}return{metadata:{$schema:"hdf5_dense_array/v1.json",path:t+"/matrix.h5",array:{dimensions:[a,i]},hdf5_dense_array:{dataset:"data"}},contents:o}}function ut(e,t,n){var r,a=e[0].length,i=e.length,s=S._u({extension:".h5"}),o=s,u=S.ll(s);try{r=S.RJ(a*i);for(var l=0;l<i;l++){if(e[l].length!==a)throw new Error("all dimensions must have the same length");r.set(e[l],a*l)}u.writeDataSet("data","Float64",[i,a],r),n&&(o=S.pJ(s),S.Yd(s))}catch(c){throw S.Yd(s),c}finally{S.gd(r)}return{metadata:{$schema:"hdf5_dense_array/v1.json",path:t+"/matrix.h5",array:{dimensions:[a,i]},hdf5_dense_array:{dataset:"data"}},contents:o}}var lt=n(714);function ct(e){var t;if(e instanceof Array){if(t={type:"list",values:[]},e.length){var n,a=!0,i=!0,s=!0,o=(0,r.Z)(e);try{for(o.s();!(n=o.n()).done;){var u=n.value;null!==u&&("string"!==typeof u&&(a=!1),"boolean"!==typeof u&&(i=!1),"number"!==typeof u&&(s=!1))}}catch(m){o.e(m)}finally{o.f()}if(a)t.type="string",t.values=e;else if(i)t.type="boolean",t.values=e;else if(s)t.type="number",t.values=e;else{var l,c=(0,r.Z)(e);try{for(c.s();!(l=c.n()).done;){var h=l.value;t.values.push(ct(h))}}catch(m){c.e(m)}finally{c.f()}}}}else if(e.constructor===Object){t={type:"list",values:[],names:[]};for(var f=0,d=Object.entries(e);f<d.length;f++){var p=(0,Z.Z)(d[f],2),v=p[0],_=p[1];t.names.push(v),t.values.push(ct(_))}}else if(e instanceof Int32Array)t={type:"integer",values:Array.from(e)};else if(e instanceof nt.do)t={type:"integer",values:Array.from(e.array())};else if(e instanceof Float64Array)t={type:"number",values:Array.from(e)};else if(e instanceof nt.lt)t={type:"number",values:Array.from(e.array())};else if("number"==typeof e)t={type:"number",values:e};else if("string"==typeof e)t={type:"string",values:e};else{if("boolean"!=typeof e)throw new Error("don't know how to save entry of type '"+typeof e+"'");t={type:"boolean",values:e}}return t}function ht(e,t){var n=ct(e),r=JSON.stringify(n,null,2)+"\n";return{metadata:{$schema:"json_simple_list/v1.json",path:t+"/simple.json.gz",simple_list:{children:[]},json_simple_list:{compression:"gzip"}},contents:lt.iv(r)}}function ft(e,t,n,a,i,s,o){for(var u=e.cell_filtering.fetchFilteredMatrix().numberOfColumns(),l={},c=0,h=Object.keys(t);c<h.length;c++){l[h[c]]=new G.NE({},{numberOfRows:u})}if(e.rna_quality_control.valid()){var f=new G.NE({},{numberOfRows:u});f.$setColumn("sums",e.cell_filtering.applyFilter(e.rna_quality_control.fetchMetrics().sums({copy:!1}))),f.$setColumn("detected",e.cell_filtering.applyFilter(e.rna_quality_control.fetchMetrics().detected({copy:!1}))),f.$setColumn("proportions",e.cell_filtering.applyFilter(e.rna_quality_control.fetchMetrics().subsetProportions(0,{copy:!1}))),l.RNA.$setColumn("rna_quality_control",f),i.RNA.rna_quality_control={filters:{sums:e.rna_quality_control.fetchFilters().thresholdsSums(),detected:e.rna_quality_control.fetchFilters().thresholdsDetected(),proportions:e.rna_quality_control.fetchFilters().thresholdsSubsetProportions(0)}}}if(e.adt_quality_control.valid()){var d=new G.NE({},{numberOfRows:u});d.$setColumn("sums",e.cell_filtering.applyFilter(e.adt_quality_control.fetchMetrics().sums({copy:!1}))),d.$setColumn("detected",e.cell_filtering.applyFilter(e.adt_quality_control.fetchMetrics().detected({copy:!1}))),d.$setColumn("igg_totals",e.cell_filtering.applyFilter(e.adt_quality_control.fetchMetrics().subsetTotals(0,{copy:!1}))),l.ADT.$setColumn("adt_quality_control",d),i.ADT.adt_quality_control={filters:{detected:e.adt_quality_control.fetchFilters().thresholdsDetected(),igg_totals:e.adt_quality_control.fetchFilters().thresholdsSubsetTotals(0)}}}if(e.crispr_quality_control.valid()){var p=new G.NE({},{numberOfRows:u});p.$setColumn("sums",e.cell_filtering.applyFilter(e.crispr_quality_control.fetchMetrics().sums({copy:!1}))),p.$setColumn("detected",e.cell_filtering.applyFilter(e.crispr_quality_control.fetchMetrics().detected({copy:!1}))),p.$setColumn("max_proportion",e.cell_filtering.applyFilter(e.crispr_quality_control.fetchMetrics().maxProportions({copy:!1}))),p.$setColumn("max_index",e.cell_filtering.applyFilter(e.crispr_quality_control.fetchMetrics().maxIndex({copy:!1}))),l.CRISPR.$setColumn("crispr_quality_control",p),i.CRISPR.crispr_quality_control={filters:{max_count:e.crispr_quality_control.fetchFilters().thresholdsMaxCount()}}}e.rna_normalization.valid()&&l.RNA.$setColumn("sizeFactor",e.rna_normalization.fetchSizeFactors()),e.adt_normalization.valid()&&l.ADT.$setColumn("sizeFactor",e.adt_normalization.fetchSizeFactors()),e.crispr_normalization.valid()&&l.CRISPR.$setColumn("sizeFactor",e.crispr_normalization.fetchSizeFactors());var v=e.cell_filtering.fetchDiscards();if(null!==v){var _=[];v.forEach((function(e,t){e||_.push(t)})),l[n].$setColumn("retained",_)}var m=e.choose_clustering.fetchClusters().map((function(e){return e+1}));l[n].$setColumn("clusters",m);var w=e.cell_filtering.fetchFilteredBlock();if(null!==w){l[n].$setColumn("block",w);var g=new Array(w.length),y=e.inputs.fetchBlockLevels();w.forEach((function(e,t){g[t]=y[e]})),l[n].$setColumn("named_block",g),i[n].block_levels=y}for(var b=0,A=Object.entries(t);b<A.length;b++){var k=(0,Z.Z)(A[b],2),x=k[0],E=k[1],I=rt(l[x],E+"coldata",{forceBuffer:o});I.self.metadata.is_child=!0,a[x].summarized_experiment.column_data.resource.path=I.self.metadata.path,s.push(I.self);var S,B=(0,r.Z)(I.children);try{for(B.s();!(S=B.n()).done;){var C=S.value;s.push(C)}}catch(z){B.e(z)}finally{B.f()}}}function dt(e,t,n,a,i,s,o){for(var u=e.inputs.fetchFeatureAnnotations(),l={},c=0,h=Object.keys(t);c<h.length;c++){var f=h[c];l[f]=u[f]}if("RNA"in t){var d=e.feature_selection.fetchResults(),p=new G.NE({mean:d.means({copy:"view"}),variance:d.variances({copy:"view"}),fitted:d.fitted({copy:"view"}),residual:d.residuals({copy:"view"})},{columnOrder:["mean","variance","fitted","residual"]});l.RNA=l.RNA.setColumn("feature_selection",p)}!function(e,t,n){var a,i={min:0,mean:1,min_rank:4},s=e.marker_detection.fetchParameters().compute_auc,o=(0,r.Z)(t);try{for(o.s();!(a=o.n()).done;){for(var u=a.value,l=e.marker_detection.fetchResults()[u],c=l.numberOfGroups(),h=n[u].numberOfRows(),f=new G.NE({},{numberOfRows:h}),d=0;d<c;d++){for(var p=new G.NE({},{numberOfRows:h}),v=0,_=["means","detected"];v<_.length;v++){var m=_[v];p.$setColumn(m,l[m](d,{copy:"view"}))}for(var w=0,g=Object.entries(st);w<g.length;w++){var y=(0,Z.Z)(g[w],2),b=y[0],A=y[1];if("auc"!=b||s)for(var k=0,x=Object.entries(i);k<x.length;k++){var E=(0,Z.Z)(x[k],2),I=E[0],S=E[1];p.$setColumn(b+"-"+I,l[A](d,{summary:S}))}}f.$setColumn(String(d+1),p)}n[u]=n[u].setColumn("marker_detection",f)}}catch(B){o.e(B)}finally{o.f()}}(e,Object.keys(t),l),function(e,t,n,a,i){for(var s=e.custom_selections.fetchParameters().compute_auc,o=e.custom_selections.fetchSelections(),u=(0,W.Z)({},o),l=0,c=Object.entries(u);l<c.length;l++){var h=(0,Z.Z)(c[l],2),f=h[0],d=h[1];d instanceof Int32Array||(u[f]=new Int32Array(d))}i[n].custom_selections=u;var p,v=(0,r.Z)(t);try{for(v.s();!(p=v.n()).done;){for(var _=p.value,m=a[_].numberOfRows(),w=new G.NE({},{numberOfRows:m}),g=0,y=Object.keys(o);g<y.length;g++){for(var b=y[g],A=e.custom_selections.fetchResults(b)[_],k=new G.NE({},{numberOfRows:m}),x=0,E=["means","detected"];x<E.length;x++){var I=E[x];k.$setColumn(I,A[I](1,{copy:"view"}))}for(var S=0,B=Object.entries(st);S<B.length;S++){var C=(0,Z.Z)(B[S],2),z=C[0],R=C[1];("auc"!=z||s)&&k.$setColumn(z,A[R](1,{copy:"view"}))}w.$setColumn(b,k)}a[_]=a[_].setColumn("custom_selections",w)}}catch(F){v.e(F)}finally{v.f()}}(e,Object.keys(t),n,l,i);for(var v=0,_=Object.entries(t);v<_.length;v++){var m=(0,Z.Z)(_[v],2),w=m[0],g=m[1],y=rt(l[w],g+"rowdata",{forceBuffer:o});y.self.metadata.is_child=!0,a[w].summarized_experiment.row_data.resource.path=y.self.metadata.path,s.push(y.self);var b,A=(0,r.Z)(y.children);try{for(A.s();!(b=A.n()).done;){var k=b.value;s.push(k)}}catch(x){A.e(x)}finally{A.f()}}}function pt(e,t){return vt.apply(this,arguments)}function vt(){return vt=(0,j.Z)((0,T.Z)().mark((function e(t,n){var a,i,s,o,u,l,c,h,f,d,p,v,_,m,w,g,y,b,A,k,x,E,I,S,B,C,z,R,F,D,N,Q,O,q,U,M,W,j,G,L,H,Y,J,V,P,X,$,K,ee,te,ne,re,ae=arguments;return(0,T.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(ae.length>2&&void 0!==ae[2]?ae[2]:{}).forceBuffer,i=void 0!==a&&a,s=t.inputs.fetchFeatureAnnotations(),o=Object.keys(s),(u="RNA")in s){l=[u],c=(0,r.Z)(o);try{for(c.s();!(h=c.n()).done;)(f=h.value)!==u&&l.push(f)}catch(ie){c.e(ie)}finally{c.f()}}else u=o[0];for(d=[],p={},v={},_={},m=0,w=o;m<w.length;m++)g=w[m],y=n+"/",g!=u&&(y+="altexp-"+g+"/"),v[g]=y,b=y+"experiment.json",p[g]={$schema:"single_cell_experiment/v1.json",path:b,summarized_experiment:{row_data:{resource:{type:"local",path:null}},column_data:{resource:{type:"local",path:null}},assays:[],other_data:{resource:{type:"local",path:null}}},single_cell_experiment:{alternative_experiments:[],reduced_dimensions:[]}},A=t.cell_filtering.fetchFilteredMatrix().get(g),p[g].summarized_experiment.dimensions=[A.numberOfRows(),A.numberOfColumns()],g==u?p[g].single_cell_experiment.main_experiment_name=g:p[u].single_cell_experiment.alternative_experiments.push({name:g,resource:{type:"local",path:b}}),_[g]={};for(ft(t,v,u,p,_,d,i),dt(t,v,u,p,_,d,i),k=0,x=Object.entries(v);k<x.length;k++)E=(0,Z.Z)(x[k],2),I=E[0],S=E[1],B=t.cell_filtering.fetchFilteredMatrix().get(I),(C=at(B,S+"assay-counts",i)).metadata.is_child=!0,p[I].summarized_experiment.assays.push({name:"counts",resource:{type:"local",path:C.metadata.path}}),d.push(C);z=0,R=Object.entries(v);case 14:if(!(z<R.length)){e.next=37;break}F=(0,Z.Z)(R[z],2),D=F[0],N=F[1],Q=null,e.t0=D,e.next="RNA"===e.t0?20:"ADT"===e.t0?22:"CRISPR"===e.t0?24:26;break;case 20:return Q=t.rna_normalization,e.abrupt("break",26);case 22:return Q=t.adt_normalization,e.abrupt("break",26);case 24:return Q=t.crispr_normalization,e.abrupt("break",26);case 26:if(null!=Q){e.next=28;break}return e.abrupt("continue",34);case 28:O=Q.fetchNormalizedMatrix(),q=Q.fetchSizeFactors(),(U=it(O,q,N+"assay-logcounts",p[D].summarized_experiment.assays[0].resource.path,i)).metadata.is_child=!0,p[D].summarized_experiment.assays.push({name:"logcounts",resource:{type:"local",path:U.metadata.path}}),d.push(U);case 34:z++,e.next=14;break;case 37:M=(0,T.Z)().mark((function e(){var n,r,a,s,o,u,l;return(0,T.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,Z.Z)(j[W],2),r=n[0],a=n[1],s=null,e.t0=r,e.next="RNA"===e.t0?5:"ADT"===e.t0?7:"CRISPR"===e.t0?9:11;break;case 5:return s=t.rna_pca,e.abrupt("break",11);case 7:return s=t.adt_pca,e.abrupt("break",11);case 9:return s=t.crispr_pca,e.abrupt("break",11);case 11:if(null!=s){e.next=13;break}return e.abrupt("return","continue");case 13:o=s.fetchPCs(),(u=ot(o,a+"reddim-pca",i)).metadata.is_child=!0,d.push(u),l=o.totalVariance(),_[r].pca={variance_explained:o.varianceExplained({copy:"view"}).map((function(e){return e/l}))},p[r].single_cell_experiment.reduced_dimensions.push({name:"PCA",resource:{type:"local",path:u.metadata.path}});case 20:case"end":return e.stop()}}),e)})),W=0,j=Object.entries(v);case 39:if(!(W<j.length)){e.next=47;break}return e.delegateYield(M(),"t1",41);case 41:if("continue"!==e.t1){e.next=44;break}return e.abrupt("continue",44);case 44:W++,e.next=39;break;case 47:G=0,L=["tsne","umap"];case 48:if(!(G<L.length)){e.next=60;break}return H=L[G],e.next=52,t[H].fetchResults({copy:!1});case 52:Y=e.sent,(J=ut([Y.x,Y.y],v[u]+"reddim-"+H,i)).metadata.is_child=!0,p[u].single_cell_experiment.reduced_dimensions.push({name:H.toUpperCase(),resource:{type:"local",path:J.metadata.path}}),d.push(J);case 57:G++,e.next=48;break;case 60:return e.next=62,t.cell_labelling.fetchResults();case 62:for(_[u].cell_labelling=e.sent,V=0,P=Object.entries(v);V<P.length;V++)X=(0,Z.Z)(P[V],2),$=X[0],K=X[1],ee=ht(_[$],K+"other"),p[$].summarized_experiment.other_data.resource.path=ee.metadata.path,ee.metadata.is_child=!0,d.push(ee);for(te=0,ne=o;te<ne.length;te++)(re=ne[te])!==u&&d.push({metadata:p[re]});return e.abrupt("return",{metadata:p[u],files:d});case 66:case"end":return e.stop()}}),e)}))),vt.apply(this,arguments)}var _t=n(8109);function mt(e){return wt.apply(this,arguments)}function wt(){return(wt=(0,j.Z)((0,T.Z)().mark((function e(t){var n,a,i;return(0,T.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,r.Z)(t),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=12;break}if("contents"in(i=a.value)){e.next=7;break}return e.abrupt("continue",10);case 7:return e.next=9,(0,_t.FB)(i.contents);case 9:i.metadata.md5sum=e.sent;case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})))).apply(this,arguments)}function gt(e,t){throw new Error("cannot realize files into a directory in a web context")}var yt=n(5587);function bt(e,t){return At.apply(this,arguments)}function At(){return At=(0,j.Z)((0,T.Z)().mark((function e(t,n){var r,a,i,s,o,u,l,c,h=arguments;return(0,T.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(r=h.length>2&&void 0!==h[2]?h[2]:{}).forceBuffer,i=void 0===a?null:a,s=r.directory,null!==(o=void 0===s?null:s)&&(i=!1),e.next=4,pt(t,n,{forceBuffer:i});case 4:return u=e.sent,l=u.metadata,(c=u.files).push({metadata:l}),c.push({metadata:{$schema:"redirection/v1.json",path:n,redirection:{targets:[{type:"local",location:l.path}]}}}),e.next=11,mt(c);case 11:if(i||null===o){e.next=14;break}return e.next=14,gt(0,0);case 14:return e.abrupt("return",c);case 15:case"end":return e.stop()}}),e)}))),At.apply(this,arguments)}function Zt(e){var t,n,a=new yt,i=(0,r.Z)(e);try{for(i.s();!(t=i.n()).done;){var s=t.value,o=void 0;"contents"in s?(o=".json",s.contents instanceof Uint8Array?a.file(s.metadata.path,s.contents):a.file(s.metadata.path,(n=s.contents,S.pJ(n)))):o=s.metadata.$schema.startsWith("redirection/")?".json":"",a.file(s.metadata.path+o,JSON.stringify(s.metadata,null,2)+"\n")}}catch(u){i.e(u)}finally{i.f()}return a.generateAsync({type:"uint8array"})}var kt=n(4071);function xt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.numberOfThreads,n=void 0===t?1:t,r=e.localFile,a=void 0!==r&&r,i=S.j2({numberOfThreads:n,localFile:a});return kt.yc.localFile=a,i.then((function(e){return null}))}},7132:function(e,t,n){n.d(t,{Fl:function(){return U},zD:function(){return g.z},H$:function(){return ge},By:function(){return r.B},en:function(){return Y.e},cO:function(){return Oe},bw:function(){return m.bw},Qr:function(){return m.Qr}});var r=n(2152),a=n(4165),i=n(5861),s=n(1413),o=n(5671),u=n(3144),l=n(101),c=n(2346),h=n(3889),f=n(2793),d=n(8916),p=n(3324),v=n(5831),_=n(7462),m=n(7173),w=n(3121),g=n(6016);function y(e,t){var n=[];if("X"in e.children&&n.push("X"),"layers"in e.children){var r=e.open("layers");if(!(r instanceof v.Fv))throw new Error("expected a 'layers' group in a H5AD file");for(var a=0,i=Object.keys(r.children);a<i.length;a++){var s=i[a];n.push("layers/"+s)}}if(0==n.length)throw new Error("failed to find any assay in the H5AD file");var o=v.N6(t,n[0]);return{names:n,rows:o.rows,columns:o.columns}}function b(e){for(var t={},n=0,r=Object.entries(e.children);n<r.length;n++){var a=(0,p.Z)(r[n],2),i=a[0],s=a[1];if("DataSet"==s){var o=e.open(i,{load:!0});t[i]=o.values}else if("Group"==s){var u=e.open(i);if("categories"in u.children&&"codes"in u.children){var l=m.vp(u,"categories"),c=u.open("codes",{load:!0}).values;t[i]=_.Nd(l,c)}}}if("__categories"in e.children&&"Group"==e.children.__categories)for(var h=e.open("__categories"),f=0,d=Object.entries(h.children);f<d.length;f++){var v=(0,p.Z)(d[f],2),w=v[0];v[1];if(w in t){var g=m.vp(h,w);t[w]=_.Nd(g,t[w])}}if(0==Object.keys(t).length)return null;var y=null;return"_index"in t&&(y=t._index,delete t._index),new _.NE(t,{rowNames:y})}function A(e){return"var"in e.children&&"Group"==e.children.var?b(e.open("var")):null}function Z(e){return"obs"in e.children&&"Group"==e.children.obs?b(e.open("obs")):null}var k=new WeakMap,x=new WeakMap,E=new WeakMap,I=new WeakMap,S=new WeakMap,B=new WeakMap,C=new WeakMap,z=new WeakMap,R=new WeakSet,F=new WeakSet,D=new WeakSet,N=new WeakSet,Q=new WeakSet,O=new WeakSet,q=new WeakSet,U=function(){function e(t){(0,o.Z)(this,e),(0,l.Z)(this,q),(0,l.Z)(this,O),(0,l.Z)(this,Q),(0,l.Z)(this,N),(0,l.Z)(this,D),(0,l.Z)(this,F),(0,l.Z)(this,R),(0,c.Z)(this,k,{writable:!0,value:void 0}),(0,c.Z)(this,x,{writable:!0,value:void 0}),(0,c.Z)(this,E,{writable:!0,value:void 0}),(0,c.Z)(this,I,{writable:!0,value:void 0}),(0,c.Z)(this,S,{writable:!0,value:void 0}),(0,c.Z)(this,B,{writable:!0,value:void 0}),(0,c.Z)(this,C,{writable:!0,value:void 0}),(0,c.Z)(this,z,{writable:!0,value:void 0}),t instanceof g.z?(0,f.Z)(this,k,t):(0,f.Z)(this,k,new g.z(t)),(0,f.Z)(this,z,e.defaults()),this.clear()}return(0,u.Z)(e,[{key:"options",value:function(){return(0,s.Z)({},(0,d.Z)(this,z))}},{key:"setOptions",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=(0,p.Z)(n[t],2),a=r[0],i=r[1];(0,d.Z)(this,z)[a]=i}}},{key:"clear",value:function(){"function"==typeof(0,d.Z)(this,E)&&(0,d.Z)(this,E).call(this),(0,f.Z)(this,E,null),(0,f.Z)(this,x,null),(0,f.Z)(this,I,null),(0,f.Z)(this,S,null),(0,f.Z)(this,B,null),(0,f.Z)(this,C,null)}},{key:"abbreviate",value:function(){return(0,h.Z)(this,R,M).call(this,(function(e){return{name:e.name(),size:e.size()}}))}},{key:"summary",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,h.Z)(this,N,j).call(this),(0,h.Z)(this,Q,G).call(this),(0,h.Z)(this,D,T).call(this);var n={all_features:(0,d.Z)(this,S),cells:(0,d.Z)(this,B),all_assay_names:(0,d.Z)(this,C).names};return t||this.clear(),n}},{key:"previewPrimaryIds",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,h.Z)(this,N,j).call(this);var n=w.h8((0,d.Z)(this,S),(0,d.Z)(this,z).featureTypeColumnName,(0,h.Z)(this,O,L).call(this),"RNA",(0,h.Z)(this,q,H).call(this));return t||this.clear(),n}},{key:"load",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,h.Z)(this,N,j).call(this),(0,h.Z)(this,Q,G).call(this),(0,h.Z)(this,D,T).call(this);var n=(0,d.Z)(this,z).countMatrixName;null==n&&(n=(0,d.Z)(this,C).names[0]);var r=v.EF((0,d.Z)(this,x),n),a=w.Bs(r,(0,d.Z)(this,S),(0,d.Z)(this,z).featureTypeColumnName,(0,h.Z)(this,O,L).call(this),"RNA");return a.cells=(0,d.Z)(this,B),a.primary_ids=w.P2(a.features,(0,h.Z)(this,q,H).call(this)),t||this.clear(),a}},{key:"serialize",value:function(){return(0,h.Z)(this,R,M).call(this,(function(e){return e}))}}],[{key:"defaults",value:function(){return{countMatrixName:null,featureTypeColumnName:null,featureTypeRnaName:"Gene Expression",featureTypeAdtName:"Antibody Capture",featureTypeCrisprName:"CRISPR Guide Capture",primaryRnaFeatureIdColumn:null,primaryAdtFeatureIdColumn:null,primaryCrisprFeatureIdColumn:null}}},{key:"format",value:function(){return"H5AD"}},{key:"unserialize",value:function(){var t=(0,i.Z)((0,a.Z)().mark((function t(n,r){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1==n.length&&"h5"==n[0].type){t.next=2;break}throw new Error("expected exactly one file of type 'h5' for H5AD unserialization");case 2:return t.abrupt("return",new e(n[0].file,r));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function M(e){return{files:[{type:"h5",file:e((0,d.Z)(this,k))}],options:this.options()}}function W(){if(null==(0,d.Z)(this,x)){var e=v.$H((0,d.Z)(this,k).content());(0,f.Z)(this,x,e.path),(0,f.Z)(this,E,e.flush),(0,f.Z)(this,I,new v.pT((0,d.Z)(this,x)))}}function T(){null===(0,d.Z)(this,C)&&((0,h.Z)(this,F,W).call(this),(0,f.Z)(this,C,y((0,d.Z)(this,I),(0,d.Z)(this,x))))}function j(){if(null===(0,d.Z)(this,S)){(0,h.Z)(this,F,W).call(this);var e=A((0,d.Z)(this,I));null==e&&((0,h.Z)(this,D,T).call(this),e=new _.NE({},{numberOfRows:(0,d.Z)(this,C).rows})),(0,f.Z)(this,S,e)}}function G(){if(null===(0,d.Z)(this,B)){(0,h.Z)(this,F,W).call(this);var e=Z((0,d.Z)(this,I));null===e&&((0,h.Z)(this,D,T).call(this),e=new _.NE({},{numberOfRows:(0,d.Z)(this,C).columns})),(0,f.Z)(this,B,e)}}function L(){return{RNA:(0,d.Z)(this,z).featureTypeRnaName,ADT:(0,d.Z)(this,z).featureTypeAdtName,CRISPR:(0,d.Z)(this,z).featureTypeCrisprName}}function H(){return{RNA:(0,d.Z)(this,z).primaryRnaFeatureIdColumn,ADT:(0,d.Z)(this,z).primaryAdtFeatureIdColumn,CRISPR:(0,d.Z)(this,z).primaryCrisprFeatureIdColumn}}var Y=n(7355);function J(e){var t,n,r=e.findAttribute("names");if(r<0)return null;try{n=(t=e.attribute(r)).values()}catch(a){throw new Error("failed to load listData names; "+a.message)}finally{v.gd(t)}if(n.length!=e.length())throw new Error("expected names to have same length as listData");return n}var V={DFrame:"S4Vectors"};function P(e){$(e,V,"DFrame");var t,n,r={},a=[];try{if(!((t=e.attribute("listData"))instanceof v.SV))throw new Error("listData slot should be a generic list");if(null==(a=J(t)))throw new Error("expected the listData list to be named");for(var i=function(){var e;try{if((e=t.load(s))instanceof v.qu&&!(e instanceof v.SV)){var n,i,o=e.values();if(e.findAttribute("class")>=0)try{if((n=e.attribute("class")).values().indexOf("factor")>=0&&e.findAttribute("levels")>=0){i=e.attribute("levels");var u=o.slice();u.forEach((function(e,t){u[t]=e-1})),o=_.Nd(i.values(),u)}}finally{v.gd(n),v.gd(i)}r[a[s]]=o}else e instanceof v.BA&&X(e,V)&&(r[a[s]]=P(e))}finally{v.gd(e)}},s=0;s<t.length();s++)i()}catch(h){throw new Error("failed to retrieve data from DataFrame's listData; "+h.message)}finally{v.gd(t)}var o=null;try{(n=e.attribute("rownames"))instanceof v.II&&(o=n.values())}catch(h){throw new Error("failed to retrieve row names from DataFrame; "+h.message)}finally{v.gd(n)}var u,l=null;if(0==a.length&&null==o)try{if(!((u=e.attribute("nrows"))instanceof v.D6))throw new Error("expected an integer vector as the 'nrows' slot");var c=u.values();if(1!=c.length)throw new Error("expected an integer vector of length 1 as the 'nrows' slot");l=c[0]}catch(h){throw new Error("failed to retrieve nrows from DataFrame; "+h.message)}finally{v.gd(u)}return new _.NE(r,{columnOrder:a,rowNames:o,numberOfRows:l})}function X(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=(0,p.Z)(r[n],2),i=a[0],s=a[1];if(e.className()==i&&e.packageName()==s)return!0}return!1}function $(e,t,n){if(!(e instanceof v.BA))throw new Error("expected an S4 object as the data frame");if(!X(e,t))throw new Error("object is not a "+n+" or one of its recognized subclasses")}function K(e){var t,n=e.findAttribute("NAMES");if(n<0)return null;var r=null;try{(t=e.attribute(n))instanceof v.II&&(r=t.values())}catch(a){throw new Error("failed to extract NAMES; "+a.message)}finally{v.gd(t)}return r}function ee(e){var t,n=null,r=e.findAttribute("rowRanges");if(r<0){var a;try{t=P(a=e.attribute("elementMetadata"))}catch(c){throw new Error("failed to extract features from the rowData; "+c.message)}finally{v.gd(a)}n=K(e)}else{var i;try{var s=(i=e.attribute(r)).attribute("elementMetadata");try{t=P(s)}catch(c){throw new Error("failed to extract mcols from the rowRanges; "+c.message)}finally{v.gd(s)}var o,u,l=i.findAttribute("partitioning");if(l<0)try{n=K(o=i.attribute("ranges"))}catch(c){throw new Error("failed to extract names from the rowRanges; "+c.message)}finally{v.gd(o)}else try{n=K(u=i.attribute(l))}catch(c){throw new Error("failed to extract names from the rowRanges; "+c.message)}finally{v.gd(u)}}catch(c){throw new Error("failed to extract features from the rowRanges; "+c.message)}finally{v.gd(i)}}return null!==n&&t.$setRowNames(n),t}function te(e){var t,n,r,a;try{null==(t=J(a=(r=(n=e.attribute("assays")).attribute("data")).attribute("listData")))&&(t=new Array(a.length())).fill(null)}catch(i){throw new Error("failed to extract assay data; "+i.message)}finally{v.gd(n),v.gd(a),v.gd(r)}return t}function ne(e,t,n){var r,a,i,s;try{s=(i=(a=e.attribute("assays")).attribute("data")).attribute("listData");var o,u=null;if("string"==typeof t){var l=J(s);if(null!==t&&null!=l)for(var c=0;c<l.length;c++)if(l[c]==t){u=c;break}if(null==u)throw new Error("no assay named '"+t+"'")}else{if(t>=s.length())throw new Error("assay index "+String(t)+" out of range");u=t}try{o=s.load(u),r=v.Bp(o,{forceInteger:n})}catch(h){throw new Error("failed to initialize sparse matrix from assay; "+h.message)}finally{v.gd(o)}}catch(h){throw new Error("failed to extract assay data; "+h.message)}finally{v.gd(a),v.gd(s),v.gd(i)}return r}function re(e){var t,n,r,a,i,s,o={handles:{},order:[]},u=e.findAttribute("int_colData");if(u<0)return o;try{var l=(t=e.attribute(u)).findAttribute("listData");if(l<0)return o;var c=(n=t.attribute(l)).findAttribute("names");if(c<0)return o;var h=(r=n.attribute(c)).values().indexOf("altExps");if(h<0)return o;var f=(a=n.load(h)).findAttribute("listData");if(f<0)return o;var d=(i=a.attribute(f)).findAttribute("names");if(d<0)return o;for(var p=(s=i.attribute(d)).values(),_=0;_<p.length;_++){var m=void 0;try{var w=(m=i.load(_)).attribute("se");o.handles[p[_]]=w,o.order.push(p[_]),ae(w)}catch(A){throw new Error("failed to load alternative Experiment '"+p[_]+"'; "+A.message)}finally{v.gd(m)}}}catch(A){for(var g=0,y=Object.values(o.handles);g<y.length;g++){var b=y[g];v.gd(b)}throw A}finally{v.gd(s),v.gd(i),v.gd(r),v.gd(n),v.gd(t)}return o}function ae(e){$(e,{SummarizedExperiment:"SummarizedExperiment",RangedSummarizedExperiment:"SummarizedExperiment",SingleCellExperiment:"SingleCellExperiment",SpatialExperiment:"SpatialExperiment"},"SummarizedExperiment")}var ie="",se=new WeakMap,oe=new WeakMap,ue=new WeakMap,le=new WeakMap,ce=new WeakMap,he=new WeakMap,fe=new WeakMap,de=new WeakMap,pe=new WeakSet,ve=new WeakSet,_e=new WeakSet,me=new WeakSet,we=new WeakSet,ge=function(){function e(t){(0,o.Z)(this,e),(0,l.Z)(this,we),(0,l.Z)(this,me),(0,l.Z)(this,_e),(0,l.Z)(this,ve),(0,l.Z)(this,pe),(0,c.Z)(this,se,{writable:!0,value:void 0}),(0,c.Z)(this,oe,{writable:!0,value:void 0}),(0,c.Z)(this,ue,{writable:!0,value:void 0}),(0,c.Z)(this,le,{writable:!0,value:void 0}),(0,c.Z)(this,ce,{writable:!0,value:void 0}),(0,c.Z)(this,he,{writable:!0,value:void 0}),(0,c.Z)(this,fe,{writable:!0,value:void 0}),(0,c.Z)(this,de,{writable:!0,value:void 0}),t instanceof g.z?(0,f.Z)(this,se,t):(0,f.Z)(this,se,new g.z(t)),(0,f.Z)(this,de,e.defaults()),this.clear()}return(0,u.Z)(e,[{key:"options",value:function(){return(0,s.Z)({},(0,d.Z)(this,de))}},{key:"setOptions",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=(0,p.Z)(n[t],2),a=r[0],i=r[1];(0,d.Z)(this,de)[a]=i}}},{key:"clear",value:function(){if(v.gd((0,d.Z)(this,ue)),"undefined"!=typeof(0,d.Z)(this,le)&&null!==(0,d.Z)(this,le))for(var e=0,t=Object.values((0,d.Z)(this,le));e<t.length;e++){var n=t[e];v.gd(n)}v.gd((0,d.Z)(this,oe)),(0,f.Z)(this,ue,null),(0,f.Z)(this,le,null),(0,f.Z)(this,oe,null),(0,f.Z)(this,he,null),(0,f.Z)(this,fe,null)}},{key:"abbreviate",value:function(){return(0,h.Z)(this,pe,ye).call(this,(function(e){return{name:e.name(),size:e.size()}}))}},{key:"summary",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,h.Z)(this,ve,be).call(this),(0,h.Z)(this,_e,Ae).call(this),(0,h.Z)(this,me,Ze).call(this);var n={};n[ie]=te((0,d.Z)(this,ue));for(var r=0,a=Object.entries((0,d.Z)(this,le));r<a.length;r++){var i=(0,p.Z)(a[r],2),s=i[0],o=i[1];try{n[s]=te(o)}catch(l){console.warn("failed to extract features for alternative Experiment '"+s+"'; "+l.message)}}var u={modality_features:(0,d.Z)(this,he),cells:(0,d.Z)(this,fe),modality_assay_names:n};return t||this.clear(),u}},{key:"previewPrimaryIds",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,h.Z)(this,_e,Ae).call(this);var n={RNA:(0,d.Z)(this,de).rnaExperiment,ADT:(0,d.Z)(this,de).adtExperiment,CRISPR:(0,d.Z)(this,de).crisprExperiment},r=w.it((0,d.Z)(this,he),n,(0,h.Z)(this,we,ke).call(this));return t||this.clear(),r}},{key:"load",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,h.Z)(this,ve,be).call(this),(0,h.Z)(this,_e,Ae).call(this),(0,h.Z)(this,me,Ze).call(this);var n={matrix:new v.VU,row_ids:{},features:{},cells:(0,d.Z)(this,fe)},r={RNA:{exp:(0,d.Z)(this,de).rnaExperiment,assay:(0,d.Z)(this,de).rnaCountAssay},ADT:{exp:(0,d.Z)(this,de).adtExperiment,assay:(0,d.Z)(this,de).adtCountAssay},CRISPR:{exp:(0,d.Z)(this,de).crisprExperiment,assay:(0,d.Z)(this,de).crisprCountAssay}};try{for(var a=0,i=Object.entries(r);a<i.length;a++){var s=(0,p.Z)(i[a],2),o=s[0],u=s[1];if(null!==u.exp){var l=void 0,c=u.exp;if("string"==typeof u.exp)if(""===u.exp)l=(0,d.Z)(this,ue);else{if(!(u.exp in(0,d.Z)(this,le)))continue;l=(0,d.Z)(this,le)[u.exp]}else{if(u.exp>=(0,d.Z)(this,ce).length)continue;c=(0,d.Z)(this,ce)[u.exp],l=(0,d.Z)(this,le)[c]}var f=ne(l,u.assay,!0);n.matrix.add(o,f.matrix);var m=f.row_ids;n.row_ids[o]=m,n.features[o]=_.Nd((0,d.Z)(this,he)[c],m)}}n.primary_ids=w.P2(n.features,(0,h.Z)(this,we,ke).call(this))}catch(g){throw v.gd(n.matrix),g}return t||this.clear(),n}},{key:"serialize",value:function(){return(0,h.Z)(this,pe,ye).call(this,(function(e){return e}))}}],[{key:"defaults",value:function(){return{rnaCountAssay:0,adtCountAssay:0,crisprCountAssay:0,rnaExperiment:"",adtExperiment:"Antibody Capture",crisprExperiment:"CRISPR Guide Capture",primaryRnaFeatureIdColumn:null,primaryAdtFeatureIdColumn:null,primaryCrisprFeatureIdColumn:null}}},{key:"format",value:function(){return"SummarizedExperiment"}},{key:"unserialize",value:function(){var t=(0,i.Z)((0,a.Z)().mark((function t(n,r){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1==n.length&&"rds"==n[0].type){t.next=2;break}throw new Error("expected exactly one file of type 'rds' for SummarizedExperiment unserialization");case 2:return t.abrupt("return",new e(n[0].file,r));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function ye(e){return{files:[{type:"rds",file:e((0,d.Z)(this,se))}],options:this.options()}}function be(){if(null===(0,d.Z)(this,oe)){(0,f.Z)(this,oe,v.p$((0,d.Z)(this,se).content())),(0,f.Z)(this,ue,(0,d.Z)(this,oe).value());try{ae((0,d.Z)(this,ue));var e=re((0,d.Z)(this,ue)),t=e.handles,n=e.order;(0,f.Z)(this,le,t),(0,f.Z)(this,ce,n)}catch(r){throw(0,d.Z)(this,ue).free(),(0,d.Z)(this,oe).free(),r}}}function Ae(){if(null===(0,d.Z)(this,he)){(0,h.Z)(this,ve,be).call(this),(0,f.Z)(this,he,{}),(0,d.Z)(this,he)[ie]=ee((0,d.Z)(this,ue));for(var e=0,t=Object.entries((0,d.Z)(this,le));e<t.length;e++){var n=(0,p.Z)(t[e],2),r=n[0],a=n[1];try{(0,d.Z)(this,he)[r]=ee(a)}catch(i){console.warn("failed to extract features for alternative Experiment '"+r+"'; "+i.message)}}}}function Ze(){if(null===(0,d.Z)(this,fe)){(0,h.Z)(this,ve,be).call(this);var e=(0,d.Z)(this,ue).attribute("colData");try{(0,f.Z)(this,fe,P(e))}catch(t){throw new Error("failed to extract colData from a SummarizedExperiment; "+t.message)}finally{v.gd(e)}}}function ke(){return{RNA:(0,d.Z)(this,de).primaryRnaFeatureIdColumn,ADT:(0,d.Z)(this,de).primaryAdtFeatureIdColumn,CRISPR:(0,d.Z)(this,de).primaryCrisprFeatureIdColumn}}var xe=n(5173),Ee=n(7326),Ie=n(136),Se=n(9388),Be=n(5587),Ce=new WeakMap,ze=new WeakMap,Re=function(){function e(t,n){(0,o.Z)(this,e),(0,c.Z)(this,Ce,{writable:!0,value:void 0}),(0,c.Z)(this,ze,{writable:!0,value:void 0}),(0,f.Z)(this,Ce,t),(0,f.Z)(this,ze,null)}return(0,u.Z)(e,[{key:"file",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(0,d.Z)(this,ze)){e.next=8;break}return e.t0=f.Z,e.t1=this,e.t2=ze,e.next=6,Be.loadAsync((0,d.Z)(this,Ce).buffer());case 6:e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3);case 8:return e.next=10,(0,d.Z)(this,ze).file(t).async("uint8array");case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"metadata",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(0,d.Z)(this,ze)){e.next=8;break}return e.t0=f.Z,e.t1=this,e.t2=ze,e.next=6,Be.loadAsync((0,d.Z)(this,Ce).buffer());case 6:e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3);case 8:return t.endsWith(".json")||(t+=".json"),e.next=12,(0,d.Z)(this,ze).file(t).async("string");case 12:if(n=e.sent,!(r=JSON.parse(n)).$schema.startsWith("redirection/")){e.next=18;break}t=r.redirection.targets[0].location,e.next=19;break;case 18:return e.abrupt("return",r);case 19:e.next=8;break;case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){(0,f.Z)(this,ze,null)}}]),e}(),Fe=new WeakMap,De=new WeakMap,Ne=new WeakSet;xe.GY;function Qe(e){var t=[{type:"zip",file:e((0,d.Z)(this,Fe))}],n=this.options();return n.datasetName=(0,d.Z)(this,De),{files:t,options:n}}xe.Ne;var Oe={"10X":r.B,MatrixMarket:Y.e,H5AD:U,SummarizedExperiment:ge}},6546:function(e,t,n){n.d(t,{Cy:function(){return g},ED:function(){return T},tq:function(){return E}});var r=n(7762),a=n(4165),i=n(3324),s=n(5861),o=n(1413),u=n(5671),l=n(3144),c=n(101),h=n(2346),f=n(3889),d=n(2415),p=n(8916),v=n(2793),_=n(5831),m=n(7462),w=n(7891),g=(n(7132),"inputs"),y="raw_subset_indices",b=new WeakMap,A=new WeakMap,Z=new WeakMap,k=new WeakMap,x=new WeakSet,E=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,u.Z)(this,e),(0,c.Z)(this,x),(0,h.Z)(this,b,{writable:!0,value:void 0}),(0,h.Z)(this,A,{writable:!0,value:void 0}),(0,h.Z)(this,Z,{writable:!0,value:void 0}),(0,h.Z)(this,k,{writable:!0,value:void 0}),(0,v.Z)(this,b,null===t?{}:t),(0,v.Z)(this,A,null===n?{}:n),(0,v.Z)(this,Z,null===r?{}:r),(0,v.Z)(this,k,!1),this.changed=!1}return(0,l.Z)(e,[{key:"free",value:function(){w.Yl((0,p.Z)(this,A).matrix),w.Yl((0,p.Z)(this,A).raw_matrix),w.Yl((0,p.Z)(this,A).block_ids),w.Yl((0,p.Z)(this,A).raw_block_ids),w.Yl((0,p.Z)(this,A).multi_block_ids)}},{key:"fetchCountMatrix",value:function(){return(0,p.Z)(this,A).matrix}},{key:"fetchFeatureAnnotations",value:function(){return(0,p.Z)(this,A).genes}},{key:"fetchRowIds",value:function(){return(0,p.Z)(this,A).row_ids}},{key:"fetchCellAnnotations",value:function(){return(0,p.Z)(this,A).annotations}},{key:"fetchBlock",value:function(){return(0,p.Z)(this,A).block_ids}},{key:"fetchBlockLevels",value:function(){return(0,p.Z)(this,A).block_levels}},{key:"fetchParameters",value:function(){var t,n=(0,o.Z)({},(0,p.Z)(this,b));return n.subset=(0,d.Z)(t=this.constructor,e,I).call(t,n.subset),n}},{key:"fetchDatasets",value:function(){return(0,p.Z)(this,A).datasets}},{key:"fetchDirectSubset",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).copy,t=void 0===e||e;if(y in(0,p.Z)(this,A)){var n=(0,p.Z)(this,A)[y];return t?n.slice():n}return null}},{key:"guessRnaFeatureTypes",value:function(){return"RNA"in(0,p.Z)(this,A).genes?("inferred_rna_types"in(0,p.Z)(this,A)||((0,p.Z)(this,A).inferred_rna_types=w.zS((0,p.Z)(this,A).genes.RNA)),(0,p.Z)(this,A).inferred_rna_types):null}},{key:"enableDatasetCache",value:function(e){(0,v.Z)(this,k,e)}},{key:"compute",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(n,r){var s,u,l,c,h,f,_,m,g;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=r.block_factor,u=r.subset,this.changed=!1,null===n){t.next=12;break}for(l={},c=0,h=Object.entries(n);c<h.length;c++)f=(0,i.Z)(h[c],2),_=f[0],m=f[1],l[_]={format:m.constructor.format(),details:m.abbreviate()};if(!w.xi(l,(0,p.Z)(this,Z))){t.next=12;break}return t.next=8,O(n,(0,p.Z)(this,A),(0,p.Z)(this,k));case 8:(0,v.Z)(this,Z,l),(0,p.Z)(this,A).datasets=(0,o.Z)({},n),delete(0,p.Z)(this,A).inferred_rna_types,this.changed=!0;case 12:return(this.changed||(0,p.Z)(this,b).block_factor!==s)&&(U(s,(0,p.Z)(this,A)),(0,p.Z)(this,b).block_factor=s,this.changed=!0),(this.changed||!(y in(0,p.Z)(this,A))&&w.xi(u,(0,p.Z)(this,b).subset)||!("matrix"in(0,p.Z)(this,A)))&&(M(u,(0,p.Z)(this,A)),(0,p.Z)(this,b).subset=(0,d.Z)(g=this.constructor,e,I).call(g,u),this.changed=!0),t.abrupt("return",null);case 15:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"undoSubset",value:function(e){if("matrix"in(0,p.Z)(this,A)){var t,n=this.fetchCountMatrix().numberOfColumns(),a=(0,r.Z)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i<0||i>=n)throw new Error("entries of 'indices' should be less than the number of cells in the dataset")}}catch(u){a.e(u)}finally{a.f()}}var s=null;"subset"in(0,p.Z)(this,b)&&(s=(0,p.Z)(this,b).subset);var o=Q(s,(0,p.Z)(this,A));null!==o&&e.forEach((function(t,n){e[n]=o[t]}))}},{key:"setDirectSubset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.copy,r=void 0===n||n,a=t.onOriginal,i=void 0!==a&&a;null!==e?(0,p.Z)(this,A)[y]=(0,f.Z)(this,x,S).call(this,e,r,i):delete(0,p.Z)(this,A)[y],_.gd((0,p.Z)(this,A).matrix),delete(0,p.Z)(this,A).matrix}},{key:"createDirectSubset",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.copy,a=void 0===r||r,i=n.onOriginal,s=void 0!==i&&i,o={};o[y]=(0,f.Z)(this,x,S).call(this,t,a,s),o.raw_matrix=(0,p.Z)(this,A).raw_matrix.clone();for(var u=0,l=["multi_block_ids","raw_block_ids"];u<l.length;u++){var c=l[u];c in(0,p.Z)(this,A)&&(null===(0,p.Z)(this,A)[c]?o[c]=null:o[c]=(0,p.Z)(this,A)[c].clone())}for(var h=0,d=["row_ids","raw_annotations","genes","multi_block_levels","raw_block_levels"];h<d.length;h++){var v=d[h];v in(0,p.Z)(this,A)&&(o[v]=(0,p.Z)(this,A)[v])}M(null,o);var _=this.fetchParameters();return _.subset=null,new e(_,o,(0,p.Z)(this,Z))}}],[{key:"defaults",value:function(){return{block_factor:null,subset:null}}}]),e}();function I(e){if(null==e)return e;var t=(0,o.Z)({},e);return"values"in t&&(t.values=t.values.slice()),"ranges"in t&&(t.ranges=t.ranges.map((function(e){return e.slice()}))),t}function S(e,t,n){return w.N2(e,null),t&&(e=e.slice()),n||this.undoSubset(e),e}var B=["RNA","ADT","CRISPR"];function C(e,t){var n={};try{for(var r=[],a=[],i=0;i<t.length;i++){a.push(t[i].matrix.get(e));var s=t[i].primary_ids[e];if(null==s)throw new Error("modality '"+e+"' lacks a primary identifier for dataset "+String(i));r.push(s)}var o=_.KV(a,r);n.matrix=o.matrix,n.features=m.Nd(t[0].features[e],o.indices),n.row_ids=m.Nd(t[0].row_ids[e],o.indices)}catch(u){throw w.Yl(n.matrix),u}return n}function z(e,t){var n,a,i=[],s=(0,r.Z)(B);try{for(s.s();!(n=s.n()).done;){var o,u=n.value,l=!0,c=(0,r.Z)(t);try{for(c.s();!(o=c.n()).done;){if(!o.value.matrix.has(u)){l=!1;break}}}catch(A){c.e(A)}finally{c.f()}l&&i.push(u)}}catch(A){s.e(A)}finally{s.f()}if(0==i.length)throw new Error("failed to find common modalities across all datasets");var h={matrix:new _.VU,features:{},row_ids:{}};try{for(var f=0,d=i;f<d.length;f++){var p=d[f],v=C(p,t);h.matrix.add(p,v.matrix),h.features[p]=v.features,h.row_ids[p]=v.row_ids}var g=t.map((function(e){return e.cells}));h.cells=m.sj(g);var y=new Array(t.length);t.forEach((function(e,t){y[t]=e.matrix.numberOfColumns()})),a=_.j4(y),h.block_ids=a,h.block_levels=e;var b=new Array(a.length);a.forEach((function(t,n){b[n]=e[t]})),h.cells.$setColumn("__batch__",b)}catch(Z){throw w.Yl(a),w.Yl(h.matrix),Z}return h}function R(e){if(0==e.matrix.available().length)throw new Error("");var t={matrix:new _.VU,features:{},row_ids:{}};try{var n,a=(0,r.Z)(B);try{for(a.s();!(n=a.n()).done;){var i=n.value;e.matrix.has(i)&&(t.matrix.add(i,e.matrix.get(i)),t.features[i]=e.features[i],t.row_ids[i]=e.row_ids[i])}}catch(s){a.e(s)}finally{a.f()}}catch(o){throw _.gd(t.matrix),o}return t.cells=e.cells,t.block_ids=null,t.block_levels=null,t}function F(e,t){return D.apply(this,arguments)}function D(){return(D=(0,s.Z)((0,a.Z)().mark((function e(t,n){var i,s,o,u,l,c,h,f,d,p,v,m;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(i=Object.keys(t)).sort(),s=[],e.prev=3,o=0,u=i;case 5:if(!(o<u.length)){e.next=15;break}return l=u[o],e.t0=s,e.next=10,t[l].load({cache:n});case 10:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 12:o++,e.next=5;break;case 15:e.next=22;break;case 17:e.prev=17,e.t2=e.catch(3),c=(0,r.Z)(s);try{for(c.s();!(h=c.n()).done;)f=h.value,_.gd(f.matrix)}catch(a){c.e(a)}finally{c.f()}throw e.t2;case 22:if(1!=i.length){e.next=33;break}e.prev=23,d=R(s[0]),e.next=31;break;case 27:throw e.prev=27,e.t3=e.catch(23),_.gd(s[0].matrix),e.t3;case 31:e.next=34;break;case 33:try{d=z(i,s)}finally{p=(0,r.Z)(s);try{for(p.s();!(v=p.n()).done;)m=v.value,_.gd(m.matrix)}catch(a){p.e(a)}finally{p.f()}}case 34:return e.abrupt("return",d);case 35:case"end":return e.stop()}}),e,null,[[3,17],[23,27]])})))).apply(this,arguments)}var N=-1;function Q(e,t){var n;if(y in t)n=t[y];else if(null==e)n=null;else{if(!t.raw_annotations.hasColumn(e.field))throw new Error("failed to find '"+e.field+"' in the column annotations");var a=t.raw_annotations.column(e.field);if(n=[],"values"in e){var i=new Set(e.values);a.forEach((function(e,t){i.has(e)&&n.push(t)}))}else a.forEach((function(t,a){var i,s=(0,r.Z)(e.ranges);try{for(s.s();!(i=s.n()).done;){var o=i.value;if(t>=o[0]&&t<=o[1])return void n.push(a)}}catch(u){s.e(u)}finally{s.f()}}))}if("raw_block_ids"in t&&null!==t.raw_block_ids){var s=t.raw_block_ids.array(),o=[];if(null!==n){var u,l=(0,r.Z)(n);try{for(l.s();!(u=l.n()).done;){var c=u.value;s[c]!==N&&o.push(c)}}catch(f){l.e(f)}finally{l.f()}}else for(var h=0;h<s.length;h++)s[h]!==N&&o.push(h);n=o}return n}function O(e,t,n){return q.apply(this,arguments)}function q(){return(q=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.Yl(n.raw_matrix),w.Yl(n.matrix),w.Yl(n.multi_block_ids),e.next=5,F(t,r);case 5:i=e.sent,n.raw_matrix=i.matrix,n.row_ids=i.row_ids,n.raw_annotations=i.cells,n.multi_block_ids=i.block_ids,n.multi_block_levels=i.block_levels,n.genes=i.features;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t){w.Yl(t.raw_block_ids);var n=null,r=null;if(null!==e)try{var a=t.raw_annotations.column(e);if(a.length!=t.raw_matrix.numberOfColumns())throw new Error("length of blocking factor '"+e+"' should be equal to the number of cells");var i=_.Yh(a,{action:"none",placeholder:N});n=i.ids,r=i.levels}catch(s){throw w.Yl(n),s}else n=null!==t.multi_block_ids?t.multi_block_ids.view():null,r=t.multi_block_levels;t.raw_block_ids=n,t.raw_block_levels=r}function M(e,t){w.Yl(t.matrix),w.Yl(t.block_ids);var n,a,i,s,o=Q(e,t);try{if(null===o)n=t.raw_annotations,a=t.raw_matrix.clone(),null!==t.raw_block_ids?(i=t.raw_block_ids.view(),s=t.raw_block_levels):(i=null,s=null);else{if(n=m.Nd(t.raw_annotations,o),null!==t.raw_block_ids)i=_.DS(t.raw_block_ids,o),s=_.D4(i).map((function(e){return t.raw_block_levels[e]}));else i=null,s=null;a=new _.VU;var u,l=(0,r.Z)(t.raw_matrix.available());try{for(l.s();!(u=l.n()).done;){var c=u.value,h=t.raw_matrix.get(c);a.add(c,_.ZW(h,o))}}catch(f){l.e(f)}finally{l.f()}}}catch(d){throw w.Yl(a),w.Yl(i),d}t.annotations=n,t.block_levels=s,t.block_ids=i,t.matrix=a}var W=null;function T(e){var t=W;return W=e,t}},4071:function(e,t,n){n.d(t,{$p:function(){return u},AB:function(){return c},Ig:function(){return _},Vi:function(){return g},cE:function(){return v},qM:function(){return m},yc:function(){return l}});var r=n(4165),a=n(5861),i=n(5831),s=(n(7891),n(8794)),o=function(e,t,n){return null};function u(e){var t=o;return o=e,t}var l={numberOfThreads:1};function c(e,t){var n=e.fetchIndex(),r={num_obs:n.numberOfCells()},a=null,s=null,o=null,u=null;try{a=i.wf(n,t),s=i.Wf(a.numberOfCells()),o=i.Wf(a.size()),u=i.RJ(a.size()),a.serialize({runs:s,indices:o,distances:u}),r.size=a.size(),r.runs=s.array().slice(),r.indices=o.array().slice(),r.distances=u.array().slice()}finally{null!==a&&a.free(),null!==s&&s.free(),null!==o&&o.free(),null!==u&&u.free()}return r}var h=[],f=[];function d(e){return e.type}function p(e,t){"error"==d(t)?e.reject(t.error):e.resolve(t.data)}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=h[e],a=f[e],i=a.counter,o=new Promise((function(e,t){var n={resolve:e,reject:t};i in a.promises?(p(n,a.promises[i]),delete a.promises[i]):a.promises[i]=n}));return a.counter++,t.id=i,s.bG(r,t,n),o}function _(e,t){var n=h.length;h.push(e);var r={counter:0,promises:{}};return f.push(r),s.jC(e,(function(e){var t=d(e.data);if(t.endsWith("_iter"))o(t.slice(0,-5),e.data.x,e.data.y,e.data.iteration);else{var n=e.data.id;n in r.promises?(p(r.promises[n],e.data),delete r.promises[n]):r.promises[n]=e.data}})),{worker_id:n,ready:v(n,{cmd:"INIT",scranOptions:t})}}function m(e){return w.apply(this,arguments)}function w(){return(w=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t,{cmd:"KILL"});case 2:return n=h[t],h[t]=null,e.abrupt("return",s.Ae(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t,n){var r={cmd:"RUN",params:t},a=[];return null!==n&&(a=[n.runs.buffer,n.indices.buffer,n.distances.buffer],r.neighbors=n),v(e,r,a)}},8795:function(e,t,n){n.d(t,{i:function(){return r}});var r="2.0.14"},5061:function(e,t,n){n.d(t,{or:function(){return v},is:function(){return h.i},bj:function(){return c.b},Uy:function(){return f.U},RR:function(){return d.R},Kk:function(){return r.geneBaseUrl},d9:function(){return r.geneDownload},wf:function(){return r.intersect},XZ:function(){return r.referenceBaseUrl},ao:function(){return r.referenceDownload},$g:function(){return _.$},wy:function(){return m.w},XW:function(){return u},b5:function(){return r.setGeneDownload}});var r=n(8137),a=(n(4147),n(7078)),i=n(4165),s=n(7762),o=n(5861);function u(e,t){return l.apply(this,arguments)}function l(){return l=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o,u,l,c,h,f,d,p,v,_,m,w,g,y,b,A,Z,k,x=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=(r=x.length>2&&void 0!==x[2]?x[2]:{}).types,u=void 0===o?null:o,l=r.ignoreCase,c=void 0===l||l,null===u&&(u=["entrez","ensembl","symbol"]),h=[],f=(0,s.Z)(u);try{for(f.s();!(d=f.n()).done;)p=d.value,h.push((0,a.B)(t,p,{lowerCase:c}))}catch(i){f.e(i)}finally{f.f()}return e.next=7,Promise.all(h);case 7:v=e.sent,_=[],m=0;case 10:if(!(m<n.length)){e.next=22;break}if(0!=(w=n[m]).length){e.next=15;break}return _.push([]),e.abrupt("continue",19);case 15:for(c&&(w=w.toLowerCase()),g=[],y=0;y<u.length;y++)if("undefined"!==typeof(b=v[y].get(w))){A=(0,s.Z)(b);try{for(A.s();!(Z=A.n()).done;)k=Z.value,g.push(k)}catch(i){A.e(i)}finally{A.f()}}_.push(g);case 19:m++,e.next=10;break;case 22:return e.abrupt("return",_);case 23:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}var c=n(7899),h=(n(4127),n(3192)),f=(n(6331),n(4479),n(7855)),d=(n(320),n(2666)),p=(n(5719),n(3324));function v(e){var t,n=new Map,r=(0,s.Z)(e);try{for(r.s();!(t=r.n()).done;){var a,i=t.value,o=(0,s.Z)(i);try{for(o.s();!(a=o.n()).done;){var u=a.value,l=n.get(u);"undefined"==typeof l?n.set(u,1):n.set(u,l+1)}}catch(w){o.e(w)}finally{o.f()}}}catch(w){r.e(w)}finally{r.f()}var c,h=[],f=(0,s.Z)(n);try{for(f.s();!(c=f.n()).done;){var d=(0,p.Z)(c.value,2),v=d[0],_=d[1],m={id:Number(v),count:_};h.push(m)}}catch(w){f.e(w)}finally{f.f()}return h}var _=n(7101),m=n(5479)},8137:function(e,t,n){n.r(t),n.d(t,{convertToUint32Array:function(){return S},decompressLines:function(){return w},default_download:function(){return o},fetchNumber:function(){return F},fetchSizes:function(){return R},geneBaseUrl:function(){return p},geneDownload:function(){return _},gene_download:function(){return v},intersect:function(){return B},referenceBaseUrl:function(){return l},referenceDownload:function(){return h},reference_download:function(){return c},retrieveBytes:function(){return E},retrieveBytesByIndex:function(){return x},retrieveNamedRanges:function(){return b},retrieveRanges:function(){return g},retrieveRangesWithExtras:function(){return Z},setGeneDownload:function(){return m},setReferenceDownload:function(){return f}});var r=n(4165),a=n(7762),i=n(5861),s=n(714),o=function(e,t,n,r){var a=e+"/"+t;return null==n||null==r?fetch(a):fetch(a,{headers:{Range:"bytes="+String(n)+"-"+String(r)}})},u="https://github.com/LTLA/gesel-feedstock/releases/download/indices-v0.2.1";function l(e){return u}var c=function(e){return o(u,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)};function h(e){var t=c;return"undefined"!==typeof e&&(c=e),t}function f(e){return h(e)}var d="https://github.com/LTLA/gesel-feedstock/releases/download/genes-v1.0.0";function p(e){return d}var v=function(e){return o(d,e,null,null)};function _(e){var t=v;return"undefined"!==typeof e&&(v=e),t}function m(e){return _(e)}function w(e){var t=s.rr(new Uint8Array(e)),n=(new TextDecoder).decode(t).split("\n");return""==n[n.length-1]?n.slice(0,n.length-1):n}function g(e){return y.apply(this,arguments)}function y(){return(y=(0,i.Z)((0,r.Z)().mark((function e(t){var n,a,i,s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t+".ranges.gz");case 2:if((n=e.sent).ok){e.next=5;break}throw"failed to fetch ranges for '"+t+"'";case 5:return e.next=7,n.arrayBuffer();case 7:for(a=e.sent,i=w(a),s=[0],o=0;o<i.length;o++)s.push(s[o]+Number(i[o])+1);return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return A.apply(this,arguments)}function A(){return(A=(0,i.Z)((0,r.Z)().mark((function e(t){var n,a,i,s,o,u,l,h,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t+".ranges.gz");case 2:if((n=e.sent).ok){e.next=5;break}throw"failed to fetch ranges for '"+t+"'";case 5:return e.next=7,n.arrayBuffer();case 7:for(a=e.sent,i=w(a),s=0,o=new Map,u=[],l=0;l<i.length;l++)h=i[l].split("\t"),f=s+Number(h[1])+1,o.set(h[0],[s,f]),u.push(h[0]),s=f;return e.abrupt("return",{ranges:o,order:u});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return k.apply(this,arguments)}function k(){return(k=(0,i.Z)((0,r.Z)().mark((function e(t){var n,a,i,s,o,u,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t+".ranges.gz");case 2:if((n=e.sent).ok){e.next=5;break}throw"failed to fetch ranges for '"+t+"'";case 5:return e.next=7,n.arrayBuffer();case 7:for(a=e.sent,i=w(a),s=[0],o=[],u=0;u<i.length;u++)l=i[u].split("\t"),s.push(s[u]+Number(l[0])+1),o.push(Number(l[1]));return e.abrupt("return",{ranges:s,extra:o});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t,n){return E(e,t[n],t[n+1])}function E(e,t,n){return I.apply(this,arguments)}function I(){return(I=(0,i.Z)((0,r.Z)().mark((function e(t,n,a){var i,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a--,e.next=3,c(t,n,a);case 3:if((i=e.sent).ok){e.next=6;break}throw"failed to fetch ranges for '"+t+"'";case 6:return e.next=8,i.text();case 8:return s=e.sent,e.abrupt("return",s.slice(0,a-n));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){var t=[];if(""!==e){var n=0;e.split("\t").forEach((function(e){var r=Number(e)+n;t.push(r),n=r}))}return new Uint32Array(t)}function B(e){if(0==e.length)return[];if(1==e.length)return e[0];for(var t=new Set(e[0]),n=1;n<e.length;n++){var r,i=new Set,s=(0,a.Z)(e[n]);try{for(s.s();!(r=s.n()).done;){var o=r.value;t.has(o)&&i.add(o)}}catch(u){s.e(u)}finally{s.f()}t=i}return Array.from(t)}function C(e,t,n,r,a,i){return z.apply(this,arguments)}function z(){return(z=(0,i.Z)((0,r.Z)().mark((function e(t,n,a,i,s,o){var u,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof(u=n.get(t))){e.next=10;break}return e.next=4,a(t,{download:!1});case 4:if(null===(l=e.sent)){e.next=7;break}return e.abrupt("return",o(l));case 7:return e.next=9,i(t);case 9:u=n.get(t);case 10:return e.abrupt("return",s(u));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,n,r){return C(e,t,n,r,(function(e){return e}),(function(n){var r,i=[],s=(0,a.Z)(n);try{for(s.s();!(r=s.n()).done;){var o=r.value;i.push(o.size)}}catch(u){s.e(u)}finally{s.f()}return t.set(e,i),i}))}function F(e,t,n,r){return C(e,t,n,r,(function(e){return e.length}),(function(e){return e.length}))}},714:function(e,t,n){n.d(t,{T_:function(){return vn},ec:function(){return mn},iv:function(){return pn},rr:function(){return _n}});function r(e){for(var t=e.length;--t>=0;)e[t]=0}var a=256,i=286,s=30,o=15,u=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),l=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=new Array(576);r(f);var d=new Array(60);r(d);var p=new Array(512);r(p);var v=new Array(256);r(v);var _=new Array(29);r(_);var m,w,g,y=new Array(s);function b(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function A(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}r(y);var Z=function(e){return e<256?p[e]:p[256+(e>>>7)]},k=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},x=function(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,k(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},E=function(e,t,n){x(e,n[2*t],n[2*t+1])},I=function(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},S=function(e,t,n){var r,a,i=new Array(16),s=0;for(r=1;r<=o;r++)s=s+n[r-1]<<1,i[r]=s;for(a=0;a<=t;a++){var u=e[2*a+1];0!==u&&(e[2*a]=I(i[u]++,u))}},B=function(e){var t;for(t=0;t<i;t++)e.dyn_ltree[2*t]=0;for(t=0;t<s;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},C=function(e){e.bi_valid>8?k(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},z=function(e,t,n,r){var a=2*t,i=2*n;return e[a]<e[i]||e[a]===e[i]&&r[t]<=r[n]},R=function(e,t,n){for(var r=e.heap[n],a=n<<1;a<=e.heap_len&&(a<e.heap_len&&z(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!z(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r},F=function(e,t,n){var r,i,s,o,c=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+c++],r+=(255&e.pending_buf[e.sym_buf+c++])<<8,i=e.pending_buf[e.sym_buf+c++],0===r?E(e,i,t):(s=v[i],E(e,s+a+1,t),0!==(o=u[s])&&(i-=_[s],x(e,i,o)),r--,s=Z(r),E(e,s,n),0!==(o=l[s])&&(r-=y[s],x(e,r,o)))}while(c<e.sym_next);E(e,256,t)},D=function(e,t){var n,r,a,i=t.dyn_tree,s=t.stat_desc.static_tree,u=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<l;n++)0!==i[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[a]=0,e.opt_len--,u&&(e.static_len-=s[2*a+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)R(e,i,n);a=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],R(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*a]=i[2*n]+i[2*r],e.depth[a]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=a,e.heap[1]=a++,R(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,a,i,s,u,l=t.dyn_tree,c=t.max_code,h=t.stat_desc.static_tree,f=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,v=t.stat_desc.max_length,_=0;for(i=0;i<=o;i++)e.bl_count[i]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(i=l[2*l[2*(r=e.heap[n])+1]+1]+1)>v&&(i=v,_++),l[2*r+1]=i,r>c||(e.bl_count[i]++,s=0,r>=p&&(s=d[r-p]),u=l[2*r],e.opt_len+=u*(i+s),f&&(e.static_len+=u*(h[2*r+1]+s)));if(0!==_){do{for(i=v-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[v]--,_-=2}while(_>0);for(i=v;0!==i;i--)for(r=e.bl_count[i];0!==r;)(a=e.heap[--n])>c||(l[2*a+1]!==i&&(e.opt_len+=(i-l[2*a+1])*l[2*a],l[2*a+1]=i),r--)}}(e,t),S(i,c,e.bl_count)},N=function(e,t,n){var r,a,i=-1,s=t[1],o=0,u=7,l=4;for(0===s&&(u=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)a=s,s=t[2*(r+1)+1],++o<u&&a===s||(o<l?e.bl_tree[2*a]+=o:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,i=a,0===s?(u=138,l=3):a===s?(u=6,l=3):(u=7,l=4))},Q=function(e,t,n){var r,a,i=-1,s=t[1],o=0,u=7,l=4;for(0===s&&(u=138,l=3),r=0;r<=n;r++)if(a=s,s=t[2*(r+1)+1],!(++o<u&&a===s)){if(o<l)do{E(e,a,e.bl_tree)}while(0!==--o);else 0!==a?(a!==i&&(E(e,a,e.bl_tree),o--),E(e,16,e.bl_tree),x(e,o-3,2)):o<=10?(E(e,17,e.bl_tree),x(e,o-3,3)):(E(e,18,e.bl_tree),x(e,o-11,7));o=0,i=a,0===s?(u=138,l=3):a===s?(u=6,l=3):(u=7,l=4)}},O=!1,q=function(e,t,n,r){x(e,0+(r?1:0),3),C(e),k(e,n),k(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},U=function(e,t,n,r){var i,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<a;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),D(e,e.l_desc),D(e,e.d_desc),o=function(e){var t;for(N(e,e.dyn_ltree,e.l_desc.max_code),N(e,e.dyn_dtree,e.d_desc.max_code),D(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*h[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==t?q(e,t,n,r):4===e.strategy||s===i?(x(e,2+(r?1:0),3),F(e,f,d)):(x(e,4+(r?1:0),3),function(e,t,n,r){var a;for(x(e,t-257,5),x(e,n-1,5),x(e,r-4,4),a=0;a<r;a++)x(e,e.bl_tree[2*h[a]+1],3);Q(e,e.dyn_ltree,t-1),Q(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),F(e,e.dyn_ltree,e.dyn_dtree)),B(e),r&&C(e)},M={_tr_init:function(e){O||(!function(){var e,t,n,r,a,h=new Array(16);for(n=0,r=0;r<28;r++)for(_[r]=n,e=0;e<1<<u[r];e++)v[n++]=r;for(v[n-1]=r,a=0,r=0;r<16;r++)for(y[r]=a,e=0;e<1<<l[r];e++)p[a++]=r;for(a>>=7;r<s;r++)for(y[r]=a<<7,e=0;e<1<<l[r]-7;e++)p[256+a++]=r;for(t=0;t<=o;t++)h[t]=0;for(e=0;e<=143;)f[2*e+1]=8,e++,h[8]++;for(;e<=255;)f[2*e+1]=9,e++,h[9]++;for(;e<=279;)f[2*e+1]=7,e++,h[7]++;for(;e<=287;)f[2*e+1]=8,e++,h[8]++;for(S(f,287,h),e=0;e<s;e++)d[2*e+1]=5,d[2*e]=I(e,5);m=new b(f,u,257,i,o),w=new b(d,l,0,s,o),g=new b(new Array(0),c,0,19,7)}(),O=!0),e.l_desc=new A(e.dyn_ltree,m),e.d_desc=new A(e.dyn_dtree,w),e.bl_desc=new A(e.bl_tree,g),e.bi_buf=0,e.bi_valid=0,B(e)},_tr_stored_block:q,_tr_flush_block:U,_tr_tally:function(e,t,n){return e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(v[n]+a+1)]++,e.dyn_dtree[2*Z(t)]++),e.sym_next===e.sym_end},_tr_align:function(e){x(e,2,3),E(e,256,f),function(e){16===e.bi_valid?(k(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},W=function(e,t,n,r){for(var a=65535&e|0,i=e>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{i=i+(a=a+t[r++]|0)|0}while(--s);a%=65521,i%=65521}return a|i<<16|0},T=new Uint32Array(function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}()),j=function(e,t,n,r){var a=T,i=r+n;e^=-1;for(var s=r;s<i;s++)e=e>>>8^a[255&(e^t[s])];return-1^e},G={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},L={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},H=M._tr_init,Y=M._tr_stored_block,J=M._tr_flush_block,V=M._tr_tally,P=M._tr_align,X=L.Z_NO_FLUSH,$=L.Z_PARTIAL_FLUSH,K=L.Z_FULL_FLUSH,ee=L.Z_FINISH,te=L.Z_BLOCK,ne=L.Z_OK,re=L.Z_STREAM_END,ae=L.Z_STREAM_ERROR,ie=L.Z_DATA_ERROR,se=L.Z_BUF_ERROR,oe=L.Z_DEFAULT_COMPRESSION,ue=L.Z_FILTERED,le=L.Z_HUFFMAN_ONLY,ce=L.Z_RLE,he=L.Z_FIXED,fe=L.Z_DEFAULT_STRATEGY,de=L.Z_UNKNOWN,pe=L.Z_DEFLATED,ve=258,_e=262,me=42,we=113,ge=666,ye=function(e,t){return e.msg=G[t],t},be=function(e){return 2*e-(e>4?9:0)},Ae=function(e){for(var t=e.length;--t>=0;)e[t]=0},Ze=function(e){var t,n,r,a=e.w_size;r=t=e.hash_size;do{n=e.head[--r],e.head[r]=n>=a?n-a:0}while(--t);r=t=a;do{n=e.prev[--r],e.prev[r]=n>=a?n-a:0}while(--t)},ke=function(e,t,n){return(t<<e.hash_shift^n)&e.hash_mask},xe=function(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},Ee=function(e,t){J(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,xe(e.strm)},Ie=function(e,t){e.pending_buf[e.pending++]=t},Se=function(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Be=function(e,t,n,r){var a=e.avail_in;return a>r&&(a=r),0===a?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),n),1===e.state.wrap?e.adler=W(e.adler,t,a,n):2===e.state.wrap&&(e.adler=j(e.adler,t,a,n)),e.next_in+=a,e.total_in+=a,a)},Ce=function(e,t){var n,r,a=e.max_chain_length,i=e.strstart,s=e.prev_length,o=e.nice_match,u=e.strstart>e.w_size-_e?e.strstart-(e.w_size-_e):0,l=e.window,c=e.w_mask,h=e.prev,f=e.strstart+ve,d=l[i+s-1],p=l[i+s];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(l[(n=t)+s]===p&&l[n+s-1]===d&&l[n]===l[i]&&l[++n]===l[i+1]){i+=2,n++;do{}while(l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&i<f);if(r=ve-(f-i),i=f-ve,r>s){if(e.match_start=t,s=r,r>=o)break;d=l[i+s-1],p=l[i+s]}}}while((t=h[t&c])>u&&0!==--a);return s<=e.lookahead?s:e.lookahead},ze=function(e){var t,n,r,a=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-_e)&&(e.window.set(e.window.subarray(a,a+a-n),0),e.match_start-=a,e.strstart-=a,e.block_start-=a,e.insert>e.strstart&&(e.insert=e.strstart),Ze(e),n+=a),0===e.strm.avail_in)break;if(t=Be(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=ke(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=ke(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<_e&&0!==e.strm.avail_in)},Re=function(e,t){var n,r,a,i=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,o=e.strm.avail_in;do{if(n=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a)break;if(a=e.strm.avail_out-a,n>(r=e.strstart-e.block_start)+e.strm.avail_in&&(n=r+e.strm.avail_in),n>a&&(n=a),n<i&&(0===n&&t!==ee||t===X||n!==r+e.strm.avail_in))break;s=t===ee&&n===r+e.strm.avail_in?1:0,Y(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,xe(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(Be(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===s);return(o-=e.strm.avail_in)&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==X&&t!==ee&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(Be(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,i=(a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a)>e.w_size?e.w_size:a,((r=e.strstart-e.block_start)>=i||(r||t===ee)&&t!==X&&0===e.strm.avail_in&&r<=a)&&(n=r>a?a:r,s=t===ee&&0===e.strm.avail_in&&n===r?1:0,Y(e,e.block_start,n,s),e.block_start+=n,xe(e.strm)),s?3:1)},Fe=function(e,t){for(var n,r;;){if(e.lookahead<_e){if(ze(e),e.lookahead<_e&&t===X)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ke(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-_e&&(e.match_length=Ce(e,n)),e.match_length>=3)if(r=V(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=ke(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ke(e,e.ins_h,e.window[e.strstart+1]);else r=V(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Ee(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===ee?(Ee(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ee(e,!1),0===e.strm.avail_out)?1:2},De=function(e,t){for(var n,r,a;;){if(e.lookahead<_e){if(ze(e),e.lookahead<_e&&t===X)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ke(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-_e&&(e.match_length=Ce(e,n),e.match_length<=5&&(e.strategy===ue||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,r=V(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=ke(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(Ee(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=V(e,0,e.window[e.strstart-1]))&&Ee(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=V(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===ee?(Ee(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ee(e,!1),0===e.strm.avail_out)?1:2};function Ne(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}var Qe=[new Ne(0,0,0,0,Re),new Ne(4,4,8,4,Fe),new Ne(4,5,16,8,Fe),new Ne(4,6,32,32,Fe),new Ne(4,4,16,16,De),new Ne(8,16,32,32,De),new Ne(8,16,128,128,De),new Ne(8,32,128,256,De),new Ne(32,128,258,1024,De),new Ne(32,258,258,4096,De)];function Oe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=pe,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ae(this.dyn_ltree),Ae(this.dyn_dtree),Ae(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ae(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ae(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var qe=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.status!==me&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==we&&t.status!==ge?1:0},Ue=function(e){if(qe(e))return ye(e,ae);e.total_in=e.total_out=0,e.data_type=de;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?me:we,e.adler=2===t.wrap?0:1,t.last_flush=-2,H(t),ne},Me=function(e){var t,n=Ue(e);return n===ne&&((t=e.state).window_size=2*t.w_size,Ae(t.head),t.max_lazy_match=Qe[t.level].max_lazy,t.good_match=Qe[t.level].good_length,t.nice_match=Qe[t.level].nice_length,t.max_chain_length=Qe[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n},We=function(e,t,n,r,a,i){if(!e)return ae;var s=1;if(t===oe&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),a<1||a>9||n!==pe||r<8||r>15||t<0||t>9||i<0||i>he||8===r&&1!==s)return ye(e,ae);8===r&&(r=9);var o=new Oe;return e.state=o,o.strm=e,o.status=me,o.wrap=s,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=t,o.strategy=i,o.method=n,Me(e)},Te={deflateInit:function(e,t){return We(e,t,pe,15,8,fe)},deflateInit2:We,deflateReset:Me,deflateResetKeep:Ue,deflateSetHeader:function(e,t){return qe(e)||2!==e.state.wrap?ae:(e.state.gzhead=t,ne)},deflate:function(e,t){if(qe(e)||t>te||t<0)return e?ye(e,ae):ae;var n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===ge&&t!==ee)return ye(e,0===e.avail_out?se:ae);var r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(xe(e),0===e.avail_out)return n.last_flush=-1,ne}else if(0===e.avail_in&&be(t)<=be(r)&&t!==ee)return ye(e,se);if(n.status===ge&&0!==e.avail_in)return ye(e,se);if(n.status===me&&0===n.wrap&&(n.status=we),n.status===me){var a=pe+(n.w_bits-8<<4)<<8;if(a|=(n.strategy>=le||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(a|=32),Se(n,a+=31-a%31),0!==n.strstart&&(Se(n,e.adler>>>16),Se(n,65535&e.adler)),e.adler=1,n.status=we,xe(e),0!==n.pending)return n.last_flush=-1,ne}if(57===n.status)if(e.adler=0,Ie(n,31),Ie(n,139),Ie(n,8),n.gzhead)Ie(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Ie(n,255&n.gzhead.time),Ie(n,n.gzhead.time>>8&255),Ie(n,n.gzhead.time>>16&255),Ie(n,n.gzhead.time>>24&255),Ie(n,9===n.level?2:n.strategy>=le||n.level<2?4:0),Ie(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Ie(n,255&n.gzhead.extra.length),Ie(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=j(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(Ie(n,0),Ie(n,0),Ie(n,0),Ie(n,0),Ie(n,0),Ie(n,9===n.level?2:n.strategy>=le||n.level<2?4:0),Ie(n,3),n.status=we,xe(e),0!==n.pending)return n.last_flush=-1,ne;if(69===n.status){if(n.gzhead.extra){for(var i=n.pending,s=(65535&n.gzhead.extra.length)-n.gzindex;n.pending+s>n.pending_buf_size;){var o=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>i&&(e.adler=j(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex+=o,xe(e),0!==n.pending)return n.last_flush=-1,ne;i=0,s-=o}var u=new Uint8Array(n.gzhead.extra);n.pending_buf.set(u.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending+=s,n.gzhead.hcrc&&n.pending>i&&(e.adler=j(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){var l,c=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>c&&(e.adler=j(e.adler,n.pending_buf,n.pending-c,c)),xe(e),0!==n.pending)return n.last_flush=-1,ne;c=0}l=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Ie(n,l)}while(0!==l);n.gzhead.hcrc&&n.pending>c&&(e.adler=j(e.adler,n.pending_buf,n.pending-c,c)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){var h,f=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>f&&(e.adler=j(e.adler,n.pending_buf,n.pending-f,f)),xe(e),0!==n.pending)return n.last_flush=-1,ne;f=0}h=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Ie(n,h)}while(0!==h);n.gzhead.hcrc&&n.pending>f&&(e.adler=j(e.adler,n.pending_buf,n.pending-f,f))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(xe(e),0!==n.pending))return n.last_flush=-1,ne;Ie(n,255&e.adler),Ie(n,e.adler>>8&255),e.adler=0}if(n.status=we,xe(e),0!==n.pending)return n.last_flush=-1,ne}if(0!==e.avail_in||0!==n.lookahead||t!==X&&n.status!==ge){var d=0===n.level?Re(n,t):n.strategy===le?function(e,t){for(var n;;){if(0===e.lookahead&&(ze(e),0===e.lookahead)){if(t===X)return 1;break}if(e.match_length=0,n=V(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Ee(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ee?(Ee(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ee(e,!1),0===e.strm.avail_out)?1:2}(n,t):n.strategy===ce?function(e,t){for(var n,r,a,i,s=e.window;;){if(e.lookahead<=ve){if(ze(e),e.lookahead<=ve&&t===X)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=s[a=e.strstart-1])===s[++a]&&r===s[++a]&&r===s[++a]){i=e.strstart+ve;do{}while(r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&a<i);e.match_length=ve-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=V(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=V(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Ee(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ee?(Ee(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ee(e,!1),0===e.strm.avail_out)?1:2}(n,t):Qe[n.level].func(n,t);if(3!==d&&4!==d||(n.status=ge),1===d||3===d)return 0===e.avail_out&&(n.last_flush=-1),ne;if(2===d&&(t===$?P(n):t!==te&&(Y(n,0,0,!1),t===K&&(Ae(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),xe(e),0===e.avail_out))return n.last_flush=-1,ne}return t!==ee?ne:n.wrap<=0?re:(2===n.wrap?(Ie(n,255&e.adler),Ie(n,e.adler>>8&255),Ie(n,e.adler>>16&255),Ie(n,e.adler>>24&255),Ie(n,255&e.total_in),Ie(n,e.total_in>>8&255),Ie(n,e.total_in>>16&255),Ie(n,e.total_in>>24&255)):(Se(n,e.adler>>>16),Se(n,65535&e.adler)),xe(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?ne:re)},deflateEnd:function(e){if(qe(e))return ae;var t=e.state.status;return e.state=null,t===we?ye(e,ie):ne},deflateSetDictionary:function(e,t){var n=t.length;if(qe(e))return ae;var r=e.state,a=r.wrap;if(2===a||1===a&&r.status!==me||r.lookahead)return ae;if(1===a&&(e.adler=W(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===a&&(Ae(r.head),r.strstart=0,r.block_start=0,r.insert=0);var i=new Uint8Array(r.w_size);i.set(t.subarray(n-r.w_size,n),0),t=i,n=r.w_size}var s=e.avail_in,o=e.next_in,u=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,ze(r);r.lookahead>=3;){var l=r.strstart,c=r.lookahead-2;do{r.ins_h=ke(r,r.ins_h,r.window[l+3-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++}while(--c);r.strstart=l,r.lookahead=2,ze(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=o,e.input=u,e.avail_in=s,r.wrap=a,ne},deflateInfo:"pako deflate (from Nodeca project)"},je=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Ge={assign:function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(var r in n)je(n,r)&&(e[r]=n[r])}}return e},flattenChunks:function(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n].length;for(var a=new Uint8Array(t),i=0,s=0,o=e.length;i<o;i++){var u=e[i];a.set(u,s),s+=u.length}return a}},Le=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(wn){Le=!1}for(var He=new Uint8Array(256),Ye=0;Ye<256;Ye++)He[Ye]=Ye>=252?6:Ye>=248?5:Ye>=240?4:Ye>=224?3:Ye>=192?2:1;He[254]=He[254]=1;var Je={string2buf:function(e){if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,n,r,a,i,s=e.length,o=0;for(a=0;a<s;a++)55296===(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320===(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),i=0,a=0;i<o;a++)55296===(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320===(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},buf2string:function(e,t){var n,r,a=t||e.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var i=new Array(2*a);for(r=0,n=0;n<a;){var s=e[n++];if(s<128)i[r++]=s;else{var o=He[s];if(o>4)i[r++]=65533,n+=o-1;else{for(s&=2===o?31:3===o?15:7;o>1&&n<a;)s=s<<6|63&e[n++],o--;o>1?i[r++]=65533:s<65536?i[r++]=s:(s-=65536,i[r++]=55296|s>>10&1023,i[r++]=56320|1023&s)}}}return function(e,t){if(t<65534&&e.subarray&&Le)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}(i,r)},utf8border:function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var n=t-1;n>=0&&128===(192&e[n]);)n--;return n<0||0===n?t:n+He[e[n]]>t?n:t}};var Ve=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Pe=Object.prototype.toString,Xe=L.Z_NO_FLUSH,$e=L.Z_SYNC_FLUSH,Ke=L.Z_FULL_FLUSH,et=L.Z_FINISH,tt=L.Z_OK,nt=L.Z_STREAM_END,rt=L.Z_DEFAULT_COMPRESSION,at=L.Z_DEFAULT_STRATEGY,it=L.Z_DEFLATED;function st(e){this.options=Ge.assign({level:rt,method:it,chunkSize:16384,windowBits:15,memLevel:8,strategy:at},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ve,this.strm.avail_out=0;var n=Te.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==tt)throw new Error(G[n]);if(t.header&&Te.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"===typeof t.dictionary?Je.string2buf(t.dictionary):"[object ArrayBuffer]"===Pe.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=Te.deflateSetDictionary(this.strm,r))!==tt)throw new Error(G[n]);this._dict_set=!0}}function ot(e,t){var n=new st(t);if(n.push(e,!0),n.err)throw n.msg||G[n.err];return n.result}st.prototype.push=function(e,t){var n,r,a=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(r=t===~~t?t:!0===t?et:Xe,"string"===typeof e?a.input=Je.string2buf(e):"[object ArrayBuffer]"===Pe.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(r===$e||r===Ke)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if((n=Te.deflate(a,r))===nt)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),n=Te.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===tt;if(0!==a.avail_out){if(r>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},st.prototype.onData=function(e){this.chunks.push(e)},st.prototype.onEnd=function(e){e===tt&&(this.result=Ge.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ut={Deflate:st,deflate:ot,deflateRaw:function(e,t){return(t=t||{}).raw=!0,ot(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,ot(e,t)},constants:L},lt=16209,ct=function(e,t){var n,r,a,i,s,o,u,l,c,h,f,d,p,v,_,m,w,g,y,b,A,Z,k,x,E=e.state;n=e.next_in,k=e.input,r=n+(e.avail_in-5),a=e.next_out,x=e.output,i=a-(t-e.avail_out),s=a+(e.avail_out-257),o=E.dmax,u=E.wsize,l=E.whave,c=E.wnext,h=E.window,f=E.hold,d=E.bits,p=E.lencode,v=E.distcode,_=(1<<E.lenbits)-1,m=(1<<E.distbits)-1;e:do{d<15&&(f+=k[n++]<<d,d+=8,f+=k[n++]<<d,d+=8),w=p[f&_];t:for(;;){if(f>>>=g=w>>>24,d-=g,0===(g=w>>>16&255))x[a++]=65535&w;else{if(!(16&g)){if(0===(64&g)){w=p[(65535&w)+(f&(1<<g)-1)];continue t}if(32&g){E.mode=16191;break e}e.msg="invalid literal/length code",E.mode=lt;break e}y=65535&w,(g&=15)&&(d<g&&(f+=k[n++]<<d,d+=8),y+=f&(1<<g)-1,f>>>=g,d-=g),d<15&&(f+=k[n++]<<d,d+=8,f+=k[n++]<<d,d+=8),w=v[f&m];n:for(;;){if(f>>>=g=w>>>24,d-=g,!(16&(g=w>>>16&255))){if(0===(64&g)){w=v[(65535&w)+(f&(1<<g)-1)];continue n}e.msg="invalid distance code",E.mode=lt;break e}if(b=65535&w,d<(g&=15)&&(f+=k[n++]<<d,(d+=8)<g&&(f+=k[n++]<<d,d+=8)),(b+=f&(1<<g)-1)>o){e.msg="invalid distance too far back",E.mode=lt;break e}if(f>>>=g,d-=g,b>(g=a-i)){if((g=b-g)>l&&E.sane){e.msg="invalid distance too far back",E.mode=lt;break e}if(A=0,Z=h,0===c){if(A+=u-g,g<y){y-=g;do{x[a++]=h[A++]}while(--g);A=a-b,Z=x}}else if(c<g){if(A+=u+c-g,(g-=c)<y){y-=g;do{x[a++]=h[A++]}while(--g);if(A=0,c<y){y-=g=c;do{x[a++]=h[A++]}while(--g);A=a-b,Z=x}}}else if(A+=c-g,g<y){y-=g;do{x[a++]=h[A++]}while(--g);A=a-b,Z=x}for(;y>2;)x[a++]=Z[A++],x[a++]=Z[A++],x[a++]=Z[A++],y-=3;y&&(x[a++]=Z[A++],y>1&&(x[a++]=Z[A++]))}else{A=a-b;do{x[a++]=x[A++],x[a++]=x[A++],x[a++]=x[A++],y-=3}while(y>2);y&&(x[a++]=x[A++],y>1&&(x[a++]=x[A++]))}break}}break}}while(n<r&&a<s);n-=y=d>>3,f&=(1<<(d-=y<<3))-1,e.next_in=n,e.next_out=a,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=a<s?s-a+257:257-(a-s),E.hold=f,E.bits=d},ht=15,ft=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),dt=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),pt=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),vt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),_t=function(e,t,n,r,a,i,s,o){var u,l,c,h,f,d,p,v,_,m=o.bits,w=0,g=0,y=0,b=0,A=0,Z=0,k=0,x=0,E=0,I=0,S=null,B=new Uint16Array(16),C=new Uint16Array(16),z=null;for(w=0;w<=ht;w++)B[w]=0;for(g=0;g<r;g++)B[t[n+g]]++;for(A=m,b=ht;b>=1&&0===B[b];b--);if(A>b&&(A=b),0===b)return a[i++]=20971520,a[i++]=20971520,o.bits=1,0;for(y=1;y<b&&0===B[y];y++);for(A<y&&(A=y),x=1,w=1;w<=ht;w++)if(x<<=1,(x-=B[w])<0)return-1;if(x>0&&(0===e||1!==b))return-1;for(C[1]=0,w=1;w<ht;w++)C[w+1]=C[w]+B[w];for(g=0;g<r;g++)0!==t[n+g]&&(s[C[t[n+g]]++]=g);if(0===e?(S=z=s,d=20):1===e?(S=ft,z=dt,d=257):(S=pt,z=vt,d=0),I=0,g=0,w=y,f=i,Z=A,k=0,c=-1,h=(E=1<<A)-1,1===e&&E>852||2===e&&E>592)return 1;for(;;){p=w-k,s[g]+1<d?(v=0,_=s[g]):s[g]>=d?(v=z[s[g]-d],_=S[s[g]-d]):(v=96,_=0),u=1<<w-k,y=l=1<<Z;do{a[f+(I>>k)+(l-=u)]=p<<24|v<<16|_|0}while(0!==l);for(u=1<<w-1;I&u;)u>>=1;if(0!==u?(I&=u-1,I+=u):I=0,g++,0===--B[w]){if(w===b)break;w=t[n+s[g]]}if(w>A&&(I&h)!==c){for(0===k&&(k=A),f+=y,x=1<<(Z=w-k);Z+k<b&&!((x-=B[Z+k])<=0);)Z++,x<<=1;if(E+=1<<Z,1===e&&E>852||2===e&&E>592)return 1;a[c=I&h]=A<<24|Z<<16|f-i|0}}return 0!==I&&(a[f+I]=w-k<<24|64<<16|0),o.bits=A,0},mt=L.Z_FINISH,wt=L.Z_BLOCK,gt=L.Z_TREES,yt=L.Z_OK,bt=L.Z_STREAM_END,At=L.Z_NEED_DICT,Zt=L.Z_STREAM_ERROR,kt=L.Z_DATA_ERROR,xt=L.Z_MEM_ERROR,Et=L.Z_BUF_ERROR,It=L.Z_DEFLATED,St=16180,Bt=16190,Ct=16191,zt=16192,Rt=16194,Ft=16199,Dt=16200,Nt=16206,Qt=16209,Ot=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function qt(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Ut,Mt,Wt=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.mode<St||t.mode>16211?1:0},Tt=function(e){if(Wt(e))return Zt;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=St,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,yt},jt=function(e){if(Wt(e))return Zt;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Tt(e)},Gt=function(e,t){var n;if(Wt(e))return Zt;var r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Zt:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,jt(e))},Lt=function(e,t){if(!e)return Zt;var n=new qt;e.state=n,n.strm=e,n.window=null,n.mode=St;var r=Gt(e,t);return r!==yt&&(e.state=null),r},Ht=!0,Yt=function(e){if(Ht){Ut=new Int32Array(512),Mt=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(_t(1,e.lens,0,288,Ut,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;_t(2,e.lens,0,32,Mt,0,e.work,{bits:5}),Ht=!1}e.lencode=Ut,e.lenbits=9,e.distcode=Mt,e.distbits=5},Jt=function(e,t,n,r){var a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>r&&(a=r),i.window.set(t.subarray(n-r,n-r+a),i.wnext),(r-=a)?(i.window.set(t.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},Vt={inflateReset:jt,inflateReset2:Gt,inflateResetKeep:Tt,inflateInit:function(e){return Lt(e,15)},inflateInit2:Lt,inflate:function(e,t){var n,r,a,i,s,o,u,l,c,h,f,d,p,v,_,m,w,g,y,b,A,Z,k,x,E=0,I=new Uint8Array(4),S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Wt(e)||!e.output||!e.input&&0!==e.avail_in)return Zt;(n=e.state).mode===Ct&&(n.mode=zt),s=e.next_out,a=e.output,u=e.avail_out,i=e.next_in,r=e.input,o=e.avail_in,l=n.hold,c=n.bits,h=o,f=u,Z=yt;e:for(;;)switch(n.mode){case St:if(0===n.wrap){n.mode=zt;break}for(;c<16;){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}if(2&n.wrap&&35615===l){0===n.wbits&&(n.wbits=15),n.check=0,I[0]=255&l,I[1]=l>>>8&255,n.check=j(n.check,I,2,0),l=0,c=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=Qt;break}if((15&l)!==It){e.msg="unknown compression method",n.mode=Qt;break}if(c-=4,A=8+(15&(l>>>=4)),0===n.wbits&&(n.wbits=A),A>15||A>n.wbits){e.msg="invalid window size",n.mode=Qt;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&l?16189:Ct,l=0,c=0;break;case 16181:for(;c<16;){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}if(n.flags=l,(255&n.flags)!==It){e.msg="unknown compression method",n.mode=Qt;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Qt;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&4&n.wrap&&(I[0]=255&l,I[1]=l>>>8&255,n.check=j(n.check,I,2,0)),l=0,c=0,n.mode=16182;case 16182:for(;c<32;){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}n.head&&(n.head.time=l),512&n.flags&&4&n.wrap&&(I[0]=255&l,I[1]=l>>>8&255,I[2]=l>>>16&255,I[3]=l>>>24&255,n.check=j(n.check,I,4,0)),l=0,c=0,n.mode=16183;case 16183:for(;c<16;){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&4&n.wrap&&(I[0]=255&l,I[1]=l>>>8&255,n.check=j(n.check,I,2,0)),l=0,c=0,n.mode=16184;case 16184:if(1024&n.flags){for(;c<16;){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&4&n.wrap&&(I[0]=255&l,I[1]=l>>>8&255,n.check=j(n.check,I,2,0)),l=0,c=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&((d=n.length)>o&&(d=o),d&&(n.head&&(A=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+d),A)),512&n.flags&&4&n.wrap&&(n.check=j(n.check,r,d,i)),o-=d,i+=d,n.length-=d),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===o)break e;d=0;do{A=r[i+d++],n.head&&A&&n.length<65536&&(n.head.name+=String.fromCharCode(A))}while(A&&d<o);if(512&n.flags&&4&n.wrap&&(n.check=j(n.check,r,d,i)),o-=d,i+=d,A)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===o)break e;d=0;do{A=r[i+d++],n.head&&A&&n.length<65536&&(n.head.comment+=String.fromCharCode(A))}while(A&&d<o);if(512&n.flags&&4&n.wrap&&(n.check=j(n.check,r,d,i)),o-=d,i+=d,A)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;c<16;){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}if(4&n.wrap&&l!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Qt;break}l=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Ct;break;case 16189:for(;c<32;){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}e.adler=n.check=Ot(l),l=0,c=0,n.mode=Bt;case Bt:if(0===n.havedict)return e.next_out=s,e.avail_out=u,e.next_in=i,e.avail_in=o,n.hold=l,n.bits=c,At;e.adler=n.check=1,n.mode=Ct;case Ct:if(t===wt||t===gt)break e;case zt:if(n.last){l>>>=7&c,c-=7&c,n.mode=Nt;break}for(;c<3;){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}switch(n.last=1&l,c-=1,3&(l>>>=1)){case 0:n.mode=16193;break;case 1:if(Yt(n),n.mode=Ft,t===gt){l>>>=2,c-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=Qt}l>>>=2,c-=2;break;case 16193:for(l>>>=7&c,c-=7&c;c<32;){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}if((65535&l)!==(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Qt;break}if(n.length=65535&l,l=0,c=0,n.mode=Rt,t===gt)break e;case Rt:n.mode=16195;case 16195:if(d=n.length){if(d>o&&(d=o),d>u&&(d=u),0===d)break e;a.set(r.subarray(i,i+d),s),o-=d,i+=d,u-=d,s+=d,n.length-=d;break}n.mode=Ct;break;case 16196:for(;c<14;){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}if(n.nlen=257+(31&l),l>>>=5,c-=5,n.ndist=1+(31&l),l>>>=5,c-=5,n.ncode=4+(15&l),l>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Qt;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;c<3;){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}n.lens[S[n.have++]]=7&l,l>>>=3,c-=3}for(;n.have<19;)n.lens[S[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,k={bits:n.lenbits},Z=_t(0,n.lens,0,19,n.lencode,0,n.work,k),n.lenbits=k.bits,Z){e.msg="invalid code lengths set",n.mode=Qt;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;m=(E=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,w=65535&E,!((_=E>>>24)<=c);){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}if(w<16)l>>>=_,c-=_,n.lens[n.have++]=w;else{if(16===w){for(x=_+2;c<x;){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}if(l>>>=_,c-=_,0===n.have){e.msg="invalid bit length repeat",n.mode=Qt;break}A=n.lens[n.have-1],d=3+(3&l),l>>>=2,c-=2}else if(17===w){for(x=_+3;c<x;){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}c-=_,A=0,d=3+(7&(l>>>=_)),l>>>=3,c-=3}else{for(x=_+7;c<x;){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}c-=_,A=0,d=11+(127&(l>>>=_)),l>>>=7,c-=7}if(n.have+d>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Qt;break}for(;d--;)n.lens[n.have++]=A}}if(n.mode===Qt)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Qt;break}if(n.lenbits=9,k={bits:n.lenbits},Z=_t(1,n.lens,0,n.nlen,n.lencode,0,n.work,k),n.lenbits=k.bits,Z){e.msg="invalid literal/lengths set",n.mode=Qt;break}if(n.distbits=6,n.distcode=n.distdyn,k={bits:n.distbits},Z=_t(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,k),n.distbits=k.bits,Z){e.msg="invalid distances set",n.mode=Qt;break}if(n.mode=Ft,t===gt)break e;case Ft:n.mode=Dt;case Dt:if(o>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=i,e.avail_in=o,n.hold=l,n.bits=c,ct(e,f),s=e.next_out,a=e.output,u=e.avail_out,i=e.next_in,r=e.input,o=e.avail_in,l=n.hold,c=n.bits,n.mode===Ct&&(n.back=-1);break}for(n.back=0;m=(E=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,w=65535&E,!((_=E>>>24)<=c);){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}if(m&&0===(240&m)){for(g=_,y=m,b=w;m=(E=n.lencode[b+((l&(1<<g+y)-1)>>g)])>>>16&255,w=65535&E,!(g+(_=E>>>24)<=c);){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}l>>>=g,c-=g,n.back+=g}if(l>>>=_,c-=_,n.back+=_,n.length=w,0===m){n.mode=16205;break}if(32&m){n.back=-1,n.mode=Ct;break}if(64&m){e.msg="invalid literal/length code",n.mode=Qt;break}n.extra=15&m,n.mode=16201;case 16201:if(n.extra){for(x=n.extra;c<x;){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;m=(E=n.distcode[l&(1<<n.distbits)-1])>>>16&255,w=65535&E,!((_=E>>>24)<=c);){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}if(0===(240&m)){for(g=_,y=m,b=w;m=(E=n.distcode[b+((l&(1<<g+y)-1)>>g)])>>>16&255,w=65535&E,!(g+(_=E>>>24)<=c);){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}l>>>=g,c-=g,n.back+=g}if(l>>>=_,c-=_,n.back+=_,64&m){e.msg="invalid distance code",n.mode=Qt;break}n.offset=w,n.extra=15&m,n.mode=16203;case 16203:if(n.extra){for(x=n.extra;c<x;){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Qt;break}n.mode=16204;case 16204:if(0===u)break e;if(d=f-u,n.offset>d){if((d=n.offset-d)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Qt;break}d>n.wnext?(d-=n.wnext,p=n.wsize-d):p=n.wnext-d,d>n.length&&(d=n.length),v=n.window}else v=a,p=s-n.offset,d=n.length;d>u&&(d=u),u-=d,n.length-=d;do{a[s++]=v[p++]}while(--d);0===n.length&&(n.mode=Dt);break;case 16205:if(0===u)break e;a[s++]=n.length,u--,n.mode=Dt;break;case Nt:if(n.wrap){for(;c<32;){if(0===o)break e;o--,l|=r[i++]<<c,c+=8}if(f-=u,e.total_out+=f,n.total+=f,4&n.wrap&&f&&(e.adler=n.check=n.flags?j(n.check,a,f,s-f):W(n.check,a,f,s-f)),f=u,4&n.wrap&&(n.flags?l:Ot(l))!==n.check){e.msg="incorrect data check",n.mode=Qt;break}l=0,c=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;c<32;){if(0===o)break e;o--,l+=r[i++]<<c,c+=8}if(4&n.wrap&&l!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Qt;break}l=0,c=0}n.mode=16208;case 16208:Z=bt;break e;case Qt:Z=kt;break e;case 16210:return xt;default:return Zt}return e.next_out=s,e.avail_out=u,e.next_in=i,e.avail_in=o,n.hold=l,n.bits=c,(n.wsize||f!==e.avail_out&&n.mode<Qt&&(n.mode<Nt||t!==mt))&&Jt(e,e.output,e.next_out,f-e.avail_out),h-=e.avail_in,f-=e.avail_out,e.total_in+=h,e.total_out+=f,n.total+=f,4&n.wrap&&f&&(e.adler=n.check=n.flags?j(n.check,a,f,e.next_out-f):W(n.check,a,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Ct?128:0)+(n.mode===Ft||n.mode===Rt?256:0),(0===h&&0===f||t===mt)&&Z===yt&&(Z=Et),Z},inflateEnd:function(e){if(Wt(e))return Zt;var t=e.state;return t.window&&(t.window=null),e.state=null,yt},inflateGetHeader:function(e,t){if(Wt(e))return Zt;var n=e.state;return 0===(2&n.wrap)?Zt:(n.head=t,t.done=!1,yt)},inflateSetDictionary:function(e,t){var n,r=t.length;return Wt(e)||0!==(n=e.state).wrap&&n.mode!==Bt?Zt:n.mode===Bt&&W(1,t,r,0)!==n.check?kt:Jt(e,t,r,r)?(n.mode=16210,xt):(n.havedict=1,yt)},inflateInfo:"pako inflate (from Nodeca project)"};var Pt=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Xt=Object.prototype.toString,$t=L.Z_NO_FLUSH,Kt=L.Z_FINISH,en=L.Z_OK,tn=L.Z_STREAM_END,nn=L.Z_NEED_DICT,rn=L.Z_STREAM_ERROR,an=L.Z_DATA_ERROR,sn=L.Z_MEM_ERROR;function on(e){this.options=Ge.assign({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ve,this.strm.avail_out=0;var n=Vt.inflateInit2(this.strm,t.windowBits);if(n!==en)throw new Error(G[n]);if(this.header=new Pt,Vt.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=Je.string2buf(t.dictionary):"[object ArrayBuffer]"===Xt.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Vt.inflateSetDictionary(this.strm,t.dictionary))!==en))throw new Error(G[n])}function un(e,t){var n=new on(t);if(n.push(e),n.err)throw n.msg||G[n.err];return n.result}on.prototype.push=function(e,t){var n,r,a,i=this.strm,s=this.options.chunkSize,o=this.options.dictionary;if(this.ended)return!1;for(r=t===~~t?t:!0===t?Kt:$t,"[object ArrayBuffer]"===Xt.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(s),i.next_out=0,i.avail_out=s),(n=Vt.inflate(i,r))===nn&&o&&((n=Vt.inflateSetDictionary(i,o))===en?n=Vt.inflate(i,r):n===an&&(n=nn));i.avail_in>0&&n===tn&&i.state.wrap>0&&0!==e[i.next_in];)Vt.inflateReset(i),n=Vt.inflate(i,r);switch(n){case rn:case an:case nn:case sn:return this.onEnd(n),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(0===i.avail_out||n===tn))if("string"===this.options.to){var u=Je.utf8border(i.output,i.next_out),l=i.next_out-u,c=Je.buf2string(i.output,u);i.next_out=l,i.avail_out=s-l,l&&i.output.set(i.output.subarray(u,u+l),0),this.onData(c)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(n!==en||0!==a){if(n===tn)return n=Vt.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},on.prototype.onData=function(e){this.chunks.push(e)},on.prototype.onEnd=function(e){e===en&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ge.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ln={Inflate:on,inflate:un,inflateRaw:function(e,t){return(t=t||{}).raw=!0,un(e,t)},ungzip:un,constants:L},cn=ut.gzip,hn=ln.Inflate,fn=ln.inflate,dn=ln.ungzip,pn=cn,vn=hn,_n=fn,mn=dn},5941:function(e,t,n){n.d(t,{NC:function(){return a},Yd:function(){return s},pJ:function(){return i},xW:function(){return o}});var r=n(8782);function a(e,t){r.RE((function(n){return n.FS.writeFile(e,t)}))}function i(e){return r.RE((function(t){return t.FS.readFile(e,{encoding:"binary"})}))}function s(e){r.RE((function(t){return t.FS.unlink(e)}))}function o(e){return r.RE((function(t){return t.FS.analyzePath(e).exists}))}},489:function(e,t,n){n.d(t,{NC:function(){return a},Yd:function(){return s},pJ:function(){return i},xW:function(){return o}});var r=n(5941);function a(e,t){r.NC(e,t)}function i(e){return r.pJ(e)}function s(e){o(e)&&r.Yd(e)}function o(e){return r.xW(e)}},6126:function(e,t,n){n.d(t,{Fv:function(){return R},ll:function(){return N},pT:function(){return D}});var r=n(2415),a=n(7326),i=n(136),s=n(9388),o=n(3324),u=n(5671),l=n(3144),c=n(101),h=n(2346),f=n(3889),d=n(8916),p=n(2793),v=n(7762),_=n(6635),m=n(8782),w=n(6774);function g(e,t){if(t.length>0){var n=t.reduce((function(e,t){return e*t}));if(e.length!=n)throw new Error("length of 'x' must be equal to the product of 'shape'")}else if(e instanceof Array||ArrayBuffer.isView(e)){if(1!=e.length)throw new Error("length of 'x' should be 1 for a scalar dataset")}else e=[e];return e}function y(e,t){return null===t?"string"==typeof e||"number"==typeof e?(e=[e],t=[]):t=[e.length]:e=g(e,t),{x:e,shape:t}}function b(e){if(Array.isArray(e)){var t,n=(0,v.Z)(e);try{for(n.s();!(t=n.n()).done;){if("string"===typeof t.value)throw new Error("'x' should not contain any strings for a non-string HDF5 dataset")}}catch(r){n.e(r)}finally{n.f()}}}function A(e){var t=0;return e.array().forEach((function(e){t<e&&(t=e)})),t}var Z=new WeakMap,k=new WeakMap,x=new WeakMap,E=new WeakSet,I=function(){function e(t,n){(0,u.Z)(this,e),(0,c.Z)(this,E),(0,h.Z)(this,Z,{writable:!0,value:void 0}),(0,h.Z)(this,k,{writable:!0,value:void 0}),(0,h.Z)(this,x,{writable:!0,value:void 0}),(0,p.Z)(this,Z,t),(0,p.Z)(this,k,n)}return(0,l.Z)(e,[{key:"file",get:function(){return(0,d.Z)(this,Z)}},{key:"name",get:function(){return(0,d.Z)(this,k)}},{key:"attributes",get:function(){return(0,d.Z)(this,x)}},{key:"set_attributes",value:function(e){(0,p.Z)(this,x,e)}},{key:"readAttribute",value:function(e){var t,n,r=this,a=m.RE((function(t){return new t.LoadedH5Attr(r.file,r.name,e)}));try{n=Array.from(a.shape());var i=a.type();if("other"==i)throw new Error("cannot load dataset for an unsupported type");t="String"==i?w.b(a.values(),a.lengths()):a.values().slice()}finally{a.delete()}return{values:t,shape:n}}},{key:"writeAttribute",value:function(e,t,n,r){var a=this,i=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).maxStringLength,s=void 0===i?null:i;if(null===r)throw new Error("cannot write 'null' to HDF5");var u=y(r,n);if(r=u.x,n=u.shape,"String"==t){var l=w.C(r),c=(0,o.Z)(l,2),h=c[0],d=c[1];try{null==s&&(s=A(h)),(0,f.Z)(this,E,S).call(this,e,t,n,{maxStringLength:s}),m.RE((function(t){return t.write_string_hdf5_attribute(a.file,a.name,e,h.length,h.offset,d.offset)}))}finally{_.gd(d),_.gd(h)}}else{b(r);var p=_.de(r,null);try{(0,f.Z)(this,E,S).call(this,e,t,n),m.RE((function(t){return t.write_numeric_hdf5_attribute(a.file,a.name,e,p.constructor.className,p.offset)}))}finally{p.free()}}}}]),e}();function S(e,t,n){var r=this,a=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).maxStringLength,i=void 0===a?10:a,s=_.de(n,"Int32WasmArray");try{m.RE((function(n){return n.create_hdf5_attribute(r.file,r.name,e,t,s.length,s.offset,i)})),(0,d.Z)(this,x).push(e)}finally{s.free()}}var B=new WeakMap,C=new WeakMap,z=new WeakSet,R=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(e,r){var i,s=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).newlyCreated,o=void 0!==s&&s;if((0,u.Z)(this,n),i=t.call(this,e,r),(0,c.Z)((0,a.Z)(i),z),(0,h.Z)((0,a.Z)(i),B,{writable:!0,value:void 0}),(0,h.Z)((0,a.Z)(i),C,{writable:!0,value:void 0}),o)(0,p.Z)((0,a.Z)(i),B,{}),i.set_attributes([]);else{var l=m.RE((function(t){return new t.H5GroupDetails(e,r)}));try{var f=w.b(l.child_buffer(),l.child_lengths()),v=l.child_types(),_=["Group","DataSet","Other"];(0,p.Z)((0,a.Z)(i),B,{});for(var g=0;g<f.length;g++)(0,d.Z)((0,a.Z)(i),B)[f[g]]=_[v[g]];var y=w.b(l.attr_buffer(),l.attr_lengths());i.set_attributes(y)}finally{l.delete()}}return i}return(0,l.Z)(n,[{key:"children",get:function(){return(0,d.Z)(this,B)}},{key:"open",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,f.Z)(this,z,F).call(this,e);if(e in(0,d.Z)(this,B)){if("Group"==(0,d.Z)(this,B)[e])return new n(this.file,r,t);if("DataSet"==(0,d.Z)(this,B)[e])return new M(this.file,r,t);throw new Error("don't know how to open '"+e+"'")}throw new Error("no '"+e+"' child in this HDF5 Group")}},{key:"createGroup",value:function(e){var t=this,r=(0,f.Z)(this,z,F).call(this,e);if(e in this.children){if("Group"==this.children[e])return new n(this.file,r);throw new Error("existing child '"+r+"' is not a HDF5 group")}return m.RE((function(e){return e.create_hdf5_group(t.file,r)})),this.children[e]="Group",new n(this.file,r,{newlyCreated:!0})}},{key:"createDataSet",value:function(e,t,n){var r,a,i=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=s.maxStringLength,u=void 0===o?10:o,l=s.compression,c=void 0===l?6:l,h=s.chunks,d=void 0===h?null:h,p=(0,f.Z)(this,z,F).call(this,e);try{var v=(r=_.de(n,"Int32WasmArray")).offset;if(null!==d){if((a=_.de(d,"Int32WasmArray")).length!=r.length)throw new Error("'chunks' and 'shape' should have the same dimensions");v=a.offset}m.RE((function(e){return e.create_hdf5_dataset(i.file,p,t,r.length,r.offset,u,c,v)}))}finally{r.free()}return this.children[e]="DataSet",new M(this.file,p,{newlyCreated:!0,type:t,shape:n})}},{key:"writeDataSet",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=a.compression,s=void 0===i?6:i,u=a.chunks,l=void 0===u?null:u,c=a.cache,h=void 0!==c&&c;if(null===r)throw new Error("cannot write 'null' to HDF5");var f,d=y(r,n);if(r=d.x,n=d.shape,"String"==t){var p=w.C(r),v=(0,o.Z)(p,2),g=v[0],b=v[1];try{var Z=A(g);f=this.createDataSet(e,"String",n,{maxStringLength:Z,compression:s,chunks:l}),m.RE((function(e){return e.write_string_hdf5_dataset(f.file,f.name,g.length,g.offset,b.offset)}))}finally{_.gd(g),_.gd(b)}f.cache_loaded(r,h)}else(f=this.createDataSet(e,t,n,{compression:s,chunks:l})).write(r,{cache:h});return f}}]),n}(I);function F(e){var t=this.name;return"/"!=t&&(t+="/"),t+=e}var D=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,u.Z)(this,n),t.call(this,e,"/",r)}return(0,l.Z)(n)}(R);function N(e){return m.RE((function(t){return t.create_hdf5_file(e)})),new D(e,{newlyCreated:!0})}var Q=new WeakMap,O=new WeakMap,q=new WeakMap,U=new WeakMap,M=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(e,i){var s,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=o.load,c=void 0!==l&&l,f=o.newlyCreated,d=void 0!==f&&f,v=o.shape,_=void 0===v?null:v,g=o.type,y=void 0===g?null:g,b=o.values,A=void 0===b?null:b;if((0,u.Z)(this,n),s=t.call(this,e,i),(0,h.Z)((0,a.Z)(s),Q,{writable:!0,value:void 0}),(0,h.Z)((0,a.Z)(s),O,{writable:!0,value:void 0}),(0,h.Z)((0,a.Z)(s),q,{writable:!0,value:void 0}),(0,h.Z)((0,a.Z)(s),U,{writable:!0,value:void 0}),d){if(null===_||null===y)throw new Error("need to pass 'shape' and 'type' if 'newlyCreated = true'");(0,p.Z)((0,a.Z)(s),Q,_),(0,p.Z)((0,a.Z)(s),O,y),(0,p.Z)((0,a.Z)(s),q,A),(0,p.Z)((0,a.Z)(s),U,null!==A),s.set_attributes([])}else{if(c){var Z=(0,r.Z)(n,n,W).call(n,e,i);(0,p.Z)((0,a.Z)(s),O,Z.type),(0,p.Z)((0,a.Z)(s),Q,Z.shape),(0,p.Z)((0,a.Z)(s),q,Z.values),s.set_attributes(Z.attributes)}else{var k=m.RE((function(t){return new t.H5DataSetDetails(e,i)}));try{(0,p.Z)((0,a.Z)(s),O,k.type()),(0,p.Z)((0,a.Z)(s),Q,Array.from(k.shape())),(0,p.Z)((0,a.Z)(s),q,null),s.set_attributes(w.b(k.attr_buffer(),k.attr_lengths()))}finally{k.delete()}}(0,p.Z)((0,a.Z)(s),U,c)}return s}return(0,l.Z)(n,[{key:"type",get:function(){return(0,d.Z)(this,O)}},{key:"shape",get:function(){return(0,d.Z)(this,Q)}},{key:"loaded",get:function(){return(0,d.Z)(this,U)}},{key:"values",get:function(){return(0,d.Z)(this,q)}},{key:"load",value:function(){if(!(0,d.Z)(this,U)){var e=(0,r.Z)(n,n,W).call(n,this.file,this.name);(0,p.Z)(this,q,e.values),(0,p.Z)(this,U,!0)}return(0,d.Z)(this,q)}},{key:"cache_loaded",value:function(e,t){t?((0,p.Z)(this,q,e.slice()),(0,p.Z)(this,U,!0)):((0,p.Z)(this,U,!1),(0,p.Z)(this,q,null))}},{key:"write",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cache,r=void 0!==n&&n;if(null===e)throw new Error("cannot write 'null' to HDF5");if(e=g(e,this.shape),"String"==this.type){var a=w.C(e),i=(0,o.Z)(a,2),s=i[0],u=i[1];try{m.RE((function(e){return e.write_string_hdf5_dataset(t.file,t.name,s.length,s.offset,u.offset)}))}finally{_.gd(u),_.gd(s)}this.cache_loaded(e,r)}else{b(e);var l=_.de(e,null);try{m.RE((function(e){return e.write_numeric_hdf5_dataset(t.file,t.name,l.constructor.className,l.offset)})),this.cache_loaded(l,r)}finally{l.free()}}}}]),n}(I);function W(e,t){var n,r,a,i,s=m.RE((function(n){return new n.LoadedH5DataSet(e,t)}));try{if("other"==(r=s.type()))throw new Error("cannot load dataset for an unsupported type");n="String"==r?w.b(s.values(),s.lengths()):s.values().slice(),a=Array.from(s.shape()),i=w.b(s.attr_buffer(),s.attr_lengths())}finally{s.delete()}return{values:n,type:r,shape:a,attributes:i}}},5831:function(e,t,n){n.d(t,{$H:function(){return q.$},BA:function(){return s.BA},Bp:function(){return i.Bp},Bs:function(){return N.B},Cb:function(){return A.C},D4:function(){return h.D4},D6:function(){return s.D6},DS:function(){return h.DS},EF:function(){return i.EF},F5:function(){return z.F},Fu:function(){return I.Fu},Fv:function(){return u.Fv},II:function(){return s.II},J4:function(){return m.J4},KV:function(){return d.KV},Lw:function(){return w.Lw},N6:function(){return i.N6},Os:function(){return D.Os},Qj:function(){return D.Qj},RJ:function(){return a.RJ},SV:function(){return s.SV},St:function(){return D.St},TS:function(){return a.TS},Tk:function(){return B.Tk},VU:function(){return O.V},Wf:function(){return a.Wf},XU:function(){return y.XU},Y8:function(){return x.Y},Yd:function(){return o.Yd},Yh:function(){return f.Y},ZI:function(){return S.ZI},ZW:function(){return p.ZW},_3:function(){return i._3},_u:function(){return q._},aG:function(){return E.dO},bD:function(){return S.bD},b_:function(){return b.b},eu:function(){return C.eu},f:function(){return l.f},fw:function(){return h.fw},gd:function(){return a.gd},gk:function(){return Z.g},gn:function(){return c.g},j2:function(){return r.j2},j4:function(){return h.j4},jX:function(){return R.j},ll:function(){return u.ll},nO:function(){return g.nO},p$:function(){return s.p$},pG:function(){return D.pG},pJ:function(){return o.pJ},pT:function(){return u.pT},qu:function(){return s.qu},rY:function(){return k.rY},tY:function(){return D.tY},us:function(){return i.us},v_:function(){return Z.v},vc:function(){return p.vc},vy:function(){return _.dH},wf:function(){return I.wf},wj:function(){return v.wj},xw:function(){return Q.x},y5:function(){return F.y5}});var r=n(8782),a=n(6635),i=n(8311),s=n(6663),o=n(489),u=n(6126),l=n(118),c=n(2284),h=n(5644),f=n(4292),d=n(5470),p=n(1196),v=(n(5219),n(5448)),_=n(9206),m=n(2945),w=n(7339),g=n(6757),y=n(4609),b=n(8420),A=(n(845),n(9283),n(6974)),Z=n(1184),k=n(4812),x=n(6199),E=n(5159),I=n(7067),S=n(9273),B=n(4181),C=(n(5319),n(2494)),z=n(5696),R=n(2732),F=n(9249),D=n(3779),N=n(7039),Q=n(5538),O=(n(7644),n(2306),n(4021)),q=n(4755)},4755:function(e,t,n){n.d(t,{$:function(){return s},_:function(){return i}});var r=n(489),a=n(3102);function i(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).extension,t=void 0===e?"":e;return a.E("temp_",t)}function s(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).extension,n=void 0===t?"":t;if("string"==typeof e)return a.z(e);var s=i({extension:n});return r.NC(s,e),{path:s,flush:function(){return r.Yd(s)}}}},118:function(e,t,n){n.d(t,{f:function(){return i}});var r=n(6126),a=n(8782);function i(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=i.format,o=void 0===s?null:s,u=i.forceInteger,l=void 0!==u&&u;null==o&&(o="automatic"),o=a.RE((function(r){return r.write_sparse_matrix_to_hdf5(e.matrix,t,n,o,l)}));var c=new r.Fv(t,n),h=[e.numberOfRows(),e.numberOfColumns()];if("tenx_matrix"==o)c.writeDataSet("shape","Int32",null,h);else if("csr_matrix"==o)c.writeAttribute("encoding-type","String",null,"csr_matrix"),c.writeAttribute("shape","Int32",null,h.reverse());else{if("csc_matrix"!=o)throw new Error("unknown format '"+o+"'");c.writeAttribute("encoding-type","String",null,"csc_matrix"),c.writeAttribute("shape","Int32",null,h.reverse())}}}}]);
//# sourceMappingURL=754.8bd297af.chunk.js.map